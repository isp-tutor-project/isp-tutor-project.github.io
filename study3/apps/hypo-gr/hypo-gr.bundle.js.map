{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////home/ckot/projects/work/isptutorproject_website/common/isp-database/database.js","webpack:////home/ckot/projects/work/isptutorproject_website/common/isp-database/localStorageDB.js","webpack:////home/ckot/projects/work/isptutorproject_website/common/isp-database/firestoreDB.js","webpack:///./src/ontology.js","webpack:///./src/hypoOntology.js","webpack:///./src/features.js","webpack:///./src/index.js","webpack:////home/ckot/projects/work/isptutorproject_website/common/snackbar/index.js","webpack:////home/ckot/projects/work/isptutorproject_website/common/navbar/index.js","webpack:////home/ckot/projects/work/isptutorproject_website/common/isp-database/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Database","classCode","userID","this","activityKey","decodeJSON","varName","super","setCredentials","console","count","data","Promise","all","getTextValue","getActivityData","getCurrHypoTask","getIntialHypoData","getFinalHypoData","then","ccRes","uidRes","rqRes","chtRes","ihRes","fhRes","rqted","currHypoTaskIdx","firstPrediction","initialHypo","secondPrediction","finalHypo","getJSONValue","JSON","parse","retVal","moduleState","selectedArea","index","selectedTopic","selectedVariable","selectedRQ","catch","err","error","getIntValue","pred1","initHypo","pred2","overwrite","resolve","reject","items","localStorage","setItem","stringify","getItem","undefined","parseInt","parseFloat","firebaseConfig","apiKey","authDomain","projectId","firebase","initializeApp","store","firestore","userRef","collection","doc","exists","getUserData","userData","set","merge","update","FieldValue","delete","ontology","hypoOntology","features","split","filter","x","log","definitionPages","hypoPages","biDirectionalPages","eleID","el","document","getElementById","text","innerHTML","classList","add","setTimeout","remove","querySelector","userInfoRegion","activityTitle","activitySection","signOutBtn","signInText","signOutUser","addEventListener","e","clear","window","location","path","title","innerText","section","userName","PIXEL_RATIO","ctx","createElement","getContext","devicePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","xRatio","innerWidth","yRatio","innerHeight","Math","min","scalingRatio","CONNECTOR_RADIUS","createjs","Touch","isSupported","stage","panel","steps","queue","currentArrow","somethingHighlighted","IV","DV","iv","dv","dvabb","nodes","initialHypoLocked","finalHypoLocked","currentHypo","currentBubbles","arrowz","causes","initialHypoLockedReason","logPrediction","fldName","fldValue","saveValue","assetsLoadingComplete","event","can","Stage","enable","disable","isResp","respDim","isScale","scaleType","lastW","lastH","lastS","resizeCanvas","w","h","iw","ih","pRatio","sRatio","max","width","height","style","scaleX","scaleY","tickOnUpdate","makeResponsive","enableMouseOver","Ticker","initStage","notesHtml","moduleData","area","topic","variable","ontologyTopic","hypoOntologyTopic","initHypoTasks","pageNamesToFunctions","removeAllChildren","image1","Bitmap","getResult","y","text1","Text","CANVAS_WIDTH","textAlign","text2","text3","getRQ","lineHeight","lineWidth","text4","backButton","createBackButton","on","prevHypoTask","nextButton","createNextButton","nextHypoTask","addChild","color","background","Shape","graphics","beginFill","drawRoundRect","label","largeButtonWidth","largeButtonHeight","textBaseline","button","Container","cursor","mouseChildren","handleMouseOver","createLargeButton","DOMElement","showDOMElement","hideDOMElement","invisibles","querySelectorAll","showOnTransition","forEach","inv","showOn","dataset","push","maxTransition","keys","Infinity","currentTransition","html","prevButton","ele","image","getMeasuredWidth","image2","iteration","html1","html2","text5","pizzaText1","graph1","pizzaText2","iceCreamText1","graph2","iceCreamText2","QUIZ_ANSWERS","correct","heading","quiz","quizQuestions","quizDropDowns","getElementsByClassName","hideDOMOverlays","qdd","removeEventListener","onChangeAnswer","target","setCustomValidity","length","htmlElement","reportValidity","show","video","advice","CANVAS_HEIGHT","predictionPage1","prediction","toLowerCase","getImageForPrediction","ivBubble","createFixedBubble","capitalizeFirstLetter","dvBubble","arrow","createUnlabeledArrow","BUBBLE_WIDTH","directionsContainer","dirLabel","dirText","dirHeight","getMeasuredHeight","dirBg","setStrokeStyle","beginStroke","drawRect","lhsOverlay","toggleRq","togglePred","list","captitalized","map","node","capitalize","capCpt","li","appendChild","initConceptsList","toggleCpts","notepad","notes","toggle","btn","toggleIcon","rqToggler","predToggler","cptsToggler","getNotepadWords","checkForMinWords","focus","initializeConceptMap","conceptMapPage","oppositePrediction","increase","brmPage","chosenDVDirection","secondPredictionSet","question","choice1","choice2","setIncreaseColors","setDecreaseColors","generateHitAreaCenterAlignment","getEleById","display","firstPredictionLocked","firstPredictionLockedReason","firstPredictionSaved","brmBtnClicked","brmButton","fontStyle","buttonWidth","buttonHeight","createExtraLargeButton","BUTTON_WIDTH","BUTTON_HEIGHT","open","origin","Date","now","whichHypo","sentence","dontCapitalize","word","includes","toUpperCase","slice","join","redrawHypo","bubble","updateConceptsMenu","menu","currCpts","bub","option","rehydrateHypothesis","hypoData","nonFixedBubs","concepts","isFixed","nfb","createDeletableBubble","direction","arrows","arr","fromBubs","from","toBubs","to","oConn","outConnector","iConn","inConnector","startX","startY","conn","parent","getOutConnectorCoords","endX","endY","getInConnectorCoords","createArrow","hypoSaved","bg","modalBg","alpha","mouseEnabled","lightBulb","remindersTxt","showHelpButton","createTextWidthButton","conceptsMenu","conceptsDropDown","help","modalProps","saveWarning","notepadPaste","drawCptMap","goHome","dismissHelp","helpContents","dismissNotepadPaste","dismissDrawCptMap","cancelSaveBtn","saveBtn","disableElements","setAttribute","showModal","modal","hideModal","removeAttribute","removeChild","hideHelp","showPasteNotes","npn","cht","hypoText","notepadHtmlAsText","maxWidth","replace","RegExp","hideSaveWarning","selectConceptHandler","idx","indexOf","action","info","timestamp","toLocaleDateString","closeButton","child","children","removeArrowAndLabel","toLocaleString","tmp","find","saveHandler","currentPrediction","currentPredictionValue","notesText","currBubble","getChildByName","isDV","connector","nextBubble","connectorOver","saveJSONValue","logData","secondPredictionLocked","secondPredictionLockedReason","dealWithDOMElements","leavePage","link","download","canvas","toBlob","blob","href","URL","createObjectURL","click","scrollTop","isGood","numChildren","getChildAt","dirButton","connected","bubbleChild","drawDirButton","verifyConceptMap","defaultOpt","opt","initializeConceptsMenu","removePanel","fetchPrevSavedHypo","dvDirButton","string","charAt","type","handlePanelOver","handleConnectorOver","handleArrowClick","option1","createOption","createDeletePanel","stageX","stageY","handleDirectionClick","option2","createDirectionPanel","handleExplanationClick","option3","changeExplanation","handleCauseClick","createExplanationPanel","optionWidth","textWidth","createCausePanel","notePadHtml","toString","hit","bounds","getBounds","hitArea","createInConnector","drawCircle","createOutConnector","mouseX","mouseY","moveListener","drawArrow","upListener","objs","getObjectsUnderPoint","obj","getInConnectorAtPoint","off","line","BUBBLE_HEIGHT","buttonSize","createCloseButton","createDirButton","leftConnector","rightConnector","regX","regY","abs","currentTarget","leftArrow","rightArrow","topConnector","rect","triSize","tri","drawPolyStar","rotation","createArrowButton","normal","imgHeight","hover","optionBox","optionLabel","OPTION_HEIGHT","lineLength","sqrt","moveTo","lineTo","atan2","PI","arrowLabel","substring","arrowSize","labelBox","midX","midY","labelBg","labelPadding","item","studentHypoTasks","invalidTask","showSnackbar","updateCurrTaskIndex","prevTaskIdx","currHypoTask","nextTaskIdx","task","_pageNames","pages","unshift","defPage","page","bdp","computeHypoTasks","taskNames","dbType","db","getDBConnection","LoadQueue","loadManifest","id","src"],"mappings":"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","file":"hypo-gr.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","// abstract class - interface\nexport class Database {\n    constructor() {\n\n    }\n\n    setCredentials(classCode, userID) {\n        this.classCode = classCode;\n        this.userID = userID;\n    }\n\n    getUserData() {\n\n    }\n\n    getActivityData(activityKey, decodeJSON = true) {\n\n    }\n    \n    getRQData() {\n\n    }   \n\n    getCurrHypoTask() {\n\n    }\n\n    getInitialHypoData() {\n\n    }\n\n    getFinalHypoData() {\n\n    }\n\n    saveValue(varName, value) {\n\n    }\n\n    saveJSONValue(varName, object) {\n\n    }\n\n    getBoolValue(varName) {\n\n    }\n\n    getIntValue(varName) {\n\n    }\n\n    getFloatValue(varName) {\n\n    }\n\n    getTextValue(varName) {\n\n    }\n\n    getJSONValue(varName) {\n\n    }\n\n};\n\n\n","\nimport { Database } from \"./database\";\n\n// NOTE: this API must use promises to be compatible with any db\n// we may be using, which may be either sync or async\nexport class LocalStorageDB extends Database {\n\n    constructor() {\n        super();\n    }\n\n    setCredentials(classCode, userID) {\n        super.setCredentials(classCode, userID);\n        // return Promise.all([\n        // this.saveValue(\"classCode\", classCode),\n        // this.saveValue(\"userID\", userID),\n        // ]).then(([result1, result2]) => { });\n    }\n\n    getUserData() {\n        console.count(\"getUserData() called\");\n        let data = {};\n        return Promise.all([\n            this.getTextValue(\"classCode\"),\n            this.getTextValue(\"userID\"),\n            this.getActivityData(\"rqted\"),\n            this.getCurrHypoTask(),\n            this.getIntialHypoData(),\n            this.getFinalHypoData()\n        ]).then(([ccRes, uidRes, rqRes, chtRes, ihRes, fhRes]) => {\n            data.classCode = ccRes;\n            data.userID = uidRes;\n            data.rqted = rqRes;\n            if (chtRes) {\n                data.currHypoTaskIdx = chtRes\n            }\n            if (ihRes) {\n                data.firstPrediction = ihRes.firstPrediction;\n                data.initialHypo = ihRes.initialHypo;\n            }\n            if (fhRes) {\n                data.secondPrediction = fhRes.secondPrediction;\n                data.finalHypo = fhRes.finalHypo;\n            }\n            return data;\n        });\n    }\n\n    getActivityData(activityKey, decodeJSON = true) {\n        return this.getJSONValue(activityKey)\n        .then((data) => {\n            if (data && decodeJSON) {\n                return JSON.parse(data);\n            } else {\n                return data;\n            }\n        });\n    }\n\n    getRQData() {\n        let retVal = null;\n        return this.getActivityData(\"rqted\")\n        .then((rqted) => {\n            // console.log(rqted);\n            if (rqted) {\n                retVal = rqted;\n            } else {\n                // if the rq isn't selected hard-code to crystal growth\n                retVal = {\n                    moduleState: {\n                        selectedArea: { index: 1 },\n                        selectedTopic: { index: 1 },\n                        selectedVariable: { index: 1 },\n                        selectedRQ: { index: 1 }\n                    }\n                };\n            }\n            // console.log(retVal);\n            return retVal;\n        })\n        .catch((err) => {\n            console.error(err);\n            return retVal;\n        });\n    }\n\n    getCurrHypoTask() {\n        return this.getIntValue(\"currHypoTaskIdx\")\n    }\n\n    getIntialHypoData() {\n        let data = {};\n        return this.getTextValue(\"firstPrediction\")\n            .then((pred1) => {\n                // console.log(`getInitialHypoData():firstPrediction ${pred1}`);\n                if (null !== pred1) {\n                    data.firstPrediction = pred1;\n                    return this.getJSONValue(\"initialHypo\");\n                } else {\n                    data.firstPrediction = null;\n                    return null;\n                }\n            })\n            .then((initHypo) => {\n                // console.log(`getInitialHypoData():initHypo ${initHypo}`);\n                data.initialHypo = initHypo;\n                return data;\n            })\n            .catch((err) => {\n                console.error(err);\n                return data;\n            });\n    }\n\n    getFinalHypoData() {\n        let data = {};\n        return this.getTextValue(\"secondPrediction\")\n            .then((pred2) => {\n                // console.log(`getFinalHypoData():secondPrediction ${pred2}`)\n                if (null !== pred2) {\n                    data.secondPrediction = pred2;\n                    return this.getJSONValue(\"finalHypo\");\n                } else {\n                    data.secondPrediction = null;\n                    return null\n                }\n            })\n            .then((finalHypo) => {\n                // console.log(`getFinalHypoData():finalHypo ${finalHypo}`);\n                data.finalHypo = finalHypo;\n                return data;\n            })\n            .catch((err) => {\n                console.error(err);\n                return data;\n            });\n    }\n\n    setValues(object, overwrite=false) {\n        // overwrite param is ignored, as it is specific to firestore\n        return new Promise((resolve, reject) => {\n            try {\n                for (let [key, value] of Object.items(object)) {\n                    localStorage.setItem(key, value);\n                }\n                resolve(true);\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    saveValue(varName, value) {\n        return new Promise((resolve, reject) => {\n            try {\n                resolve(localStorage.setItem(varName, value));\n            } catch(err) {\n                reject(err);\n            }\n        })\n    }\n\n    saveJSONValue(varName, object) {\n        return new Promise((resolve, reject) => {\n            try {\n                let value = JSON.stringify(object);\n                resolve(localStorage.setItem(varName, value));\n            } catch(err) {\n                reject(err);\n            }\n        });\n    }\n\n    getBoolValue(varName) {\n        return new Promise((resolve, reject) => {\n            try {\n                let value = localStorage.getItem(varName);\n                if (undefined === value) {\n                    resolve(value);\n                }\n                if (\"true\" === value) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            } catch(err) {\n                reject(err);\n            }\n        });\n    }\n\n    getIntValue(varName) {\n        let retVal;\n        return new Promise((resolve, reject) => {\n            try {\n               let value = localStorage.getItem(varName);\n                if (value) {\n                    retVal = parseInt(value, 10);\n                }\n                resolve(retVal);\n            } catch(err) {\n                reject(err);\n            }\n        });\n    }\n\n    getFloatValue(varName) {\n        let retVal;\n        return new Promise((resolve, reject) => {\n            try {\n                let value = localStorage.getItem(varName);\n                if (value) {\n                    retVal = parseFloat(value);\n                }\n                resolve(retVal);\n            } catch(err) {\n                reject(err);\n            }\n        });\n    }\n\n    getTextValue(varName) {\n        let retVal;\n        return new Promise((resolve, reject) => {\n            try {\n                let value = localStorage.getItem(varName);\n                if (value) {\n                    retVal = value;\n                }\n                resolve(value);\n            } catch(err) {\n                reject(err);\n            }\n        });\n    };\n\n    getJSONValue(varName) {\n        return new Promise((resolve, reject) => {\n            try {\n                let value = localStorage.getItem(varName);\n                if (value) {\n                    value = JSON.parse(value);\n                }\n                resolve(value);\n            } catch(err) {\n                reject(err);\n            }\n        });\n    }\n};\n\n// let db = new Database(\"BOGUS_CLASS\", \"BOGUS_STUDENT\");\n\n","import { Database } from \"./database\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyD7zIk-8V20QqJNSs0cAV0uNL3qjeqLMdM\",\n    authDomain: \"isptutor.firebaseapp.com\",\n    projectId: \"isptutor\"\n};\n\nexport class FirestoreDB extends Database {\n\n    constructor() {\n        super();\n        firebase.initializeApp(firebaseConfig);\n        this.store = firebase.firestore();\n    }\n\n    setCredentials(classCode, userID) {\n        super.setCredentials(classCode, userID);\n        this.userRef = this.store.collection(this.classCode).doc(this.userID);\n    }\n\n    getUserData() {\n        // returns promise with 'doc' if it exists, null otherwise\n        return this.userRef.get()\n        .then((doc) => {\n            if (doc.exists) {\n                return doc.data;\n            } else {\n                return null;\n            }\n        });\n    }\n\n\n    getCurrHypoTask() {\n\n    }\n  \n    getActivityData(activityKey, decodeJSON=true) {\n        return this.getUserData()\n        .then((userData) => {\n            let data = userData[activityKey];\n            if (data && decodeJSON) {\n                return JSON.parse(data);\n            } else {\n                return data;\n            }\n        });\n    }\n\n    // getRQData() {\n    //     return this.getAppData(\"rqted\");\n    // }\n\n\n    // getInitialHypoData() {\n    //     return this.getAppData(\"initialHypo\")\n    //     .then((strData))\n    // }\n\n    // getFinalHypoData() {\n    //     return this.getAppData(\"finalHypo\")\n    // }\n\n    setValues(object, overwrite=false) {\n        // default to {merge: true} option for safety\n        return this.userRef.set(object, {merge: !overwrite});       \n    }\n\n    updateValues(object) {\n        return this.userRef.update(object);\n    }\n\n    deleteValue(varName) {\n        return this.userRef.update({\n            [varName]: firebase.firestore.FieldValue.delete()\n        });\n    }\n\n    // saveJSONValue(varName, value) {\n    //     return this.userRef.set({\n    //         [varName]: JSON.stringify(value)\n    //     });\n    // }\n\n    // getBoolValue(varName) {\n\n    // }\n\n    // getIntValue(varName) {\n\n    // }   \n    \n    // getFloatValue(varName) {\n\n    // }\n\n    // getTextValue(varName) {\n\n    // }\n\n    // getJSONValue(varName) {\n\n    // }\n};","// this is the ontology, basically a copy of Kevin's ontology file\n\nexport const ontology = {\n    \"_MODULEDATA\":\"v1.0.0\",\n    \"_ONTOLOGY\": {    \n        \"S\": {\n            \"A1\":{\n                \"withinarea\":\"Within the area of Physical and Chemical Changes,\",\n                \"nochoicearea\":\"Physical and Chemical Changes\",\n                \"T1\":{\n                    \"features\":\"FTR_CRYSTAL\",\n                    \"wewillselect\":\"we will select the topic crystal growth\",\n                    \"belowarevariables\":\"Below are some variables that might affect the amount of crystal growth on a string in water.\",\n                    \"enumVar1\":\"Initial water temperature\",\n                    \"enumVar2\":\"The type of crystals\",\n                    \"enumVar3\":\"The initial amount of crystals on the string\",\n                    \"enumVar4\":\"The type of string\",\n                    \"enumUtt4\":\"And the type of string\",\n                    \"enumMat1\":\"A glass jar\",\n                    \"enumMat2\":\"A calendar\",\n                    \"enumMat3\":\"A pencil\",\n                    \"enumMat4\":\"String\",\n                    \"enumMat5\":\"Distilled water\",\n                    \"enumMat6\":\"Crystals\",\n                    \"enumMat7\":\"and a digital scale\",\n                    \"enumProcess1\":\"We will mix a crystal salt or sugar in water so it dissolves.\",\n                    \"enumProcess2\":\"We will continue to add the crystals and mix until no more crystals can be dissolved in the water. This is the saturation point.\",\n                    \"enumProcess3\":\" \",\n                    \"enumProcess4\":\"Then we will put a string in the water.\",\n                    \"enumProcess5\":\" \",                    \n                    \"enumProcess6\":\"We can measure the weight of the crystal growth after two weeks.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the amount of crystal growth on a string in water. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The initial Water Temperature\",\n                    \"enumValue1a\":\"Cool (16C)\",\n                    \"enumValue1b\":\"Hot (50C)\",\n                    \"enumValue2\":\"The Type of Crystal\",\n                    \"enumValue2a\":\"Salt\",\n                    \"enumValue2b\":\"Brown Sugar\",\n                    \"enumValue3\":\"The initial amount of crystals on the string\",\n                    \"enumValue3a\":\"Some\",\n                    \"enumValue3b\":\"None\",\n                    \"enumValue4\":\"The type of string\",\n                    \"enumValue4a\":\"Twine\",\n                    \"enumValue4b\":\"Yarn\",\n                                \n                    \"enumValueUtt1a\":\"The initial water temperature which can be cool.\",\n                    \"enumValueUtt1b\":\"Or hot, might make a difference.\",\n                    \"enumValueUtt2a\":\"The type of crystal which can be salt\",\n                    \"enumValueUtt2b\":\"Or brown sugar, might make a difference.\",\n                    \"enumValueUtt3a\":\"The initial amount of crystals on the string which can be some\",\n                    \"enumValueUtt3b\":\"Or none, might make a difference.\",\n                    \"enumValueUtt4a\":\"And the type of string which can be twine.\",\n                    \"enumValueUtt4b\":\"Or yarn. This might also make a difference.\",\n\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the initial water temperature\",\n                        \"ExpSelected\":\"initial water temperature\"\n                    },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the type of crystal\",\n                        \"ExpSelected\":\"type of crystal\"   \n                    },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the initial amount of crystals on the string\",\n                        \"ExpSelected\":\"initial amount of crystals on the string\"\n                    },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the type of string\",\n                        \"ExpSelected\":\"type of string\"\n                    },\n                    \"rqselectedall\":\"affect the weight of the crystal growth on a string in water after two weeks?\",\n                    \"rqselectedalls\":\"affects the weight of the crystal growth on a string after two weeks?\",\n\n                    \"DVg\":\"amount of crystal growth on a string in water\",\n                    \"DVst\":\"The weight of the crystal growth on the string after two weeks\",\n\t\t\t\t\t\"DVs\":\"weight of the crystal growth on the string after two weeks\",\n                    \"DVabb\":\"weight of crystal on string\",\n\n                    \"buttVarName1\":\"The initial Water Temperature\",\n                    \"buttVarName2\":\"The Type of Crystal\",\n                    \"buttVarName3\":\"The initial amount of crystals on the string\",\n                    \"buttVarName4\":\"The type of string\"\n\n                },\n                \"T2\":{\n                    \"features\":\"FTR_SODA\",\n                    \"wewillselect\":\"we will select the topic soda mint reactions\",\n                    \"belowarevariables\":\"Below are some variables that might affect the reaction between soda and mints.\",\n                    \"enumVar1\":\"The type of sweetener in the soda\",\n                    \"enumVar2\":\"The amount of caffeine in the soda\",\n                    \"enumVar3\":\"The surface texture of the mint\",\n                    \"enumVar4\":\"The amount of carbon dioxide in the soda\",\n                    \"enumUtt4\":\"And the amount of carbon dioxide in the soda\",\n                    \"enumMat1\":\"A mint\",\n                    \"enumMat2\":\"a bottle of soda\",\n                    \"enumMat3\":\"and a ruler\",\n                    \"enumProcess1\":\"We will put a single mint into a bottle of soda.\",\n                    \"enumProcess2\":\"Bubbles forming a soda geyser may come out of the bottle.\",\n                    \"enumProcess3\":\"We can measure the height of the soda geyser.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the reaction between the soda and mint. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The type of sweetener in the soda\",\n                    \"enumValue1a\":\"Sugar\",\n                    \"enumValue1b\":\"Aspartame\",\n                    \"enumValue2\":\"The amount of caffeine in the soda\",\n                    \"enumValue2a\":\"Some\",\n                    \"enumValue2b\":\"None\",\n                    \"enumValue3\":\"The surface Texture of the mint\",\n                    \"enumValue3a\":\"Smooth\",\n                    \"enumValue3b\":\"Rough\",\n                    \"enumValue4\":\"The amount of carbon dioxide in the soda\",\n                    \"enumValue4a\":\"High\",\n                    \"enumValue4b\":\"Low\",\n                    \n                    \"enumValueUtt1a\":\"The type of sweetener which can be sugar\",\n                    \"enumValueUtt1b\":\"Or aspartame, might make a difference\",\n                    \"enumValueUtt2a\":\"The amount of caffeine in the soda which can be some\",\n                    \"enumValueUtt2b\":\"Or none, might make a difference\",\n                    \"enumValueUtt3a\":\"The surface texture of the mint, which can be smooth\",\n                    \"enumValueUtt3b\":\"Or rough, might make a difference\",\n                    \"enumValueUtt4a\":\"And the amount of carbon dioxide in the soda which can be high\",\n                    \"enumValueUtt4b\":\"Or low. This might also make a difference\",\n\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the type of sweetener in the soda\",\n                        \"ExpSelected\":\"type of sweetener in the soda\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the amount of caffeine in the soda\",\n                        \"ExpSelected\":\"amount of caffeine in the soda\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the surface texture of the mint\",\n                        \"ExpSelected\":\"surface texture of the mint\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the amount of carbon dioxide in the soda\",\n                        \"ExpSelected\":\"amount of carbon dioxide in the soda\",\n                        \"ExpSelected2\":\"The amount of carbon dioxide in the soda\"\n                        },\n\n                    \"rqselectedall\":\"affect the strength of the reaction between soda and mints?\",\n                    \"rqselectedalls\":\"affects the height of the soda geyser?\",\n\n                    \"DVg\":\"Strength of the reaction between soda and mints\",\n                    \"DVst\":\"The height of the soda geyser\",\n\t\t\t\t\t\"DVs\":\"height of the soda geyser\",\n                    \"DVabb\":\"geyser height\",\n\n                    \"buttVarName1\":\"The type of sweetener in the soda\",\n                    \"buttVarName2\":\"The amount of caffeine in the soda\",\n                    \"buttVarName3\":\"The surface Texture of the mint\",\n                    \"buttVarName4\":\"The amount of carbon dioxide in the soda\"        \n                }        \n            },\n            \"A2\": {\n                \"withinarea\":\"Within the area of Heat and Temperature,\",\n                \"nochoicearea\":\"Heat and Temperature\",\n                \"T1\":{\n                    \"features\":\"FTR_ICEMELT\",\n                    \"wewillselect\":\"we will select the topic ice melting time\",\n                    \"belowarevariables\":\"Below are some variables that might affect the time it takes for an ice cube to melt in water.\",\n                    \"enumVar1\":\"The initial temperature of the ice cube\",\n                    \"enumVar2\":\"The initial temperature of the water\",\n                    \"enumVar3\":\"The pattern on the glass\",\n                    \"enumVar4\":\"The shape of the glass\",\n                    \"enumUtt4\":\"And the shape of the glass\",\n                    \"enumMat1\":\"A thermometer\",\n                    \"enumMat2\":\"Glass cups\",\n                    \"enumMat3\":\"Ice cubes and ice bucket\",\n                    \"enumMat4\":\"Water\",\n                    \"enumMat5\":\"And a digital clock\",\n                    \"enumProcess1\":\"We will place an ice cube in a glass filled with 237 milliliters of water.\",\n                    \"enumProcess2\":\"The ice cube will eventually completely melt.\",\n                    \"enumProcess3\":\"We can measure the time it takes for the ice cube to melt in water.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the time it takes for the ice cube to melt in water. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The initial temperature of the ice cube\",\n                    \"enumValue1a\":\"0C\",\n                    \"enumValue1b\":\"-20C\",\n                    \"enumValue2\":\"The initial temperature of the water\",\n                    \"enumValue2a\":\"Cold\",\n                    \"enumValue2b\":\"Hot\",\n                    \"enumValue3\":\"The pattern on the glass\",\n                    \"enumValue3a\":\"Striped\",\n                    \"enumValue3b\":\"Plain\",\n                    \"enumValue4\":\"The shape of the glass\",\n                    \"enumValue4a\":\"Short\",\n                    \"enumValue4b\":\"Tall\",\n                    \n                    \"enumValueUtt1a\":\"the initial temperature of the ice cube which can be zero degrees Celsius\",\n                    \"enumValueUtt1b\":\"Or negative twenty degrees Celsius, might make a difference\",\n                    \"enumValueUtt2a\":\"The initial temperature of the water which can be cold\",\n                    \"enumValueUtt2b\":\"Or hot, might make a difference\",\n                    \"enumValueUtt3a\":\"The pattern on the glass which can be striped\",\n                    \"enumValueUtt3b\":\"Or plain, might make a difference\",\n                    \"enumValueUtt4a\":\"And the shape of the glass which can be short or\",\n                    \"enumValueUtt4b\":\"Tall. This might also make a difference\",\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the initial temperature of the ice cube\",\n                        \"ExpSelected\":\"initial temperature of the ice cube\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the initial temperature of the water\",\n                        \"ExpSelected\":\"initial temperature of the water\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the pattern on the glass\",\n                        \"ExpSelected\":\"pattern on the glass\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the shape of the glass\",\n                        \"ExpSelected\":\"shape of the glass\"\n                        },\n                        \"rqselectedall\":\"affect the time it takes for an ice cube to melt in water?\",\n                        \"rqselectedalls\":\"affects the time it takes for the ice cube to melt in water?\",\n\n                        \"DVg\":\"Time it takes for an ice cube to melt in water\",\n                        \"DVst\":\"The time it takes for the ice cube to melt in water\",\n\t\t\t\t\t    \"DVs\":\"time it takes for the ice cube to melt in water\",\n                        \"DVabb\":\"time to melt\",\n    \n                        \"buttVarName1\":\"The initial temperature of the ice cube\",\n                        \"buttVarName2\":\"The initial temperature of the water\",\n                        \"buttVarName3\":\"The pattern on the glass\",\n                        \"buttVarName4\":\"The shape of the glass\"\n                },\n                \"T2\":{\n                    \"features\":\"FTR_BALLOON\",\n                    \"wewillselect\":\"we will select the topic temperature of a gas\",\n                    \"belowarevariables\":\"Below are some variables that might affect the temperature of gas in a balloon.\",\n                    \"enumVar1\":\"The color of the balloon\",\n                    \"enumVar2\":\"The amount of sunlight exposure the balloon gets\",\n                    \"enumVar3\":\"The material the balloon is made of\",\n                    \"enumVar4\":\"The type of chair the balloon is tied to\",\n                    \"enumUtt4\":\"And the type of chair the balloon is tied to\",\n                    \"enumMat1\":\"A balloon\",\n                    \"enumMat2\":\"A wireless temperature reader and sensor\",\n                    \"enumMat3\":\"A chair\",\n                    \"enumMat4\":\"A stopwatch\",\n                    \"enumMat5\":\"A helium tank\",\n                    \"enumMat6\":\"And an umbrella\",\n                    \"enumProcess1\":\"We will pump 5 grams of Helium at 15 degrees Celsius into a balloon.\",\n                    \"enumProcess2\":\" \",\n                    \"enumProcess3\":\"Then we will place the balloon outside for 30 minutes.\",\n                    \"enumProcess4\":\"The temperature of the outside air is 27 degrees Celsius.\",\n                    \"enumProcess5\":\"We can measure the temperature of the gas after 30 minutes.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the temperature of gas in the balloon. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The color of the balloon\",\n                    \"enumValue1a\":\"Light\",\n                    \"enumValue1b\":\"Dark\",\n                    \"enumValue2\":\"The amount of sunlight exposure the balloon gets\",\n                    \"enumValue2a\":\"Full Sun\",\n                    \"enumValue2b\":\"Shade\",\n                    \"enumValue3\":\"The material the balloon is made of\",\n                    \"enumValue3a\":\"Latex\",\n                    \"enumValue3b\":\"Foil\",\n                    \"enumValue4\":\"The type of chair the balloon is tied to\",\n                    \"enumValue4a\":\"Wooden\",\n                    \"enumValue4b\":\"Canvas\",\n                    \n                    \"enumValueUtt1a\":\"The color of the balloon, which can be light\",\n                    \"enumValueUtt1b\":\"Or dark, might make a difference\",\n                    \"enumValueUtt2a\":\"The amount of sunlight exposure the balloon gets, which can be full sun\",\n                    \"enumValueUtt2b\":\"Or shade, might make a difference\",\n                    \"enumValueUtt3a\":\"The material the balloon is made of which can be latex\",\n                    \"enumValueUtt3b\":\"Or foil, might make a difference\",\n                    \"enumValueUtt4a\":\"And the type of chair the balloon is tied to, which can be a wooden chair\",\n                    \"enumValueUtt4b\":\"Or a canvas chair. This might also make a difference\",\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the color of the balloon\",\n                        \"ExpSelected\":\"color of the balloon\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the amount of sunlight exposure the balloon gets\",\n                        \"ExpSelected\":\"amount of sunlight exposure the balloon gets\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the material the balloon is made of\",\n                        \"ExpSelected\":\"material the balloon is made of\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the type of chair the balloon is tied to\",\n                        \"ExpSelected\":\"type of chair the balloon is tied to\"\n                        },\n\n                    \"rqselectedall\":\"affect the gas temperature within the balloon after 30 minutes?\",\n                    \"rqselectedalls\":\"affects the gas temperature within balloon after 30 minutes?\",\n\n                    \"DVg\":\"Temperature of gas in a balloon\",\n                    \"DVst\":\"The gas temperature within balloon after 30 minutes\",\n                    \"DVs\":\"gas temperature within balloon after 30 minutes\",\n                    \"DVabb\":\"Gas temperature\",\n\n                    \"buttVarName1\":\"The color of the balloon\",\n                    \"buttVarName2\":\"The amount of sunlight exposure the balloon gets\",\n                    \"buttVarName3\":\"The material the balloon is made of\",\n                    \"buttVarName4\":\"The type of chair the balloon is tied to\"\n                }\n            },\n            \"A3\":{\n                \"withinarea\":\"Within the area of Forces and Motion,\",\n                \"nochoicearea\":\"Forces and Motion\",\n                \"T1\":{\n                    \"features\":\"FTR_RAMPS\",\n                    \"wewillselect\":\"we will select the topic the speed of balls at the bottom of ramps\",\n                    \"belowarevariables\":\"Below are some variables that might affect the speed of balls at the bottom of ramps.\",\n                    \"enumVar1\":\"The Slope of the Ramp\",\n                    \"enumVar2\":\"The Color of the Ball\",\n                    \"enumVar3\":\"The Starting Position of the Ball\",\n                    \"enumVar4\":\"The Surface Texture of the Ramp\",\n                    \"enumUtt4\":\"And the Surface Texture of the Ramp\",\n                    \"enumMat1\":\"A speedometer\",\n                    \"enumMat2\":\"A ramp\",\n                    \"enumMat3\":\"And a ball\",\n                    \"enumProcess1\":\"We will place a ball on the ramp.\",\n                    \"enumProcess2\":\"The ball will roll down the ramp.\",\n                    \"enumProcess3\":\"We will measure the balls speed at the bottom of the ramp.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the speed of the ball at the bottom of the ramp. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The Slope of the Ramp\",\n                    \"enumValue1a\":\"Not Steep\",\n                    \"enumValue1b\":\"Steep\",\n                    \"enumValue2\":\"The Color of the Ball\",\n                    \"enumValue2a\":\"Yellow\",\n                    \"enumValue2b\":\"Pink\",\n                    \"enumValue3\":\"The Starting Position of the Ball\",\n                    \"enumValue3a\":\"Middle\",\n                    \"enumValue3b\":\"Top\",\n                    \"enumValue4\":\"The Surface Texture of the Ramp\",\n                    \"enumValue4a\":\"Rough\",\n                    \"enumValue4b\":\"Smooth\",\n                    \n                    \"enumValueUtt1a\":\"The slope of the ramp, which can be not steep\",\n                    \"enumValueUtt1b\":\"Or steep, might make a difference\",\n                    \"enumValueUtt2a\":\"The color of the ball which can be yellow\",\n                    \"enumValueUtt2b\":\"Or pink, might make a difference\",\n                    \"enumValueUtt3a\":\"The starting position of the ball, which can be in the middle\",\n                    \"enumValueUtt3b\":\"Or at the top, might make a difference\",\n                    \"enumValueUtt4a\":\"And the surface texture of the ramp, which can be rough\",\n                    \"enumValueUtt4b\":\"Or smooth.  This might also make a difference\",\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the slope of the ramp\",\n                        \"ExpSelected\":\"slope of the ramp\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the color of the ball\",\n                        \"ExpSelected\":\"color of the ball\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the starting position of the ball\",\n                        \"ExpSelected\":\"starting position of the ball\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the surface texture of the ramp\",\n                        \"ExpSelected\":\"surface texture of the ramp\"\n                        },\n                        \"rqselectedall\":\"affect the speed of the ball at the bottom of the ramp?\",\n                        \"rqselectedalls\":\"affects the speed of the ball at the bottom of the ramp?\",\n\n                        \"DVg\":\"Speed of the ball at the bottom of the ramp\",\n                        \"DVst\":\"The speed of the ball at the bottom of the ramp\",\n\t\t\t\t\t    \"DVs\":\"speed of the ball at the bottom of the ramp\",\n                        \"DVabb\":\"Speed of the ball at the bottom of the ramp\",\n\n                        \"buttVarName1\":\"The Slope of the Ramp\",\n                        \"buttVarName2\":\"The Color of the Ball\",\n                        \"buttVarName3\":\"The Starting Position of the Ball\",\n                        \"buttVarName4\":\"The Surface Texture of the Ramp\"\n                },\n                \"T2\":{\n                    \"features\":\"FTR_SINKING\",\n                    \"wewillselect\":\"we will select the topic the time for objects to sink\",\n                    \"belowarevariables\":\"Below are some variables that might affect the time it takes for objects to sink in water.\",\n                    \"enumVar1\":\"Density of the Water\",\n                    \"enumVar2\":\"Shape of the Object\",\n                    \"enumVar3\":\"Volume of the Object\",\n                    \"enumVar4\":\"Density of the Object\",\n                    \"enumUtt4\":\"And the density of the Object\",\n                    \"enumMat1\":\"A stopwatch\",\n                    \"enumMat2\":\"A lead or glass object\",\n                    \"enumMat3\":\"A graduated cylinder\",\n                    \"enumMat4\":\"And water\",\n                    \"enumProcess1\":\"We will place an object into a graduated cylinder filled with water.\",\n                    \"enumProcess2\":\" \",\n                    \"enumProcess3\":\"It will sink to the bottom.\",\n                    \"enumProcess4\":\" \",\n                    \"enumProcess5\":\"We can measure the time it takes for the object to sink in water.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the time it takes for objects to sink in water. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The Density of the Water\",\n                    \"enumValue1a\":\"Low\",\n                    \"enumValue1b\":\"High\",\n                    \"enumValue2\":\"The Shape of the Object\",\n                    \"enumValue2a\":\"Sphere\",\n                    \"enumValue2b\":\"Tear-Shaped\",\n                    \"enumValue3\":\"The Volume of the Object\",\n                    \"enumValue3a\":\"Small\",\n                    \"enumValue3b\":\"Large\",\n                    \"enumValue4\":\"The Density of the Object\",\n                    \"enumValue4a\":\"High\",\n                    \"enumValue4b\":\"Low\",\n                    \n                    \"enumValueUtt1a\":\"The density of the water, which can be low\",\n                    \"enumValueUtt1b\":\"Or high, might make a difference\",\n                    \"enumValueUtt2a\":\"The shape of the object which can be a sphere\",\n                    \"enumValueUtt2b\":\"Or tier-shaped, might make a difference\",\n                    \"enumValueUtt3a\":\"The volume of the object which can be small\",\n                    \"enumValueUtt3b\":\"Or large, might make a difference\",\n                    \"enumValueUtt4a\":\"And the density of the object which can be high\",\n                    \"enumValueUtt4b\":\"Or low.  This might also make a difference\",\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the density of water\",\n                        \"ExpSelected\":\"density of water\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the shape of the object\",\n                        \"ExpSelected\":\"shape of the object\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the volume of the object\",\n                        \"ExpSelected\":\"volume of the object\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the density of the object\",\n                        \"ExpSelected\":\"density of the object\"\n                        },\n                        \"rqselectedall\":\"affect the time it takes for objects to sink in water?\",\n                        \"rqselectedalls\":\"affects the time it takes for objects to sink in water?\",\n\n                        \"DVg\":\"Time it takes for objects to sink in water\",\n                        \"DVst\":\"The time it takes for objects to sink in water\",\n\t\t\t\t\t    \"DVs\":\"time it takes for objects to sink in water\",\n                        \"DVabb\":\"time to sink\",\n\n                        \"buttVarName1\":\"The Density of the Water\",\n                        \"buttVarName2\":\"The Shape of the Object\",\n                        \"buttVarName3\":\"The Volume of the Object\",\n                        \"buttVarName4\":\"The Density of the Object\"\n                }\n            },\n            \"A4\":{\n                \"withinarea\":\"Within the area of Plant Reproduction,\",\n                \"nochoicearea\":\"Plant Reproduction\",\n                \"T1\":{\n                    \"features\":\"FTR_GRHOUSE\",\n                    \"wewillselect\":\"we will select the topic Flower Reproduction\",\n                    \"belowarevariables\":\"Below are some variables that might affect the number of seeds produced by flowers in a greenhouse.\",\n                    \"enumVar1\":\"The Number of honey bees in the greenhouse\",\n                    \"enumVar2\":\"The Amount of sunlight the greenhouse lets in\",\n                    \"enumVar3\":\"The Amount of Fertilizer\",\n                    \"enumVar4\":\"The Type of Water\",\n                    \"enumUtt4\":\"And the Type of Water\",\n                    \"enumMat1\":\"A greenhouse\",\n                    \"enumMat2\":\"Twelve sunflower plants\",\n                    \"enumMat3\":\"A beehive with bees\",\n                    \"enumMat4\":\"Fertilizer\",\n                    \"enumMat5\":\"And water\",\n                    \"enumProcess1\":\"We will plant twelve sunflowers in the ground in a greenhouse at the beginning of Spring.\",\n                    \"enumProcess2\":\" \",\n                    \"enumProcess3\":\"The flowers will produce seeds then die by the end of the season.\",\n                    \"enumProcess4\":\"We can measure the number of seeds produced by the flowers at the end of the season. \",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the number of seeds produced by the flowers at the end of the season. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The Number of honey bees in the greenhouse\",\n                    \"enumValue1a\":\"Zero\",\n                    \"enumValue1b\":\"Whole Hive\",\n                    \"enumValue2\":\"The Amount of sunlight the greenhouse lets in\",\n                    \"enumValue2a\":\"Full Sunlight\",\n                    \"enumValue2b\":\"Partial Sunlight\",\n                    \"enumValue3\":\"The Amount of Fertilizer\",\n                    \"enumValue3a\":\"None\",\n                    \"enumValue3b\":\"Some\",\n                    \"enumValue4\":\"The Type of Water\",\n                    \"enumValue4a\":\"Rain Water\",\n                    \"enumValue4b\":\"Tap Water\",\n                    \n                    \"enumValueUtt1a\":\"The number of honey bees in the greenhouse, which can be zero\",\n                    \"enumValueUtt1b\":\"Or a whole hive, might make a difference\",\n                    \"enumValueUtt2a\":\"The amount of sunlight the greenhouse lets in, which can be full sunlight\",\n                    \"enumValueUtt2b\":\"Or partial sunlight, might make a difference\",\n                    \"enumValueUtt3a\":\"The amount of fertilizer, which can be none\",\n                    \"enumValueUtt3b\":\"Or some, might make a difference\",\n                    \"enumValueUtt4a\":\"And the type of water, which can be rain water\",\n                    \"enumValueUtt4b\":\"Or tap water.   This might also make a difference\",\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the number of honey bees in the greenhouse\",\n                        \"ExpSelected\":\"number of honey bees in the greenhouse\",\n                        \"ExpSelected2\":\"The number of honey bees in the greenhouse\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the amount of sunlight the greenhouse lets in\",\n                        \"ExpSelected\":\"amount of sunlight the greenhouse lets in\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the amount of fertilizer\",\n                        \"ExpSelected\":\"amount of fertilizer\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the type of water\",\n                        \"ExpSelected\":\"type of water\"\n                        },\n\n                    \"rqselectedall\":\"affect the number of seeds produced by flowers at the end of the season?\",\n                    \"rqselectedalls\":\"affects the number of seeds produced by flowers at the end of the season?\",\n\n                    \"DVg\":\"Number of seeds produced by flowers in a greenhouse\",\n                    \"DVst\":\"The number of seeds produced by the flowers at the end of the season\",\n                    \"DVs\":\"number of seeds produced by the flowers at the end of the season\",\n                    \"DVabb\":\"number of seeds\",\n\n                    \"buttVarName1\":\"The Number of honey bees in the greenhouse\",\n                    \"buttVarName2\":\"The Amount of sunlight the greenhouse lets in\",\n                    \"buttVarName3\":\"The Amount of Fertilizer\",\n                    \"buttVarName4\":\"The Type of Water\"\n                },\n                \"T2\":{\n                    \"features\":\"FTR_ALGAE\",\n                    \"wewillselect\":\"we will select the topic Algae Reproduction\",\n                    \"belowarevariables\":\"Below are some variables that might affect the amount of algae produced in water.\",\n                    \"enumVar1\":\"The Temperature of the Water\",\n                    \"enumVar2\":\"The Amount of Exposure to Music\",\n                    \"enumVar3\":\"The Amount of Carbon Dioxide in the Water\",\n                    \"enumVar4\":\"The Amount of Direct Sunlight Exposure\",\n                    \"enumUtt4\":\"And the Amount of Direct Sunlight Exposure\",\n                    \"enumMat1\":\"A radio\",\n                    \"enumMat2\":\"A calendar\",\n                    \"enumMat3\":\"A digital scale\",\n                    \"enumMat4\":\"A fish tank heater\",\n                    \"enumMat5\":\"Fifty grams of algae\",\n                    \"enumMat6\":\"A fish tank filled with 16 liters of water\",\n                    \"enumMat7\":\"A thermometer\",\n                    \"enumMat8\":\"And a carbon dioxide machine\",\n                    \"enumProcess1\":\"We will add fifty grams of algae to a fish tank filled with 16 liters of distilled water.\",\n                    \"enumProcess2\":\" \",\n                    \"enumProcess3\":\"We can measure the weight of the algae production after one week.\",\n                    \"fourcanchange\":\"In this experiment, there are only four things we can change. Any of these might make a difference in the weight of the algae after one week. These are the four variables you can test in this experiment\",\n\n                    \"enumValue1\":\"The Temperature of the Water\",\n                    \"enumValue1a\":\"Room Temperature\",\n                    \"enumValue1b\":\"Warm\",\n                    \"enumValue2\":\"The Amount of Exposure to Music\",\n                    \"enumValue2a\":\"Constant Music\",\n                    \"enumValue2b\":\"No Music\",\n                    \"enumValue3\":\"The Amount of Carbon Dioxide in the Water\",\n                    \"enumValue3a\":\"A Lot\",\n                    \"enumValue3b\":\"None\",\n                    \"enumValue4\":\"The Amount of Direct Sunlight Exposure\",\n                    \"enumValue4a\":\"Some\",\n                    \"enumValue4b\":\"None\",\n                    \n                    \"enumValueUtt1a\":\"The temperature of the water, which can be room temperature\",\n                    \"enumValueUtt1b\":\"Or a warm, might make a difference\",\n                    \"enumValueUtt2a\":\"The amount of exposure to music which can be constant music\",\n                    \"enumValueUtt2b\":\"Or no music, might make a difference\",\n                    \"enumValueUtt3a\":\"The amount of carbon dioxide, which can be a lot\",\n                    \"enumValueUtt3b\":\"Or none, might make a difference\",\n                    \"enumValueUtt4a\":\"And the amount of direct sunlight exposure, which can be some\",\n                    \"enumValueUtt4b\":\"Or none. This might also make a difference\",\n\n                    \"RQ1\":{\n                        \"rqselected\":\"Does the temperature of the water\",\n                        \"ExpSelected\":\"temperature of the water\"\n                        },\n                    \"RQ2\":{\n                        \"rqselected\":\"Does the exposure to music\",\n                        \"ExpSelected\":\"exposure to music\"\n                        },\n                    \"RQ3\":{\n                        \"rqselected\":\"Does the amount of carbon dioxide in the water\",\n                        \"ExpSelected\":\"amount of carbon dioxide in the water\"\n                        },\n                    \"RQ4\":{\n                        \"rqselected\":\"Does the amount of direct sunlight exposure\",\n                        \"ExpSelected\":\"amount of direct sunlight exposure\"\n                        },\n\n                    \"rqselectedall\":\"affect the weight of the algae produced after one week?\",\n                    \"rqselectedalls\":\"affects the weight of the algae produced after one week?\",\n\n                    \"DVg\":\"Amount of algae produced in water\",\n                    \"DVst\":\"The weight of the algae produced after one week\",\n                    \"DVs\":\"weight of the algae produced after one week\",\n                    \"DVabb\":\"algae weight\",\n\n                    \"buttVarName1\":\"The Temperature of the Water\",\n                    \"buttVarName2\":\"The Amount of Exposure to Music\", \n                    \"buttVarName3\":\"The Amount of Carbon Dioxide in the Water\",\n                    \"buttVarName4\":\"The Amount of Direct Sunlight Exposure\"\n                }\n            }\n        },\n        \"EG\": {\n            \"BOTH\": {\n                \"S5aT1a\":\"Here are all of the materials that may be necessary for this experiment\",\n                \"track1\":\"In this lesson, we will ask you to set up and evaluate experiments.\",\n                \"track8\":\"You will set up (but not run) an experiment on the computer to answer the research question that you have selected.\",\n                \"track9\":\"Let's begin by focusing on one area of science\",\n\n                \"S10B1\":\"I'd like to test a different variable for my research question.\",\n                \"S10B2\":\"I'd like to pick a different area or topic.\",\n                \"S10B3\":\"I'd like to pick a whole different area.\",\n                \"S10B4\":\"I like this question.\"\n            },\n            \"A1\": {\n                \"type\": \"choice\",                \n                \"pronoun\": \"you\",\n                \"selecttopic\":\"please select a topic by clicking on a picture below.\",\n                \"selecttv\":\"Select the variable you would like to test. This variable is the independent variable of your experiment.\",\n                \"rqselected\":\"The research question you have chosen is\",\n                \"rqselectedText\":\"Your research question is:\",\n                \"okselected\":\"OK! You have chosen as your Research Question\",\n                \"okselectedText\":\"OK! You have chosen as your Research Question:\",\n                \"cantest\":\"You can test one of these variables in your experiment.\",\n                \"track2\":\"But first you will select a general area for the experiment.\",\n                \"track3\":\"For example, you might select the general area of psychology.\",\n                \"track4\":\"After you select the general area, you will then select a specific topic within that area.\",\n                \"track5\":\"For example, within the general area of psychology, you might select the topic attention to color.\",\n                \"track6\":\"Within that topic, you will select a research question.\",\n                \"track7\":\"For example, within the topic of attention to color, you might select a research question such as does the color of the t-shirt a person is wearing affect attention?\",\n                \"track10\":\"Please tap on the area you wish to use for your experiment design.\",\n                \"rqselectedall\":\"\"\n            },\n            \"A2\": {\n                \"type\": \"no choice\",\n                \"pronoun\": \"we\",\n                \"selecttopic\":\"Please click the highlighted picture below.\",\n                \"selecttv\":\"We will test the following variable:\",\n                \"selecttv2\":\", This variable is the independent variable of the experiment. Please click on the highlighted button below\",\n                \"rqselected\":\"Our research question is\",\n                \"rqselectedText\":\"Our research question is:\",\n                \"okselected\":\"OK! We have chosen the Research Question below. Write this down in your notebook!\",\n                \"okselectedText\":\"OK! We have chosen the Research Question below. Write this down in your notebook!\",\n                \"cantest\":\"We can test one of these variables in the experiment.\",\n                \"track2\":\"But first we will select a general area for the experiment.\",\n                \"track3\":\"For example, we might select the general area of psychology.\",\n                \"track4\":\"After we select the general area, we will then select a specific topic within that area.\",\n                \"track5\":\"For example, within the general area of psychology, we might select the topic attention to color.\",\n                \"track6\":\"Within that topic, we will select a research question.\",\n                \"track7\":\"For example, within the topic of attention to color, we might select a research question such as does the color of the t-shirt a person is wearing affect attention?\",\n                \"track10\" :\"we will select the topic\",\n                \"track10b\":\"Please click the highlighted picture below.\",\n                \"rqselectedall\":\"\"\n            },\n            \"A3\": {\n                \"introtitle\": \"<p>In this lesson, we will ask you to set up and evaluate experiments.</p><p>Here is the procedure for one practice trial for this experiment.</p>\",\n                \"okselected\":\"OK! First, design an experiment to answer this research question: \",\n                \"okselectedText\":\"OK! First, design an experiment to answer this research question: \",\n                \"cantest\":\"We can test one of these variables in the experiment.\"\n            }\n        }\n    }\n};\n\n","// this is the hypoOntology.\n// IV, DV, and DVabb (abbreviated DV) are optional overrides. Leave it as an empty string if not needed.\n// Nodes and Causes are required.\n// IV and DV appear in the prediction question, while the IV and DVabb appears in the bubble.\n\nexport const hypoOntology = {\n    \"A1\": {\n        \"T1\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of water molecules\", \"Evaporation rate of water\", \"Amount of water in jar\", \"Concentration of Na+ and Cl- in water\", \"Amount of water string absorbs\", \"Kinetic energy of Na+ and Cl- atoms\", \"Chance of Na+ and Cl- bonding\", \"Amount of Na+ & Cl- left behind on string\"],\n                \"CAUSES\": [\"Electric force\", \"Conservation of matter\", \"Energy to escape electric forces\", \"motion transfer from collisions\", \"Force of gravity\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of water molecules\", \"Evaporation rate of water\", \"Amount of water in jar\", \"Concentration of Na+ and Cl- in water\", \"Amount of water string absorbs\", \"Kinetic energy of Na+ and Cl- atoms\", \"Chance of Na+ and Cl- bonding\", \"Amount of NA+ & Cl- left behind on string\"],\n                \"CAUSES\": [\"Electric force\", \"Conservation of matter\", \"Energy to escape electric forces\", \"motion transfer from collisions\", \"Force of gravity\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of water molecules\", \"Evaporation rate of water\", \"Amount of water in jar\", \"Concentration of Na+ and Cl- in water\", \"Amount of water string absorbs\", \"Kinetic energy of Na+ and Cl- atoms\", \"Chance of Na+ and Cl- bonding\", \"Amount of NA+ & Cl- left behind on string\"],\n                \"CAUSES\": [\"Electric force\", \"Conservation of matter\", \"Energy to escape electric forces\", \"motion transfer from collisions\", \"Force of gravity\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of water molecules\", \"Evaporation rate of water\", \"Amount of water in jar\", \"Concentration of Na+ and Cl- in water\", \"Amount of water string absorbs\", \"Kinetic energy of Na+ and Cl- atoms\", \"Chance of Na+ and Cl- bonding\", \"Amount of NA+ & Cl- left behind on tstring\"],\n                \"CAUSES\": [\"Electric force\", \"Conservation of matter\", \"Energy to escape electric forces\", \"motion transfer from collisions\", \"Force of gravity\"]\n            }\n        },\n        \"T2\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Nucleation Sites on Mint\", \"Amount of CO2 bubbles on mint\",\"amount of CO2 escaping from soda\",\"kinetic energy CO2 bubbles\"],\n                \"CAUSES\": [\"unknown cause\", \"due to more mass\", \"buoyancy force\", \"conservation energy\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Nucleation Sites on Mint\", \"Amount of CO2 bubbles on mint\",\"amount of CO2 escaping from soda\",\"kinetic energy CO2 bubbles\"],\n                \"CAUSES\": [\"unknown cause\", \"due to more mass\", \"buoyancy force\", \"conservation energy\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Nucleation Sites on Mint\", \"Amount of CO2 bubbles on mint\",\"amount of CO2 escaping from soda\",\"kinetic energy CO2 bubbles\"],\n                \"CAUSES\": [\"unknown cause\", \"due to more mass\", \"buoyancy force\", \"conservation energy\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Nucleation Sites on Mint\", \"Amount of CO2 bubbles on mint\",\"amount of CO2 escaping from soda\",\"kinetic energy CO2 bubbles\"],\n                \"CAUSES\": [\"unknown cause\", \"due to more mass\", \"buoyancy force\", \"conservation energy\"]\n            }\n        }\n    },\n    \"A2\": {\n        \"T1\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of H2O molecules in ice\",\"Motion of H2O molecules\",\"Likelihood of H2O molecules breaking bonds\", \"Amount of melting\", \"Time for (initial) ice & water to reach same temp\"],\n                \"CAUSES\": [\"conservation of matter\", \"speed changes during collisions\",\"energy to escape electric forces\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of H2O molecules in ice\",\"Motion of H2O molecules\",\"Likelihood of H2O molecules breaking bonds\", \"Amount of melting\", \"Time for (initial) ice & water to reach same temp\"],\n                \"CAUSES\": [\"conservation of matter\", \"speed changes during collisions\",\"energy to escape electric forces\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of H2O molecules in ice\",\"Motion of H2O molecules\",\"Likelihood of H2O molecules breaking bonds\", \"Amount of melting\", \"Time for (initial) ice & water to reach same temp\"],\n                \"CAUSES\": [\"conservation of matter\", \"speed changes during collisions\",\"energy to escape electric forces\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Kinetic energy of H2O molecules in ice\",\"Motion of H2O molecules\",\"Likelihood of H2O molecules breaking bonds\", \"Amount of melting\", \"Time for (initial) ice & water to reach same temp\"],\n                \"CAUSES\": [\"conservation of matter\", \"speed changes during collisions\",\"energy to escape electric forces\"]\n            }\n        },\n        \"T2\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of sunlight balloon absorbs\", \"Amount of sunlight converted to thermal energy\", \"Temperature of balloon material\", \"Amt thermal energy from balloon to gas\"],\n                \"CAUSES\": [\"thermal energy transfer\", \"conservation of energy\", \"electric forces\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of sunlight balloon absorbs\", \"Amount of sunlight converted to thermal energy\", \"Temperature of balloon material\", \"Amt thermal energy from balloon to gas\"],\n                \"CAUSES\": [\"thermal energy transfer\", \"conservation of energy\", \"electric forces\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of sunlight balloon absorbs\", \"Amount of sunlight converted to thermal energy\", \"Temperature of balloon material\", \"Amt thermal energy from balloon to gas\"],\n                \"CAUSES\": [\"thermal energy transfer\", \"conservation of energy\", \"electric forces\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of sunlight balloon absorbs\", \"Amount of sunlight converted to thermal energy\", \"Temperature of balloon material\", \"Amt thermal energy from balloon to gas\"],\n                \"CAUSES\": [\"thermal energy transfer\", \"conservation of energy\", \"electric forces\"]\n            }\n        }\n    },\n    \"A3\": {\n        \"T1\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Time gravitational force acts on ball\", \"Time ball accelerates down ramp\", \"Amount friction between ramp and ball\", \"Kinetic energy of ball\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"More force in direction of motion\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Time gravitational force acts on ball\", \"Time ball accelerates down ramp\", \"Amount friction between ramp and ball\", \"Kinetic energy of ball\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"More force in direction of motion\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Time gravitational force acts on ball\", \"Time ball accelerates down ramp\", \"Amount friction between ramp and ball\", \"Kinetic energy of ball\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"More force in direction of motion\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Time gravitational force acts on ball\", \"Time ball accelerates down ramp\", \"Amount friction between ramp and ball\", \"Kinetic energy of ball\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"More force in direction of motion\"]\n            }\n        },\n        \"T2\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Acceleration of object (downward)\", \"Speed of object (downward)\", \"Force of gravity pulling down on object\", \"Buoyancy force pushing up on object\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"masses object and Earth\", \"water molecules hitting object\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Acceleration of object (downward)\", \"Speed of object (downward)\", \"Force of gravity pulling down on object\", \"Buoyancy force pushing up on object\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"masses object and Earth\", \"water molecules hitting object\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Acceleration of object (downward)\", \"Speed of object (downward)\", \"Force of gravity pulling down on object\", \"Buoyancy force pushing up on object\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"masses object and Earth\", \"water molecules hitting object\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Acceleration of object (downward)\", \"Speed of object (downward)\", \"Force of gravity pulling down on object\", \"Buoyancy force pushing up on object\"],\n                \"CAUSES\": [\"Newton's Second Law\", \"Newton's Third Law\", \"masses object and Earth\", \"water molecules hitting object\"]\n            }\n        }\n    },\n    \"A4\": {\n        \"T1\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Temperature of Flowers\", \"How sweet flowers smell\", \"Number of Bees attracted to flower\", \"Chance of Pollination\", \"Amount of nectar in flowers\"],\n                \"CAUSES\": [\"transfer of energy\", \"pollen transferred to stigma\", \"pollen fertilizing egg cell\", \"pollen sticks to bee\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Temperature of Flowers\", \"How sweet flowers smell\", \"Number of Bees attracted to flower\", \"Chance of Pollination\", \"Amount of nectar in flowers\"],\n                \"CAUSES\": [\"transfer of energy\", \"pollen transferred to stigma\", \"pollen fertilizing egg cell\", \"pollen sticks to bee\"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Temperature of Flowers\", \"How sweet flowers smell\", \"Number of Bees attracted to flower\", \"Chance of Pollination\", \"Amount of nectar in flowers\"],\n                \"CAUSES\": [\"transfer of energy\", \"pollen transferred to stigma\", \"pollen fertilizing egg cell\", \"pollen sticks to bee\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Temperature of Flowers\", \"How sweet flowers smell\", \"Number of Bees attracted to flower\", \"Chance of Pollination\", \"Amount of nectar in flowers\"],\n                \"CAUSES\": [\"transfer of energy\", \"pollen transferred to stigma\", \"pollen fertilizing egg cell\", \"pollen sticks to bee\"]\n            }\n        },\n        \"T2\": {\n            \"V1\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of glucose produced\", \"Amount of ATP produced\", \"Number of new cells grown\", \"Amount of light absorbed by chlorophyll\"],\n                \"CAUSES\": [\"photosynthesis\", \"chemical reaction\", \"physical reaction\", \"kinetic energy\"]\n            },\n            \"V2\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of glucose produced\", \"Amount of ATP produced\", \"Number of new cells grown\", \"Amount of light absorbed by chlorophyll\"],\n                \"CAUSES\": [\"photosynthesis\", \"chemical reaction\", \"physical reaction\", \"kinetic energy \"]\n            },\n            \"V3\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of glucose produced\", \"Amount of ATP produced\", \"Number of new cells grown\", \"Amount of light absorbed by chlorophyll\"],\n                \"CAUSES\": [\"photosynthesis\", \"chemical reaction\", \"physical reaction\", \"kinetic energy\"]\n            },\n            \"V4\": {\n                \"IV\": \"\",\n                \"DV\": \"\",\n                \"DVabb\": \"\",\n                \"NODES\": [\"Amount of glucose produced\", \"Amount of ATP produced\", \"Number of new cells grown\", \"Amount of light absorbed by chlorophyll\"],\n                \"CAUSES\": [\"photosynthesis\", \"chemical reaction\", \"physical reaction\", \"kinetic energy\"]\n            }\n        }\n    }\n};\n","/*global db, collectionID, userID, showSnackbar, pageNamesToFunctions */\n\n/*\n    raiseYourHand\n4.1 startPage\n4.2 defPage1\n4.3 defPage2\n5.1 defPage3\n5.2 defPage4\n5.3 defPage5\n6.1 defPage6\n    defPage7\n    defPage8\n6.2 cptMapinstructPage\n    backToYourRQ\n6.3 predictPage1\n7.1 graphPage1\n8.1 graphPage2\n9.1 initCptMapPage | initcptMapPlaceholder\n10.1 biDirInstructPage1\n10.2 biDirInstructPage2\n11.1 biDirIntructPage3\n11.2 oppDirCptMapPage\n12.1 brmInstructionPage(Video - remove)\n12.2 brmPage\n12.3 brmP\n13.1 predictPage2\n13.2 finalConceptMapPage\n14.1 completePage(home page displaying they have completed ? ? ? )\n\ncond1              | cond2                      | cond3\n-------------------+----------------------------+-----------------------\nraiseYourHand      |raiseYourHand               |raiseYourHand\nstartPage          |startPage                   |startPage\ndefinitionPage1    |definitionPage1             |definitionPage1\ndefinitionPage2    |definitionPage2             |definitionPage2\ndefinitionPage3    |definitionPage3             |definitionPage3\ndefinitionPage4    |definitionPage4             |definitionPage4\ndefinitionPage5    |definitionPage5             |definitionPage5\ndefinitionPage6    |definitionPage6             |definitionPage6\ndefinitionPage7    |definitionPage7             |definitionPage7\ndefinitionPage8    |definitionPage8             |definitionPage8\ndefinitionPage9    |definitionPage9             |definitionPage9\ndefinitionPage10   |definitionPage10            |definitionPage10\ninstructionPage    |instructionPage             |instructionPage\nbackToYourRQ       |backToYourRQ                |backToYourRQ\npredictionPage1    |predictionPage1             |predictionPage1\ngraphPage1         |graphPage1                  |graphPage1\ngraphPage2         |graphPage2                  |graphPage2\n===================+== (above) SAME FOR ALL ====+===================\ninitialConceptMap  |initialConceptMap           | cptMapPlaceHolder\n                   |biDirInstructionPage1       |\n                   |biDirInstructionPage2       |\n                   |biDirInstructionPage3       |\n                   |oppositeDirectionConceptMap |\nbrmPage            |brmPage                     |brmPage\npredictionPage2    |predictionPage2             |predictionPage2\nfinalConceptMap    |finalConceptMap             |finalConceptMap\ncompletePage       |completePage                |completePage\n\n*/\n\n\n// const FEATURES = [\n//     \"FTR_IN_CLASSROOM\"\n//     \"FTR_DEFS_ONLY\",\n//     \"FTR_NO_DEFS\",\n//     \"FTR_INITIAL_HYP\",\n//     \"FTR_NO_CPT_MAP\",\n//     \"FTR_BI_DIR\",\n//     \"FTR_FINAL_HYP\",\n// ];\n\nconst features = (localStorage.getItem(\"activityFeatures\") || \"\")\n    .split(\":\")\n    .filter(x => x !== \"\");\nconsole.log(\"features\", features);\n\nconst definitionPages = [\n    \"definitionPage1\",\n    \"lessonOverview\",\n    \"lessonOverview2\",\n    \"definitionPage2\",\n    \"definitionPage3\",\n    \"definitionPage4\",\n    \"definitionPage5\",\n    \"definitionPage6\",\n    \"causes1\",\n    \"causes2\",\n    \"corr1\",\n    \"corr2\",\n    \"quizPage\",\n];\n\nconst hypoPages = [\n    \"graphPage\",\n    \"notePadPage\"\n];\n\nconst conditionHypoPages = [\n    \"instructionPage\",\n    \"conceptMapPage\"\n];\n\nconst biDirectionalPages = [\n    \"biDirInstructionPage1\",\n    \"biDirInstructionPage2\",\n    \"biDirInstructionPage3\",\n    \"oppositeDirectionConceptMap\"\n]\n\nexport function computeHypoTasks() {\n    let pages = [\"startPage\"];\n    if (features.includes(\"FTR_IN_CLASS\")) {\n        pages.unshift(\"raiseYourHand\")\n    }\n    if (!features.includes(\"FTR_NO_DEFS\")) {\n        // add def pages as long as we didn't specify NO_DEFS\n        for (let defPage of definitionPages) {\n            pages.push(defPage);\n        }\n        pages.push(\"backToYourRQ\");\n    }\n    if (features.includes(\"FTR_DEFS_ONLY\")) {\n        // send them back to home page if DEFS_ONLY\n        pages.push(\"completePage\")\n        return;\n    }\n    \n    // add the subset of hypoPages which are always present\n    if (features.includes(\"FTR_INITIAL_HYP\")) {\n        pages.push(\"predictionPage1\");\n    } else {\n        pages.push(\"predictionPage2\");\n    }\n    for (let page of hypoPages) {\n        pages.push(page);\n    }\n    // only add the instructional video for initial hyp\n    if (features.includes(\"FTR_INITIAL_HYP\")) {\n        pages.push(\"instructionPage\");\n    }\n    // if NO_CPT_MAP insert conceptMapPlaceholder rather than conceptMapPage\n    if (features.includes(\"FTR_NO_CPT_MAP\")) {\n        pages.push(\"conceptMapPlaceholder\");\n    } else {\n        if (features.includes(\"FTR_INITIAL_HYP\")) {\n            pages.push(\"initialConceptMap\")\n        } else {\n            pages.push(\"finalConceptMap\")\n        }\n        \n    }\n    // if bi-directional, add those pages\n    if (features.includes(\"FTR_BI_DIR\")) {\n        for (let bdp of biDirectionalPages) {\n            pages.push(bdp);\n        }\n    }\n    // add link to home page\n    pages.push(\"completePage\");\n    return pages;\n}\n\n\n// export const conditionHypoTasks = {\n//     \"demo\": [\n//         \"startPage\",\n//         \"definitionPage1\",\n//         \"lessonOverview\",\n//         \"lessonOverview2\",\n//         \"definitionPage2\",\n//         \"definitionPage3\",\n//         \"definitionPage4\",\n//         \"definitionPage5\",\n//         \"definitionPage6\",\n//         \"causes1\",\n//         \"causes2\",\n//         \"corr1\",\n//         \"corr2\",\n//         \"quizPage\",\n//         \"backToYourRQ\",\n//         \"predictionPage2\",\n//         \"graphPage\",\n//         \"notePadPage\",\n//         \"instructionPage\",\n//         \"finalConceptMap\",\n//         \"completePage\"\n//     ],\n//     \"cond1\": [\n//         \"raiseYourHand\",\n//         \"startPage\",\n//         \"definitionPage1\",\n//         \"definitionPage2\",\n//         \"definitionPage3\",\n//         \"definitionPage4\",\n//         \"definitionPage5\",\n//         \"definitionPage6\",\n//         \"definitionPage7\",\n//         \"definitionPage8\",\n//         \"definitionPage9\",\n//         \"definitionPage10\",\n//         \"instructionPage\",\n//         \"backToYourRQ\",\n//         \"predictionPage1\",\n//         \"graphPage1\",\n//         \"graphPage2\",\n//         \"initialConceptMap\",\n//         \"brmPage\",\n//         \"predictionPage2\",\n//         \"finalConceptMap\",\n//         \"completePage\"\n//     ],\n//     \"cond2\": [\n//         \"raiseYourHand\",\n//         \"startPage\",\n//         \"definitionPage1\",\n//         \"definitionPage2\",\n//         \"definitionPage3\",\n//         \"definitionPage4\",\n//         \"definitionPage5\",\n//         \"definitionPage6\",\n//         \"definitionPage7\",\n//         \"definitionPage8\",\n//         \"definitionPage9\",\n//         \"definitionPage10\",\n//         \"instructionPage\",\n//         \"backToYourRQ\",\n//         \"predictionPage1\",\n//         \"graphPage1\",\n//         \"graphPage2\",\n//         \"initialConceptMap\",\n//         \"biDirInstructionPage1\",\n//         \"biDirInstructionPage2\",\n//         \"biDirInstructionPage3\",\n//         \"oppositeDirectionConceptMap\",\n//         \"brmPage\",\n//         \"predictionPage2\",\n//         \"finalConceptMap\",\n//         \"completePage\"\n//     ],\n//     \"cond3\": [\n//         \"raiseYourHand\",\n//         \"startPage\",\n//         \"definitionPage1\",\n//         \"definitionPage2\",\n//         \"definitionPage3\",\n//         \"definitionPage4\",\n//         \"definitionPage5\",\n//         \"definitionPage6\",\n//         \"definitionPage7\",\n//         \"definitionPage8\",\n//         \"definitionPage9\",\n//         \"definitionPage10\",\n//         \"instructionPage\",\n//         \"backToYourRQ\",\n//         \"predictionPage1\",\n//         \"graphPage1\",\n//         \"graphPage2\",\n//         \"initialConceptMapPlaceholder\",\n//         \"brmPage\",\n//         \"predictionPage2\",\n//         \"finalConceptMap\",\n//         \"completePage\"\n//     ]\n// }\n","// this is hypo.js, responsible for the functionality of the hypo module\n\n/*\n * This is some serious code smell if I need to tell the linter to not\n * complain about all of these variables from other <script> tags\n * FIXME: We need a build system\n */\n/*global db, collectionID, userID */\n/*global createjs */\n\nimport \"./styles/index.css\";\nimport { getDBConnection } from \"@isptutorproject/isp-database\";\nimport { NavBar } from \"@isptutorproject/navbar\";\nimport { SnackBar } from \"@isptutorproject/snackbar\";\nimport { ontology } from \"./ontology\";\nimport { hypoOntology } from \"./hypoOntology\";\nimport {\n    computeHypoTasks\n} from \"./features\";\n\nconst snackbar = new SnackBar();\nconst navbar = new NavBar();\nlet db;\n\n// ============================================================================\n// ======================== Constants and Variables ===========================\n// ============================================================================\n\n// calculuate the pixel ratio of the screen\nconst PIXEL_RATIO = (function () {\n    var ctx = document.createElement(\"canvas\").getContext(\"2d\"),\n        dpr = window.devicePixelRatio || 1,\n        bsr = ctx.webkitBackingStorePixelRatio ||\n        ctx.mozBackingStorePixelRatio ||\n        ctx.msBackingStorePixelRatio ||\n        ctx.oBackingStorePixelRatio ||\n        ctx.backingStorePixelRatio || 1;\n    let pRatio = dpr / bsr;\n    return pRatio;\n})();\n\n// constants regarding canvas size\nconst CANVAS_WIDTH = 1200;\nconst CANVAS_HEIGHT = 750;\n\n// calculate the scaling ratio for making canvas responsive\nconst SCALE_RATIO = (function () {\n    let iw = window.innerWidth;\n    let ih = window.innerHeight;\n    let xRatio = iw / CANVAS_WIDTH;\n    let yRatio = ih / CANVAS_HEIGHT;\n    let sRatio = Math.min(xRatio, yRatio);\n    return sRatio;\n})();\n\n// for keeping track of scaling ratio in makeResponsive;\nlet scalingRatio = 1;\n\n// constants regarding bubble customization\nconst BUBBLE_WIDTH = 120;\nconst BUBBLE_HEIGHT = 100;\nconst BUBBLE_RADIUS = 10;\nconst BUBBLE_INCREMENT = .5 * BUBBLE_WIDTH;\nconst BUBBLE_COLOR = \"#4286f4\";\nconst FIXED_BUBBLE_COLOR = \"#99bbff\";\n\nconst BUTTON_WIDTH = 80;\nconst BUTTON_HEIGHT = 40;\nconst BUTTON_RADIUS = 10;\nconst BUTTON_COLOR = \"#136bfb\";\n\nconst ARROW_BACKGROUND_WIDTH = 20;\nconst ARROW_BACKGROUND_HEIGHT = 20;\n\nconst OPTION_MIN_WIDTH = 100;\nconst OPTION_HEIGHT = 40;\nconst OPTION_COLOR = \"#f4d041\";\n\nconst CONNECTOR_RADIUS = (createjs.Touch.isSupported()) ? 15 : 7;\n\n// constants regarding position of nodes,\n// nodes/bubbles are centered upon the x and y positions selected\nconst BUBBLE_X = CANVAS_WIDTH / 4;\nconst BUBBLE_Y = CANVAS_HEIGHT * .75 - 1.5 * BUBBLE_HEIGHT;\n\n// const IV_X = CANVAS_WIDTH * 0.1;\nconst IV_X = CANVAS_WIDTH * 0.175;\nconst IV_Y = CANVAS_HEIGHT * 0.8;\n\n// const DV_X = CANVAS_WIDTH * 0.9;\nconst DV_X = CANVAS_WIDTH * 0.825;\nconst DV_Y = CANVAS_HEIGHT * 0.8;\n\n// these are for displaying information\nlet stage;\n// isn't used anywhere\n// let textField;\n// yellow panel that shows up upon mouse click\nlet panel;\n\n// related with drawing arrows\nlet currentArrow = null;\n// no longer using\n// let connectorOver = null;\nlet somethingHighlighted = false;\n\n// for option width purposes\nlet optionWidth;\n\n// for storing steps taken by user\n//    steps include an action, an object, an index, a timestamp, and possibly\n//    additional text\nlet steps;\n\n// this queue is for the preloader to contain all the image files that have\n// been preloaded\nlet queue;\n// for the loading text at start\nlet loadingText;\n\n\n// placeholder (Crystal) constants regarding values of nodes\n// FIXME: we need a better way to have default values without resorting to\n// globals\n// const IV = \"Initial water temperature\"\n// const DV = \"Amount crystal growth on string\"\n// // there can be 1 - 8 nodes (or else it will look strange)\n// const NODES = [\n//     \"Kinetic energy of water molecules\",\n//     \"Evaporation rate of water\",\n//     \"Amount of water in jar\",\n//     \"Concentration of Na+ and Cl- in water\",\n//     \"Amount of water string absorbs\"\n// ];\n// const CAUSES = [\n//     \"Electric force\",\n//     \"Conservation of matter\",\n//     \"Energy to escape electric forces\"\n// ];\nconst IV = \"Independent Variable\"\nconst DV = \"Dependent Variable\"\n// there can be 1 - 8 nodes (or else it will look strange)\nconst NODES = [\n    \"Concept 1\",\n    \"Concept 2\",\n    \"Concept 3\"\n];\nconst CAUSES = [\n    \"Cause 1\",\n    \"Cause 2\",\n    \"Cause 3\",\n    \"Cause 4\"\n];\n\n/*\n * Alternative placeholder values for Stefani's Concept Map Video\n */\n// const IV = \"Listening to songs while studying\"\n// const DV = \"Grades in the class\"\n// // there can be 1 - 8 nodes (or else it will look strange)\n// const NODES = [\n//     \"Knowledge of lyrics\",\n//     \"Reading comprehension of material\",\n//     \"Learning of material\"\n// ];\n// const CAUSES = [\n//     \"Concentration\",\n//     \"Familiarity\",\n//     \"Mood\"\n// ];\n\n\n// variable versions of iv and dv. setting them to the defaults above, and\n// later if loadData() is successfull, the defaults will be overriden by what's\n// in firebase\nlet iv = IV;\nlet dv = DV;\n// abbreviated dv\nlet dvabb = DV;\nlet nodes = NODES;\n// these two negative indices are just using while logging steps\nnodes[-2] = IV;\nnodes[-1] = DV;\nlet causes = CAUSES;\n\n// true corresponds to \"increasing\" and false corresponds to \"decreasing\"\n// FIXME: Scott's not sure this makes sense.  Basically both predictions\n// end up with a value of \"increasing\" prior to the student doing anything\nlet firstPrediction; //= true;\nlet secondPrediction; //= true;\n\n// The following state vars were added by Scott as we wanted to both display what\n// the user previously selected when they return to the page via a back button\n// and if the user had saved a subsequent concept map, no longer allow them\n// to change the prediction they made beforehand.answered\n\n// if true, will highlight the current value, but still let you change it\n// if this gets set to true, you will not be able to change the first prediction\nlet initialHypoLocked;\nlet initialHypoLockedReason = \"\";\n// ditto for the second prediction\nlet finalHypoLocked;\nlet finalHypoLockedReason = \"\";\n\nlet currentHypo;\nlet currentBubbles;\nlet arrowz;\n\n// ============================================================================\n// ================================= database =================================\n// ============================================================================\n\n// this is old function to load rq data, uses hypoOntology.js, might not work\n// anymore\n//\n// Scott - this is definitely working, as it's in use and the rqted\n// data is indeed fetched.  My question is, does this really need to be an\n// async function?  all of the other firebase promise stuff isn't and works\n// // just fine\n// async function getTutorState() {\n//     let jsonData = null;\n//     if (userID == null) {\n//         console.log(\"userID is null\");\n//         return null;\n//     }\n//     var docRef = db.collection(collectionID).doc(userID);\n//     await docRef.get().then(function (doc) {\n//         if (doc.exists) {\n//             console.log(\"Document exists\");\n//             jsonData = doc.data().rqted;\n//         } else {\n//             // doc.data() will be undefined in this case\n//             console.log(\"No such document!\");\n//         }\n//     }).catch(function (error) {\n//         console.log(\"Error getting document:\", error);\n//     });\n//     //console.log(\"returned data: \"+ jsonData);\n//     return jsonData;\n// }\n\nfunction loadData() {\n    // gets the users data from the db and then sets some\n    // module-specific variables based on what it recieves\n    return db.getUserData()\n    .then((userData) => {\n        console.log(\"loadData\", userData);\n        console.log(typeof(userData));\n        firstPrediction = userData.firstPrediction;\n        initialHypoLocked = userData.initialHypo !== null;\n        secondPrediction = userData.secondPrediction;\n        finalHypoLocked = userData.finalHypo !== null;\n        if (userData.finalHypo && userData.finalHypo.notesHtml) {\n            let notes = document.getElementById(\"notepad_notes\");\n            notes.innerHTML = userData.finalHypo.notesHtml\n        }\n        if (userData.rqted && userData.rqted.moduleState) {\n            let moduleData = userData.rqted.moduleState;\n            let area = moduleData['selectedArea']['index'];\n            let topic = moduleData['selectedTopic']['index'];\n            let variable = moduleData['selectedVariable']['index'];\n            // ontology stuff\n            let ontologyTopic = ontology['_ONTOLOGY']['S']['A' + area]['T' + topic];\n            iv = ontologyTopic['enumValue' + variable];\n            dv = ontologyTopic['DVs'];\n            dvabb = ontologyTopic['DVabb'];\n            // hypoOntology stuff\n            let hypoOntologyTopic = hypoOntology['A' + area]['T' + topic]['V' + variable];\n            if (hypoOntologyTopic['IV'] != \"\") {\n                iv = hypoOntologyTopic['IV'];\n            }\n            if (hypoOntologyTopic['DV'] != \"\") {\n                dv = hypoOntologyTopic['DV'];\n            }\n            if (hypoOntologyTopic['DVabb'] != \"\") {\n                dvabb = hypoOntologyTopic['DVabb'];\n            }\n            causes = hypoOntologyTopic['CAUSES'];\n            nodes = hypoOntologyTopic['NODES'];\n            nodes[-2] = iv;\n            nodes[-1] = dvabb;\n        }\n        // console.log(`\n        // firstPrediction: ${firstPrediction}\n        // initialHypoLocked: ${initialHypoLocked}\n        // secondPrediction: ${secondPrediction}\n        // finalHypoLocked: ${finalHypoLocked}\n        // iv: ${iv}\n        // dv: ${dv}\n        // dvabb: ${dvabb}\n        // nodes: ${nodes}\n        // causes: ${causes}\n        // `);\n        // console.log(area + \",\" + topic + \",\" + variable);\n        // console.log(hypoOntologyTopic)\n\n        return userData;\n    });\n}\n\n/*\n * saves the first/secondPrediction to firebase\n */\nfunction logPrediction(fldName, fldValue) {\n    // return db.collection(collectionID).doc(userID).update({\n    //     [fldName]: boolPredictionToString(fldValue)\n    // })\n    return db.saveValue(fldName, fldValue)\n    .then(() => {\n        return true;\n    })\n    .catch(function (error) {\n        console.error(error);\n        return false;\n    });\n}\n\n\n/*\n * saves a hypothesis (concept map) to firebase.  based on ones condition, there\n * may be more than one hypothesis, so there is a 'whichHypo' param\n */\nfunction logData2(ivBubble, whichHypo) {\n    let log = {};\n    let currentPrediction;\n    let currentPredictionValue;\n    if (\"initial\" === whichHypo) {\n        currentPrediction = \"first\";\n        currentPredictionValue = firstPrediction;\n    } else if (\"opposite\" === whichHypo) {\n        currentPrediction = \"opposite(first)\";\n        currentPredictionValue = (firstPrediction === \"increase\") ? \"decrease\" : \"increase\";\n    } else {\n        currentPrediction = \"second\";\n        currentPredictionValue = secondPrediction;\n    }\n    log.currentPrediction = currentPrediction;\n    log.currentPredictionValue = currentPredictionValue;\n    let notes = document.getElementById(\"notepad_notes\");\n    let nodes = [];\n    let arrowLabels = [];\n    let directions = [];\n    let connector = ivBubble.outConnector;\n    while (connector != null) {\n        let arrow = connector.arrow;\n        arrowLabels.push(arrow.label.text.replace(\"\\n\", \" \"));\n        let nextBubble = arrow.connectorOver.parent;\n        nodes.push(nextBubble.text);\n        directions.push(nextBubble.getChildByName(\"dirButton\").direction);\n        connector = nextBubble.outConnector;\n    }\n    log.nodes = nodes;\n    log.arrowLabels = arrowLabels;\n    log.directions = directions;\n    log.steps = steps;\n    log.notes = notes.innerText;\n    // db.collection(collectionID).doc(userID).update({\n    //     [`${whichHypo}Hypo`]: JSON.stringify(log)\n    // })\n    db.saveJSONValue(`${whichHypo}Hypo`, log)\n    .then(() => {\n        console.log(\"Successfully logged hypothesis data\");\n        snackbar.show(\"Successfully logged hypothesis data.\");\n        console.log(log);\n    })\n    .catch((error) => {\n        console.error(\"Error writing document: \", error);\n        snackbar.show(\"Error: Failed to log hypothesis data.\");\n    });\n}\n\nfunction logData(ivBubble, whichHypo) {\n    let log = {};\n    let currentPrediction;\n    let currentPredictionValue;\n    if (\"initial\" === whichHypo) {\n        currentPrediction = \"first\";\n        currentPredictionValue = firstPrediction;\n    } else if (\"opposite\" === whichHypo) {\n        currentPrediction = \"opposite(first)\";\n        currentPredictionValue = (firstPrediction === \"increase\") ? \"decrease\" : \"increase\";\n    } else {\n        currentPrediction = \"second\";\n        currentPredictionValue = secondPrediction;\n    }\n    let notes = document.getElementById(\"notepad_notes\");\n    let notesHtml = notes.innerHTML;\n    let notesText = notepadHtmlAsText(notesHtml);\n    log.currentPrediction = currentPrediction;\n    log.currentPredictionValue = currentPredictionValue;\n    log.notesHtml = notesHtml;\n    log.notesText = notesText;\n    log.steps = steps;\n\n    let concepts = [];\n    let arrows = [];\n    function logBubble(bub) {\n        concepts.push({\n            x: bub.x,\n            y: bub.y,\n            text: bub.text,\n            direction: bub.getChildByName(\"dirButton\").direction,\n            isFixed: bub.isFixed,\n            isDV: bub.isDV\n        });\n    }\n    // let nodes = [];\n    // let arrowLabels = [];\n    // let directions = [];\n    // logBubble(currBubble);\n    // let connector = currBubble.outConnector;\n    let currBubble = ivBubble;\n    while (currBubble) {\n        logBubble(currBubble);\n        let connector = currBubble.outConnector;\n        if (!connector) {\n            break;\n        }\n        let from = currBubble.text;\n        let arrow = connector.arrow;\n        let label = arrow.label.text;\n        // arrowLabels.push(arrow.label.text.replace(\"\\n\", \" \"));\n        let nextBubble = arrow.connectorOver.parent;\n        let to = nextBubble.text;\n        arrows.push({from, to, label});\n        currBubble = nextBubble;\n        // nodes.push(nextBubble.text);\n        // directions.push(nextBubble.getChildByName(\"dirButton\").direction);\n        // connector = nextBubble.outConnector;\n    }\n    log.concepts = concepts;\n    log.arrows = arrows;\n    // log.nodes = nodes;\n    // log.arrowLabels = arrowLabels;\n    // log.directions = directions;\n    // log.notes = notes.innerText;\n    // db.collection(collectionID).doc(userID).update({\n    //     [`${whichHypo}Hypo`]: JSON.stringify(log)\n    // })\n    db.saveJSONValue(`${whichHypo}Hypo`, log)\n        .then(() => {\n            console.log(\"Successfully logged hypothesis data\");\n            snackbar.show(\"Successfully logged hypothesis data.\");\n            console.log(log);\n        })\n        .catch((error) => {\n            console.error(\"Error writing document: \", error);\n            snackbar.show(\"Error: Failed to log hypothesis data.\");\n        });\n}\n\n// ============================================================================\n// ====================== App Initializization ================================\n// ============================================================================\n\n// init is the first function to be called\nfunction initHypoPage() {\n    // starts the preloader\n    loadAssets();\n}\n\n\nfunction loadAssets() {\n    // display loading image\n    document.getElementById(\"loading_gif\").classList.remove(\"hidden\");\n    // preload assets\n    queue = new createjs.LoadQueue();\n    // assetsLoadingComplete() will be called once all assets have been loaded\n    queue.on(\"complete\", assetsLoadingComplete);\n    queue.loadManifest([\n        { id: \"TeacherPointing\",         src: \"img/hypo-gr/slide_intro/TeacherPointing.jpg\" },\n        { id: \"TeacherPointing2\",        src: \"img/hypo-gr/slide_intro/TeacherPointing2.jpg\" },\n        { id: \"defGraph\",                src: \"img/hypo-gr/slide1/defGraph.png\" },\n        { id: \"causeGraph\",              src: \"img/hypo-gr/slide1/causeGraph.png\" },\n        { id: \"corrGraph\",               src: \"img/hypo-gr/slide1/corrGraph.png\" },\n        { id: \"densitygraphic\",          src: \"img/hypo-gr/slide2/densitygraphic.jpg\" },\n        { id: \"coffeegraphic\",           src: \"img/hypo-gr/slide3/coffeegraphic.jpg\" },\n        { id: \"comic\",                   src: \"img/hypo-gr/slide3/comic.jpg\" },\n        { id: \"correlation\",             src: \"img/hypo-gr/slide4/correlation.png\" },\n        { id: \"IceCreamSwimming\",        src: \"img/hypo-gr/slide4/IceCreamSwimming.png\" },\n        { id: \"graph1\",                  src: \"img/hypo-gr/slide4/graph1.png\" },\n        { id: \"graph2\",                  src: \"img/hypo-gr/slide4/graph2.png\" },\n        { id: \"causation_correlation\",   src: \"img/hypo-gr/slide5/PizzaGradesStudy.png\" },\n        { id: \"Picture_SunTempIcecream\", src: \"img/hypo-gr/slide5/SunTempIcecream.png\" },\n        { id: \"Crys_increases\",          src: \"img/hypo-gr/graphSlides/Crys_increases.png\" },\n        { id: \"Crys_decreases\",          src: \"img/hypo-gr/graphSlides/Crys_decreases.png\" },\n        { id: \"cptMapPlaceholder\",       src: \"img/hypo-gr/cptMapPlaceholder/cptMapPlaceholder.jpg\" },\n        { id: \"defPagesCptMap\",          src: \"img/hypo-gr/defPagesCptMap.png\" },\n        { id: \"ivToDvWithArrow\",         src: \"img/hypo-gr/iv2dvWithArrow.png\" },\n        { id: \"yellowBtn\",               src: \"img/hypo-gr/buttonyellow.png\" },\n        { id: \"orangeBtn\",               src: \"img/hypo-gr/buttonorange.png\" },\n        { id: \"lightbulb\",               src: \"img/hypo-gr/lightbulb.png\" },\n    ]);\n}\n\nfunction assetsLoadingComplete(event) {\n    // hide the loading image\n    document.getElementById(\"loading_gif\").classList.add(\"hidden\");\n    initStage();\n    loadData()\n    .then((userData) => {\n        // goes to the approrpriate hypo module page based on\n        // the users condition as well as returning to whatever\n        // page they may have been on if returning\n        initHypoTasks(userData);\n    });\n}\n\nfunction initStage() {\n    let can = document.getElementById(\"hypo-canvas\");\n\n    // stage = new createjs.Stage(\"hypo-canvas\");\n    stage = new createjs.Stage(can);\n\n    function makeResponsive(isResp, respDim, isScale, scaleType) {\n        var lastW, lastH, lastS = 1;\n        window.addEventListener('resize', resizeCanvas);\n        resizeCanvas();\n\n        function resizeCanvas() {\n            var w = CANVAS_WIDTH,\n                h = CANVAS_HEIGHT;\n            var iw = window.innerWidth,\n                ih = window.innerHeight;\n            var pRatio = PIXEL_RATIO;\n            // necessary for dom elements to look right\n            pRatio *= 2;\n            var xRatio = iw / w,\n                yRatio = ih / h,\n                sRatio = 1;\n            if (isResp) {\n                if ((respDim == 'width' && lastW == iw) ||\n                    (respDim == 'height' && lastH == ih)) {\n                    sRatio = lastS;\n                } else if (!isScale) {\n                    if (iw < w || ih < h)\n                        sRatio = Math.min(xRatio, yRatio);\n                } else if (scaleType == 1) {\n                    sRatio = Math.min(xRatio, yRatio);\n                } else if (scaleType == 2) {\n                    sRatio = Math.max(xRatio, yRatio);\n                }\n            }\n            can.width = w * pRatio * sRatio;\n            can.height = h * pRatio * sRatio;\n            can.style.width = w * sRatio + 'px';\n            can.style.height = h * sRatio + 'px';\n            stage.scaleX = scalingRatio = pRatio * sRatio;\n            stage.scaleY = scalingRatio = pRatio * sRatio;\n            lastW = iw;\n            lastH = ih;\n            lastS = sRatio;\n            stage.tickOnUpdate = false;\n            stage.update();\n            stage.tickOnUpdate = true;\n        }\n    }\n\n    if (createjs.Touch.isSupported()) {\n        createjs.Touch.enable(stage);\n        window.addEventListener(\"beforeunload\", (e) => {\n            createjs.Touch.disable(stage);\n        });\n    }\n\n    // create canvas with the device resolution.\n    // let myCanvas = createHiPPICanvas(CANVAS_WIDTH, CANVAS_HEIGHT, PIXEL_RATIO);\n    makeResponsive(true, 'both', true, 1);\n\n    // required to enable mouse hover events\n    stage.enableMouseOver(5);\n    // Ticker is primarily for mouse hover event\n    createjs.Ticker.addEventListener(\"tick\", stage);\n}\n\n\n// ===========================================================================\n// =========================== Pages =========================================\n// ===========================================================================\n\n/* simple map of page names to functions which implement them */\nconst pageNamesToFunctions = {\n    \"raiseYourHand\": raiseYourHand,\n    \"startPage\": startPage,\n    \"definitionPage1\": definitionPage1,\n    \"lessonOverview\": lessonOverview,\n    \"lessonOverview2\": lessonOverview2,\n    \"definitionPage2\": definitionPage2,\n    \"definitionPage3\": definitionPage3,\n    \"definitionPage4\": definitionPage4,\n    \"definitionPage5\": definitionPage5,\n    \"definitionPage6\": definitionPage6,\n    \"causes1\": causes1,\n    \"causes2\": causes2,\n    \"corr1\": corr1,\n    \"corr2\": corr2,\n    \"quizPage\": quizPage,\n    \"instructionPage\": instructionPage,\n    \"backToYourRQ\": backToYourRQ,\n    \"predictionPage1\": predictionPage1,\n    \"graphPage\": graphPage,\n    \"notePadPage\": notePadPage,\n    \"initialConceptMap\": initialConceptMap,\n    \"initialConceptMapPlaceholder\": initialConceptMapPlaceholder,\n    \"biDirInstructionPage1\": biDirInstructionPage1,\n    \"biDirInstructionPage2\": biDirInstructionPage2,\n    \"biDirInstructionPage3\": biDirInstructionPage3,\n    \"oppositeDirectionConceptMap\": oppositeDirectionConceptMap,\n    \"brmPage\": brmPage,\n    \"predictionPage2\": predictionPage2,\n    \"finalConceptMap\": finalConceptMap,\n    \"completePage\": completePage,\n};\n\n\n/*\n * simple convenience function, as I'm needed to generate the student's\n * Research Question in multiple places\n */\nfunction getRQ() {\n    return \"Does \" + iv.toLowerCase() + \" affect the \" + dv.toLowerCase() + \"?\"\n}\n\n// this page is only used in classroom environments\nfunction raiseYourHand() {\n    stage.removeAllChildren();\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"TeacherPointing\")).set({\n        x: 50, y: 50\n    });\n\n    let text1 = new createjs.Text(\n        \"In your notebook for this experiment\", \"22px Arial\", \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 100, textAlign: \"center\"\n    });\n\n    let text2 = new createjs.Text(\n        \"Make sure you have written your research question ...\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 175, textAlign: \"center\"\n    });\n\n    let text3 = new createjs.Text(getRQ(), \"bold 22px Arial\", \"#000\").set({\n        x: CANVAS_WIDTH / 2, y: 250,\n        textAlign: \"center\", lineHeight: 35, lineWidth: 700\n    });\n\n    let text4 = new createjs.Text(\n        \"on the cover page of your notebook \", \"22px Arial\", \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 350, textAlign: \"center\"\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => nextHypoTask());\n\n    stage.addChild(image1, text1, text2, text3, text4, backButton, nextButton);\n    stage.update();\n}\n\nfunction startPage() {\n    stage.removeAllChildren();\n    let text = new createjs.Text(\n        \"Welcome to the ISP Tutor's Hypothesis module.\",\n        \"28px Arial \",\n        \"#000\"\n    ).set({\n        x: (CANVAS_WIDTH / 2) + 20, y: 80,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n    // \"\\n\\n\" +\n    //     \"Before you start working on your hypothesis for your research \" +\n    //     \"question, we will first define some important terms.\",\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"TeacherPointing\")).set({\n        x: 40, y: 80\n    });\n\n    let nextButton = createLargeButton(CANVAS_WIDTH / 2, 350, \"Next\", BUTTON_COLOR);\n    nextButton.on(\"click\", nextHypoTask);\n\n    stage.addChild(text, image1, nextButton);\n    stage.update();\n}\n\nfunction definitionPage1() {\n    stage.removeAllChildren();\n    let text = new createjs.DOMElement(\"start_page_overlay\").set({\n        x: 0, y: 10 * 2 / PIXEL_RATIO,\n        scaleX: 0.6 * 2 / PIXEL_RATIO, scaleY: 0.6 * 2 / PIXEL_RATIO\n    });\n    showDOMElement(text);\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => {\n        hideDOMElement(text);\n        prevHypoTask();\n    });\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => {\n        hideDOMElement(text);\n        nextHypoTask();\n    });\n\n    stage.addChild(text, backButton, nextButton);\n    stage.update();\n}\n\nfunction lessonOverview() {\n    console.log(\"in lessonOverview()\");\n    stage.removeAllChildren();\n    let overlay = document.getElementById(\"lesson_overview_overlay\");\n    let invisibles = overlay.querySelectorAll(\".invisible\");\n    let showOnTransition = {};\n    invisibles.forEach((inv) => {\n        let showOn = inv.dataset.showOnTransition;\n        // console.log(\"showOn\", showOn, inv);\n        if (!showOnTransition[showOn]) {\n            showOnTransition[showOn] = [];\n        }\n        showOnTransition[showOn].push(inv);\n    });\n    // console.log(showOnTransition);\n    let maxTransition = Math.max(...Object.keys(showOnTransition)) + 1;\n    if (maxTransition === -Infinity) {\n        maxTransition = 1;\n    }\n    // console.log(maxTransition);\n    let currentTransition = 0;\n    let html = new createjs.DOMElement(\"lesson_overview_overlay\").set({\n        x: 20 * 2 / PIXEL_RATIO, y: 10 * 2 / PIXEL_RATIO,\n        scaleX: 0.55 * 2 / PIXEL_RATIO, scaleY: 0.55 * 2  / PIXEL_RATIO\n    });\n\n    let prevButton = createBackButton();\n    prevButton.on(\"click\", function() {\n        hideDOMElement(html);\n        prevHypoTask();\n    });\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", function() {\n        currentTransition++;\n        // console.log(`current: ${currentTransition} max: ${maxTransition}`);\n        if (currentTransition === maxTransition) {\n            hideDOMElement(html);\n            nextHypoTask();\n        } else {\n            if (showOnTransition[currentTransition]) {\n                for (let ele of showOnTransition[currentTransition]) {\n                    ele.classList.remove(\"invisible\");\n                }\n            }\n        }\n    });\n    stage.addChild(html, prevButton, nextButton);\n    stage.update();\n    showDOMElement(html);\n}\n\nfunction lessonOverview2() {\n    stage.removeAllChildren();\n    let overlay = document.getElementById(\"lesson_overview2_overlay\");\n    let invisibles = overlay.querySelectorAll(\".invisible\");\n    let showOnTransition = {};\n    invisibles.forEach((inv) => {\n        let showOn = inv.dataset.showOnTransition;\n        // console.log(\"showOn\", showOn, inv);\n        if (!showOnTransition[showOn]) {\n            showOnTransition[showOn] = [];\n        }\n        showOnTransition[showOn].push(inv);\n    });\n    // console.log(showOnTransition);\n    let maxTransition = Math.max(...Object.keys(showOnTransition)) + 1;\n    if (maxTransition === -Infinity) {\n        maxTransition = 1;\n    }\n    // console.log(maxTransition);\n    let currentTransition = 0;\n\n    let html = new createjs.DOMElement(\"lesson_overview2_overlay\").set({\n        x: 10 * 2 / PIXEL_RATIO, y: 10 * 2 / PIXEL_RATIO,\n        scaleX: 0.55 * 2 / PIXEL_RATIO, scaleY: 0.55 * 2 / PIXEL_RATIO\n    });\n\n    let prevButton = createBackButton();\n    prevButton.on(\"click\", function () {\n        hideDOMElement(html);\n        prevHypoTask();\n    });\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", function () {\n        currentTransition++;\n        // console.log(`current: ${currentTransition} max: ${maxTransition}`);\n        if (currentTransition === maxTransition) {\n            hideDOMElement(html);\n            nextHypoTask();\n        } else {\n            if (showOnTransition[currentTransition]) {\n                for (let ele of showOnTransition[currentTransition]) {\n                    ele.classList.remove(\"invisible\");\n                }\n            }\n        }\n    });\n    stage.addChild(html, prevButton, nextButton);\n    stage.update();\n    showDOMElement(html);\n}\n\nfunction definitionPage2() {\n    stage.removeAllChildren();\n\n    let text = new createjs.Text(\n        \"You can use a concept map to help you explain how water temperature is \" +\n        \"related to the weight of crystal growth.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: 80, y: 50, lineHeight: 35, lineWidth: CANVAS_WIDTH - 160\n    });\n    // \"Many middle school students have difficulty writing a detailed scientific \" +\n    //     \"explanation for their prediction.\\n\\nFor example, most middle school \" +\n    //     \"students have difficulty explaining how hot/room temperature water \" +\n    //     \"would lead to more crystal growth.\",\n\n    let image = new createjs.Bitmap(queue.getResult(\"ivToDvWithArrow\")).set({\n        x: 215, y: 485, scaleX: 0.55, scaleY: 0.55\n    });\n\n    let text2 = new createjs.Text(\"???\", \"bold 24px Arial\", \"#000\").set({\n        x: (CANVAS_WIDTH / 2) - 40, y: image.y - 20\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", nextHypoTask);\n\n    stage.addChild(text, image, text2, backButton, nextButton);\n    stage.update();\n}\n\n\nfunction definitionPage3() {\n    stage.removeAllChildren();\n\n    let text1 = new createjs.Text(\n        \"To help you write a detailed scientific explanation for your prediction, \" +\n        \"we will ask you to make a concept map (an example is shown below). The \" +\n        \"final concept map should show step-by-step how the independent variable \" +\n        \"(water temperature) affects the dependent variable (amount of \" +\n        \"crystal growth).\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: 60, y: 40, lineHeight: 35, lineWidth: CANVAS_WIDTH - 120\n    });\n\n    let text2 = new createjs.Text(\n        \"You will do this by linking concepts that are closely or directly \" +\n        \"related. For example, as shown below, Water temperature is closely \" +\n        \"related to 'Concept 1'. 'Concept 1' is closely related to 'Concept 2', \" +\n        \"and 'Concept 2' is directly related to 'Weight of crystal'.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: 100, y: 175, lineHeight: 35, lineWidth: CANVAS_WIDTH - 170\n    });\n\n    let image = new createjs.Bitmap(queue.getResult(\"defPagesCptMap\")).set({\n        x: 200, y: 350\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", nextHypoTask);\n\n    stage.addChild(text1, text2, image, backButton, nextButton);\n    stage.update();\n}\n\nfunction definitionPage4() {\n    stage.removeAllChildren();\n\n    let text = new createjs.Text(\n        \"For each connected pair of concepts (for example, water temperature and \" +\n        \"Concept 1), you will be asked to indicate how the concepts are related.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: 60, y: 60, lineHeight: 35, lineWidth: CANVAS_WIDTH - 120\n    });\n\n    let text2 = new createjs.Text(\n        \"The relationships between concepts (as shown below) could be \" +\n        \"correlations, causes, or definitions.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: 120, y: 150, lineHeight: 35, lineWidth: CANVAS_WIDTH - 200\n    });\n\n    let image = new createjs.Bitmap(queue.getResult(\"defPagesCptMap\")).set({\n        x: 200, y: 350\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", nextHypoTask);\n\n    stage.addChild(text, text2, image, backButton, nextButton);\n    stage.update();\n}\n\nfunction definitionPage5() {\n    stage.removeAllChildren();\n    // let image1 = new createjs.Bitmap(queue.getResult(\"defGraph\")).set({\n    //     x: 60, y: 300, scaleX: 0.5, scaleY: 0.5\n    // });\n    // let image2 = new createjs.Bitmap(queue.getResult(\"causeGraph\")).set({\n    //     x: 450, y: 500, scaleX: 0.5, scaleY: 0.5\n    // });\n    // let image3 = new createjs.Bitmap(queue.getResult(\"corrGraph\")).set({\n    //     x: 800, y: 300, scaleX: 0.5, scaleY: 0.5\n    // });\n\n    let title = new createjs.Text(\n        \"Types of Relationships\",\n        \"bold 24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 100, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"When you make your explanation for your prediction, you will need to \" +\n        \"choose the type of relationship between pairs of concepts. Here are \" +\n        \"the three types of relationships you can choose:\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 160,\n        textAlign: \"center\", lineWidth: 1000, lineHeight: 30\n    });\n\n    let text2 = new createjs.Text(\n        '(1) Definition\\n\\n(2) Cause\\n\\n(3) Correlation',\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        y: 300, textAlign: \"left\", lineHeight: 30\n    });\n    // hack to try and get left aligned text to align with center-aligned\n    // text above.  not sure why the width is so large though\n    let w = text2.getMeasuredWidth();\n    text2.x = (CANVAS_WIDTH / 2) - (w / 6);\n    // let text3 = new createjs.Text('', 'italic 14px Arial', \"#000\").set({\n    //     x: CANVAS_WIDTH / 2, y: 370, textAlign: \"center\"\n    // });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    // let images = [image1, image2, image3];\n    // let iteration = 0;\n    nextButton.on(\"click\", nextHypoTask);\n    // nextButton.on(\"click\", e => {\n    //     if (iteration == 3) {\n    //         nextHypoTask();\n    //     } else {\n    //         // console.log(images[iteration]);\n    //         stage.addChild(images[iteration]);\n    //         stage.update();\n    //         iteration++;\n    //     }\n    // });\n\n    stage.addChild(title, text1, text2, backButton, nextButton);\n    // text3,\n    stage.update();\n}\n\nfunction definitionPage6() {\n    stage.removeAllChildren();\n    let title = new createjs.Text(\n        \"Types of Relationships for Hypotheses\",\n        \"bold 24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 40, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"(1) Definition: The meaning of a concept or another way of saying \" +\n        \"the same thing.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 100, textAlign: \"center\"\n    });\n\n    let text2 = new createjs.Text(\n        \"Often, an everyday term is defined by the behaviors of \" +\n        \"molecules...\\n\\nFor example, the concept of the temperature of \" +\n        \"an object is defined as the average kinetic energy of the \" +\n        \"molecules that make up the object.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 150, y: 230, lineHeight: 25, lineWidth: 300\n    });\n\n    let text3 = new createjs.Text(\n        \"Or, Density is the amount of mass of an object divided by its \" +\n        \"volume (or how much space it takes up).\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 150, y: 500, lineHeight: 25, lineWidth: 300,\n    });\n\n    let image1 = new createjs.DOMElement(\"temperature_gif_overlay\");\n    image1.x = 115 * 2 / PIXEL_RATIO;\n    image1.y = 45 * 2 / PIXEL_RATIO;\n    image1.scaleX = .15 * 2 / PIXEL_RATIO;\n    image1.scaleY = .15 * 2 / PIXEL_RATIO;\n\n    let image2 = new createjs.Bitmap(queue.getResult(\"densitygraphic\")).set({\n        x: 600, y: 440, scaleX: 0.5, scaleY: 0.5\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => {\n        hideDOMElement(image1);\n        prevHypoTask();\n    });\n\n    let nextButton = createNextButton();\n    let iteration = 0;\n    nextButton.on(\"click\", e => {\n        if (iteration == 0) {\n            stage.addChild(text2, image1);\n            showDOMElement(image1);\n            stage.update();\n        } else if (iteration == 1) {\n            stage.addChild(text3, image2);\n            stage.update();\n        } else if (iteration == 2) {\n            hideDOMElement(image1);\n            nextHypoTask();\n        }\n        iteration++;\n    });\n\n    stage.addChild(title, text1, backButton, nextButton);\n    stage.update();\n}\n\nfunction causes1() {\n    stage.removeAllChildren();\n    let title = new createjs.Text(\n        \"Types of Relationships for Hypotheses\",\n        \"bold 24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 40, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"(2) Causes:This is when a change in one variable makes another variable \" +\n        \"change (or directly affects another variable).\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 90, textAlign: \"center\", lineWidth: 1000\n    });\n\n    let text2 = new createjs.Text(\n        \"For example, a change in how distracted people are while driving affects \" +\n        \"how well people drive.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 150, y: 180, lineHeight: 25, lineWidth: 450\n    });\n\n    let text3 = new createjs.Text(\n        \"Or, changing the amount of caffeine we drink causes a change in how \" +\n        \"how alert we are.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 650, y: 180, lineHeight: 25, lineWidth: 450\n    });\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"comic\")).set({\n        x: 150, y: 300, scaleX: 0.8, scaleY: 0.7,\n    });\n\n    let image2 = new createjs.Bitmap(queue.getResult(\"coffeegraphic\")).set({\n        x: 650, y: 300, scaleX: 0.7, scaleY: 0.7\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    let iteration = 0;\n    nextButton.on(\"click\", e => {\n        if (iteration == 0) {\n            stage.addChild(text2, image1);\n            stage.update();\n        } else if (iteration == 1) {\n            stage.addChild(text3, image2);\n            stage.update();\n        } else if (iteration == 2) {\n            nextHypoTask();\n        }\n        iteration++;\n    });\n\n    stage.addChild(title, text1, backButton, nextButton);\n    stage.update();\n}\n\nfunction causes2() {\n    stage.removeAllChildren();\n    let title = new createjs.Text(\n        \"Types of Relationships for Hypotheses\",\n        \"bold 24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 40, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"(2) Causes:This is when a change in one variable makes another variable \" +\n        \"change.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 90,\n        textAlign: \"center\", lineWidth: 1000, lineHeight: 20\n    });\n\n    let text2 = new createjs.Text(\n        \"Often we can explain a cause-effect relationship in more detail...\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 125,\n        textAlign: \"center\", lineWidth: 1000, lineHeight: 20\n    });\n\n    let html1 = new createjs.DOMElement(\"causes2_driving_overlay\").set({\n        x: 38 * 2 / PIXEL_RATIO, y: 45 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n\n    let html2 = new createjs.DOMElement(\"causes2_coffee_overlay\").set({\n        x: 163 * 2 / PIXEL_RATIO, y: 45 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"comic\")).set({\n        x: 150, y: 300, scaleX: 0.8, scaleY: 0.7,\n    });\n\n    let image2 = new createjs.Bitmap(queue.getResult(\"coffeegraphic\")).set({\n        x: 650, y: 300, scaleX: 0.7, scaleY: 0.7\n    });\n\n    let text5 = new createjs.Text(\n        \"In the concept map, if you select cause for the type of relationship, \" +\n        \"you will be asked to pick another concept that explains the relationship.\",\n        \"bold 18px Arial\",\n        \"#000\"\n    ).set({\n        x: 150, y: 600, lineHeight: 25, lineWidth: CANVAS_WIDTH - 200\n    });\n\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", function() {\n        hideDOMElement(html1);\n        hideDOMElement(html2);\n        prevHypoTask();\n    });\n\n    let nextButton = createNextButton();\n    let iteration = 0;\n    nextButton.on(\"click\", e => {\n        if (iteration === 0) {\n            stage.addChild(text2);\n            stage.update();\n        } else if (iteration === 1) {\n            stage.addChild(html1, image1);\n            stage.update();\n            showDOMElement(html1);\n        } else if (iteration === 2) {\n            stage.addChild(html2, image2);\n            stage.update();\n            showDOMElement(html2);\n        } else if (iteration === 3) {\n            stage.addChild(text5);\n            stage.update();\n        } else if (iteration === 4) {\n            hideDOMElement(html1);\n            hideDOMElement(html2);\n            nextHypoTask();\n        }\n\n        iteration++;\n    });\n\n    stage.addChild(title, text1, backButton, nextButton);\n    stage.update();\n}\n\nfunction corr1() {\n    stage.removeAllChildren();\n    let title = new createjs.Text(\n        \"Types of Relationships for Hypotheses\",\n        \"bold 24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 40, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"(3) Correlation:A relationship between two variables where both \" +\n        \"variables increase (or decrease) together, or one increases \" +\n        \"as the other decreases. But, these variables might not directly \" +\n        \"affect each other.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 90,\n        textAlign: \"center\", lineWidth: 1000, lineHeight: 30\n    });\n\n    let pizzaText1 = new createjs.Text(\n        \"For example, lets say you found that there is a relationship between \" +\n        \"how often students eat pizza and their grades in school.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 130, y: 200, lineHeight: 25, lineWidth: 460\n    });\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"correlation\")).set({\n        x: 170, y: 280, scaleX: 0.4, scaleY: 0.4,\n    });\n\n    let graph1 = new createjs.Bitmap(queue.getResult(\"graph1\")).set({\n        x: 220, y: 400, scaleX: 0.4, scaleY: 0.4\n    });\n\n    let pizzaText2 = new createjs.Text(\n        \"If you dont know why/how eating pizza could directly affect grades, \" +\n        \"then you would call this relationship a correlation.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 130, y: 600, lineHeight: 25, lineWidth: 460\n    });\n\n\n    let iceCreamText1 = new createjs.Text(\n        \"Or, you might find a relationship between the amount of ice cream people \" +\n        \"buy and how often people go swimming.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 630, y: 200, lineHeight: 25, lineWidth: 460\n    });\n\n    let image2 = new createjs.Bitmap(queue.getResult(\"IceCreamSwimming\")).set({\n        x: 680, y: 280, scaleX: 0.5, scaleY: 0.5\n    });\n\n    let graph2 = new createjs.Bitmap(queue.getResult(\"graph2\")).set({\n        x: 710, y: 400, scaleX: 0.4, scaleY: 0.4\n    });\n\n    let iceCreamText2 = new createjs.Text(\n        \"If you don't know why/how ice cream sales directly affects how often \" +\n        \"people go swimming, then you'd call this relationship a correlation.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 630, y: 600, lineHeight: 25, lineWidth: 460\n    });\n\n\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    let iteration = 0;\n    nextButton.on(\"click\", e => {\n        if (iteration === 0) {\n            stage.addChild(pizzaText1, image1, graph1);\n            stage.update();\n        } else if (iteration === 1) {\n            stage.addChild(pizzaText2);\n            stage.update();\n        } else if (iteration === 2) {\n            stage.addChild(iceCreamText1, image2, graph2);\n            stage.update();\n        } else if (iteration === 3) {\n            stage.addChild(iceCreamText2);\n            stage.update();\n        } else if (iteration === 4) {\n            nextHypoTask();\n        }\n        iteration++;\n    });\n\n    stage.addChild(title, text1, backButton, nextButton);\n    stage.update();\n}\n\nfunction corr2() {\n    stage.removeAllChildren();\n\n    let title = new createjs.Text(\n        \"Types of Relationships for Hypotheses\",\n        \"bold 24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 40, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"(3) Correlation: Just because two things are correlated does not mean \" +\n        \"that one caused the other. There may be other reasons for two variables \" +\n        \"to change together. For example, both variables might be caused by a \" +\n        \"third variable.\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 90,\n        textAlign: \"center\", lineWidth: 1000, lineHeight: 30\n    });\n\n    let text2 = new createjs.Text(\n        \"For example, a third variable, how often they study, could cause them \" +\n        \"to eat more pizza and also cause them to get better grades!\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 110, y: 230, lineHeight: 25, lineWidth: 460,\n    });\n\n    let text3 = new createjs.Text(\n        \"Or, a third variable, the temperature, could cause people to eat more \" +\n        \"ice cream and also cause people to want to go swimming to cool off.\",\n        \"18px Arial\",\n        \"#000\"\n    ).set({\n        x: 650, y: 230, lineHeight: 25, lineWidth: 460\n    });\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"causation_correlation\")).set({\n        x: 90, y: 300, scaleX: 0.35, scaleY: 0.35\n    });\n\n    let image2 = new createjs.Bitmap(queue.getResult(\"Picture_SunTempIcecream\")).set({\n        x: 610, y: 300, scaleX: 0.35, scaleY: 0.35\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", prevHypoTask);\n\n    let nextButton = createNextButton();\n    let iteration = 0;\n    nextButton.on(\"click\", e => {\n        if (iteration == 0) {\n            stage.addChild(text2, image1);\n            stage.update();\n        } else if (iteration == 1) {\n            stage.addChild(text3, image2);\n            stage.update();\n        } else if (iteration == 2) {\n            nextHypoTask();\n        }\n        iteration++;\n    });\n\n    stage.addChild(title, text1, backButton, nextButton);\n    stage.update();\n}\n\nfunction quizPage() {\n    // answers for quiz questions\n    const QUIZ_ANSWERS = [\n        \"Correlation\", \"Definition\", \"Causes\", \"Definition\"\n    ];\n\n    stage.removeAllChildren();\n    let correct = false;\n\n    let heading = new createjs.Text(\n        \"Check your understanding!\", \"bold 24px Arial\", \"#000\").set({\n            x: CANVAS_WIDTH / 2, y: 20, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"For each phrase below, as one concept (underlined) increases, the \" +\n        \"other (underlined) concept may increase or decrease. Select the \" +\n        \"type of relationship that best describes the following pairs of concepts:\",\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: 150, y: 100, lineWidth: 900, lineHeight: 30\n    });\n\n    let quiz = new createjs.DOMElement(\"quiz_overlay\").set({\n        x: 50 * 2 / PIXEL_RATIO, y: 50 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO,\n    });\n\n    let quizQuestions = new createjs.DOMElement(\"quiz_questions_overlay\").set({\n        x: 225 * 2 / PIXEL_RATIO, y: 53 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n\n    let quizDropDowns = document.getElementsByClassName(\"quiz_questions\");\n    let backButton = createBackButton();\n    let nextButton = createNextButton();\n\n    function hideDOMOverlays() {\n        hideDOMElement(quiz);\n        hideDOMElement(quizQuestions);\n        for (let qdd of quizDropDowns) {\n            qdd.removeEventListener(\"change\", onChangeAnswer);\n        }\n    }\n\n    backButton.on(\"click\", e => {\n        hideDOMOverlays();\n        prevHypoTask();\n    });\n\n    function onChangeAnswer(e) {\n        e.target.setCustomValidity(\"\");\n        e.target.style.color = \"\";\n    }\n    for (let qdd of quizDropDowns) {\n        qdd.addEventListener(\"change\", onChangeAnswer);\n    }\n\n    nextButton.on(\"click\", e => {\n        if (correct) {\n            hideDOMOverlays();\n            nextHypoTask();\n        } else {\n            // checking validity info for quiz questions\n            for (let i = 0; i < quizDropDowns.length; i++) {\n                if (quizDropDowns[i].value != QUIZ_ANSWERS[i]) {\n                    quizDropDowns[i].setCustomValidity(\"Wrong Answer\");\n                } else {\n                    quizDropDowns[i].setCustomValidity(\"\");\n                    quizDropDowns[i].style.color = \"green\";\n                }\n                // resetting validity\n                // quizSelectors[i].onchange = (() => {\n                //     quizSelectors[i].setCustomValidity(\"\");\n                //     quizSelectors[i].style.color = \"\";\n                // });\n            }\n            // testing if all answers are correct\n            if (quizQuestions.htmlElement.reportValidity()) {\n                snackbar.show(\n                    \"Your answers are all correct. Click Next again to move on.\"\n                );\n                correct = true;\n            }\n        }\n    });\n\n    stage.addChild(\n        heading, text1,\n        quiz, quizQuestions,\n        backButton, nextButton\n    );\n\n    stage.update();\n    showDOMElement(quiz);\n    showDOMElement(quizQuestions);\n}\n\nfunction instructionPage() {\n    stage.removeAllChildren();\n    // let delayStarted = false;\n    // let delayAchieved = false;\n\n    let text = new createjs.Text(\n        \"Concept Map Activity Instructions\",\n        \"bold 22px Arial\",\n        \"#000\").set({\n        x: CANVAS_WIDTH / 2, y: (CANVAS_HEIGHT / 8) - 70, textAlign: \"center\"\n    });\n\n    let video = new createjs.DOMElement(\"instruction_video_overlay\").set({\n        x: 40 * 2 / PIXEL_RATIO, y: 18 * 2 / PIXEL_RATIO,\n        scaleX: 0.22 * 2 / PIXEL_RATIO, scaleY: 0.22 * 2 / PIXEL_RATIO\n    });\n\n    let advice = new createjs.Text(\n        \"Please watch the video above for a brief tutorial. We recommend you \" +\n        \"watch the video in full screen.\\n\\nFrom the Concept Map page, you can \" +\n        \"always click the back button to return to this video. That page also \" +\n        \"contains a \\\"Show Help\\\" button which will display a popup summarizing \" +\n        \"these instructions.\" ,\n        \"16px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: CANVAS_HEIGHT * 0.85,\n        textAlign: \"center\", lineWidth: 800\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", function() {\n        hideDOMElement(video);\n        prevHypoTask();\n    });\n    // backButton.on(\"click\", e => {\n    //     let vid = document.getElementById(\"instruction_video_overlay\");\n    //     vid.style.display = \"none\";\n    //     vid.contentWindow.postMessage('{\"event\":\"command\",\"func\":\"stopVideo\",\"args\":\"\"}', '*');\n    //     prevHypoTask();\n    // });\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", function() {\n        console.log(\"next button clicked\");\n        hideDOMElement(video);\n        nextHypoTask();\n    });\n    // nextButton.on(\"click\", e => {\n    //     if (!delayStarted) {\n    //         snackbar.show(\"Please watch the tutorial video.\");\n    //         nextButton.disable();\n    //         delayStarted = true;\n    //         setTimeout(() => {\n    //             delayAchieved = true;\n    //             nextButton.enable();\n    //         }, 20000);\n    //     } else if (!delayAchieved) {\n    //         console.log(\"still delaying\");\n    //     } else {\n    //         let vid = document.getElementById(\"instruction_video_overlay\");\n    //         vid.style.display = \"none\";\n    //         vid.contentWindow.postMessage(\n    //             '{\"event\": \"command\", \"func\": \"stopVideo\", \"args\": \"\"}', '*'\n    //         );\n    //         nextHypoTask();\n    //     }\n    // });\n\n    stage.addChild(text, video, advice, backButton, nextButton);\n    stage.update();\n    showDOMElement(video);\n}\n\n\nfunction backToYourRQ() {\n    stage.removeAllChildren();\n    let image1 = new createjs.Bitmap(queue.getResult(\"TeacherPointing\")).set({\n        x: 50, y: 50\n    });\n\n    let text1 = new createjs.Text(\n        \"Now that youve learned about the different ways that concepts can be \" +\n        \"related in your concept map, lets go back to your original research \" +\n        \"question...\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 175,\n        textAlign: \"center\", lineHeight: 35, lineWidth: 700\n    });\n\n    let text2 = new createjs.Text(getRQ(), \"bold 22px Arial\", \"#000\").set({\n        x: CANVAS_WIDTH / 2, y: 300,\n        textAlign: \"center\", lineHeight: 35, lineWidth: 700\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => nextHypoTask());\n\n    stage.addChild(image1, text1, text2, backButton, nextButton);\n    stage.update();\n}\n\nfunction predictionPage1() {\n    stage.removeAllChildren();\n\n    let title = new createjs.Text(\n        \"Make your prediction:\", \"bold 22px Arial\", \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: CANVAS_HEIGHT / 8, textAlign: \"center\"\n    });\n\n    let question = new createjs.Text(\n        \"As \" + iv.toLowerCase() + \" increases, what will happen to the \" +\n        dv.toLowerCase() + \"?\",\n        \"20px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, textAlign: \"center\", lineWidth: 800, lineHeight: 30\n    });\n    question.y = title.y + 40;\n\n    let chosenDVDirection;\n    let choice1 = new createjs.Text(\"Increase\", \"20px Arial\", \"#000\").set({\n        x: CANVAS_WIDTH / 2, textAlign: \"center\"\n    });\n    choice1.y = question.y + 150;\n\n    let choice2 = new createjs.Text(\"Decrease\", \"20px Arial\", \"#000\").set({\n        x: CANVAS_WIDTH / 2, textAlign: \"center\"\n    });\n    choice2.y = choice1.y + 30;\n\n    if (firstPredictionLocked) {\n        // display message that they cannot change the value and\n        // don't setup the click handlers\n        snackbar.show(firstPredictionLockedReason + \" You cannot change your prediction.\");\n    } else {\n        generateHitAreaCenterAlignment(choice1);\n        choice1.on(\"click\", e => {\n            choice1.color = \"#5588EE\";\n            choice2.color = \"#000\";\n            chosenDVDirection = true;\n        });\n        generateHitAreaCenterAlignment(choice2);\n        choice2.on(\"click\", e => {\n            choice1.color = \"#000\";\n            choice2.color = \"#5588EE\";\n            chosenDVDirection = false;\n        });\n    }\n\n    if (firstPredictionSaved) {\n        // set chosenDVDirection to the value of firstPrediction and\n        chosenDVDirection = firstPrediction;\n        // set the choices to the appropriate colors based on the saved value\n        if (firstPrediction) {\n            choice1.color = \"#5588EE\";\n            choice2.color = \"#000\";\n        } else {\n            choice1.color = \"#000\";\n            choice2.color = \"#5588EE\";\n        }\n    }\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => {\n        if (chosenDVDirection === undefined) {\n            snackbar.show('Please select either \"Increase\" or \"Decrease\".');\n        } else {\n            firstPrediction = chosenDVDirection;\n            logPrediction(\"firstPrediction\", firstPrediction)\n            .then(() => {\n                firstPredictionSaved = true;\n                nextHypoTask();\n            })\n            .catch(function (error) {\n                console.error(error);\n            });\n        }\n    });\n\n    stage.addChild(\n        title, question, choice1, choice2, backButton, nextButton\n    );\n    stage.update();\n}\n\nfunction brmInstructionPage() {\n    stage.removeAllChildren();\n    let text = new createjs.Text(\n        \"Background Research\", \"bold 22px Arial\", \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 25, textAlign: \"center\"\n    });\n\n    let vid = new createjs.DOMElement(\"brm_instruction_overlay\").set({\n        x: 40 * 2 / PIXEL_RATIO, y: 15 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n    vid.htmlElement.style.display = \"block\";\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => {\n        vid.htmlElement.style.display = \"none\";\n        predictionPage1();\n    });\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => {\n        vid.htmlElement.style.display = \"none\";\n        brmPage();\n    });\n\n    stage.addChild(text, vid, backButton, nextButton);\n    stage.update();\n}\n\nfunction getImageForPrediction(prediction) {\n    let image;\n    if (\"increase\" === prediction) {\n        image = new createjs.Bitmap(queue.getResult(\"Crys_increases\")).set({\n            scaleX: 0.4, scaleY: 0.4\n        })\n    } else {\n        image = new createjs.Bitmap(queue.getResult(\"Crys_decreases\")).set({\n            scaleX: 0.5, scaleY: 0.5\n        });\n    }\n    return image;\n}\n\nfunction graphPage() {\n    stage.removeAllChildren();\n\n    let prediction = (secondPrediction === \"increase\") ? \"increase\" : \"decrease\";\n\n    let text1 = new createjs.Text(\n        \"You predicted that as \" + iv.toLowerCase() + \" increases, the \" +\n        dv.toLowerCase() + \" will \" + prediction + \".\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 75,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n\n    let image = getImageForPrediction(prediction);\n    image.set({x: 400, y: 150});\n\n    let text2 = new createjs.Text(\n        'Your prediction is represented as: ', \"22px Arial\", \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 480,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n\n    let ivBubble = createFixedBubble(\n        IV_X, IV_Y, capitalizeFirstLetter(iv), \"increase\", false\n    );\n    let dvBubble = createFixedBubble(\n        DV_X, DV_Y, capitalizeFirstLetter(dvabb), prediction, true\n    );\n\n    let arrow = createUnlabeledArrow(\n        ivBubble.x + BUBBLE_WIDTH / 2,\n        ivBubble.y,\n        dvBubble.x - BUBBLE_WIDTH / 2,\n        dvBubble.y\n    );\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let iteration = 0;\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", function(e) {\n        if (0 === iteration) {\n            stage.addChild(text2, ivBubble, dvBubble, arrow);\n        } else if (1 === iteration) {\n            nextHypoTask();\n        }\n        iteration++;\n    });\n\n    stage.addChild(text1, image, backButton, nextButton);\n    stage.update();\n}\n\nfunction biDirInstructionPage1() {\n    stage.removeAllChildren();\n    let oppositePrediction = (firstPrediction) ? \"decrease\" : \"increase\";\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"TeacherPointing\")).set({\n        x: 50, y: 50\n    });\n\n    let text1 = new createjs.Text(\n        \"Now, let's say that another student made a prediction in the opposite \" +\n        \"direction from your prediction...\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 150,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n\n    let image2 = getImageForPrediction(oppositePrediction);\n    image2.set({x: 400, y: 250});\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => nextHypoTask());\n\n    stage.addChild(image1, text1, image2, backButton, nextButton);\n    stage.update();\n}\n\nfunction biDirInstructionPage2() {\n    stage.removeAllChildren();\n    let oppositePrediction = (firstPrediction) ? \"decrease\" : \"increase\";\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"TeacherPointing\")).set({\n        x: 50, y: 50\n    });\n\n    let text1 = new createjs.Text(\n        \"They predicted that as \" + iv.toLowerCase() + \" increases, the \" +\n        dv.toLowerCase() + \" would \" + oppositePrediction + \".\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 150,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n\n    let image2 = getImageForPrediction(oppositePrediction);\n    image2.set({x: 400, y: 250});\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => nextHypoTask());\n\n    stage.addChild(image1, text1, image2, backButton, nextButton);\n    stage.update();\n}\n\nfunction biDirInstructionPage3() {\n    stage.removeAllChildren();\n\n    let oppositePrediction = (firstPrediction) ? \"decrease\" : \"increase\";\n\n    let image1 = new createjs.Bitmap(queue.getResult(\"TeacherPointing\")).set({\n        x: 50, y: 50\n    });\n\n    let text1 = new createjs.Text(\n        \"Think about how this prediction might be true for a minute or two.\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 150,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n\n    let text2 = new createjs.Text(\n        \"Then, try to set up a new hypothesis for this new prediction.\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 200,\n        textAlign: \"center\", lineWidth: 700, lineHeight: 35\n    });\n\n    let image2 = getImageForPrediction(oppositePrediction);\n    image2.set({x: 400, y: 250});\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => nextHypoTask());\n\n    stage.addChild(image1, text1, text2, image2, backButton, nextButton);\n    stage.update();\n}\n\nfunction brmPage() {\n    stage.removeAllChildren();\n\n    let brmBtnClicked = false;\n    let text = new createjs.Text(\n        'Click the \"Go to Background Research website\" button to go to the ' +\n        'Background Research Module. The Background Research Module is where ' +\n        'you will be conducting your research. There is no time limit to this ' +\n        'task. When you are finished with your research, **come back to this ' +\n        'page (the \"ISP Tutor\" tab)**. Then click \"Next\" below to move on to ' +\n        'the next page, where you will make your final hypothesis.',\n        \"24px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 100,\n        textAlign: \"center\", lineWidth: 800, lineHeight: 30\n    });\n\n    let brmButton = createExtraLargeButton(CANVAS_WIDTH * .5,\n                                           CANVAS_HEIGHT * .5 + 50,\n                                           \"Go to\\nBackground\\nResearch\\nwebsite\",\n                                           \"#3769C2\",\n                                           BUTTON_WIDTH * 3,\n                                           BUTTON_HEIGHT * 5,\n                                           \"bold\");\n    brmButton.on(\"click\", e => {\n        // switched from https://go.isptutor.org to window.location.origin\n        // so that it will work both from production website and dev environment\n        // open(\"https://go.isptutor.org/brm/home/index.html\", \"_blank\");\n        open(window.location.origin + \"/brm/home/index.html\", \"_blank\");\n        localStorage.setItem(\"isptutor_brmStartTime\", Date.now());\n        localStorage.setItem(\"isptutor_rq\", getRQ());\n        setTimeout(() => {\n            brmBtnClicked = true;\n            nextButton.enable();\n        }, 20000);\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => {\n        if (!brmBtnClicked) {\n            snackbar.show(\"Please click on the 'Go to Background Research website' button\");\n            nextButton.disable();\n        } else {\n            nextHypoTask();\n        }\n    });\n\n    stage.addChild(text, brmButton, backButton, nextButton);\n    stage.update();\n}\n\nfunction predictionPage2() {\n    stage.removeAllChildren();\n    let secondPredictionSet = secondPrediction !== null;\n    // console.log(`predictionPage2:\n    // secondPrediction: ${secondPrediction}\n    // secondPredictionSet: ${secondPredictionSet}\n    // finalHypoLocked: ${finalHypoLocked}\n    // `);\n    let title = new createjs.Text(\n        \"Make Your General Prediction\", \"bold 24px Arial\", \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: 20, textAlign: \"center\"\n    });\n\n    let text1 = new createjs.Text(\n        \"What do you think now that you've finished your research?\",\n        \"bold 22px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: CANVAS_HEIGHT / 8, textAlign: \"center\"\n    });\n\n    let question = new createjs.Text(\n        \"As \" + iv.toLowerCase() + \" increases, what will happen to the \" +\n        dv.toLowerCase() + \"?\",\n        \"20px Arial\",\n        \"#000\"\n    ).set({\n        x: CANVAS_WIDTH / 2, y: text1.y + 60,\n        textAlign: \"center\", lineWidth: 800, lineHeight: 30\n    });\n\n    let chosenDVDirection;\n    let choice1 = new createjs.Text(\"Increase\", \"20px Arial\", \"#000\").set({\n        x: CANVAS_WIDTH / 2, y: question.y + 120, textAlign: \"center\"\n    });\n\n    let choice2 = new createjs.Text(\"Decrease\", \"20px Arial\", \"#000\").set({\n        x: CANVAS_WIDTH / 2, y: choice1.y + 30, textAlign: \"center\"\n    });\n\n    function setIncreaseColors() {\n        choice1.color = \"#5588EE\";\n        choice2.color = \"#000\";\n    }\n\n    function setDecreaseColors() {\n        choice1.color = \"#000\";\n        choice2.color = \"#5588EE\";\n    }\n\n    if (finalHypoLocked) {\n        // display message and don't add event listeners\n        snackbar.show(\"You have already saved your hypothesis and cannot change your prediction.\");\n    } else {\n        generateHitAreaCenterAlignment(choice1);\n        choice1.on(\"click\", e => {\n            setIncreaseColors();\n            chosenDVDirection = \"increase\";\n        });\n        generateHitAreaCenterAlignment(choice2);\n        choice2.on(\"click\", e => {\n            setDecreaseColors();\n            chosenDVDirection = \"decrease\";\n        });\n    }\n    if (secondPredictionSet) {\n        // set chosenDVDirection to the value of secondPrediction and\n        chosenDVDirection = secondPrediction;\n        // set the choices to the appropriate colors based on the saved value\n        if (\"increase\" === secondPrediction) {\n            setIncreaseColors();\n        } else {\n            setDecreaseColors();\n        }\n    }\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => {\n        if (chosenDVDirection === undefined) {\n            snackbar.show('Please select either \"Increase\" or \"Decrease\".');\n        } else {\n            secondPrediction = chosenDVDirection;\n            logPrediction(\"secondPrediction\", secondPrediction)\n            .then(() => {\n                if (!initialHypoLocked) {\n                    initialHypoLocked = true;\n                    initialHypoLockedReason = \"You have already saved your second prediction.\";\n                }\n                nextHypoTask();\n            })\n            .catch(function(error) {\n                console.error(error);\n            });\n        }\n    });\n\n    stage.addChild(\n        title, text1, question, choice1, choice2, backButton, nextButton\n    );\n    stage.update();\n}\n\nfunction fetchPrevSavedHypo(whichHypo) {\n    let hypoData = null;\n    return db.getUserData()\n    .then((data) => {\n        let hypoData = data[`${whichHypo}Hypo`];\n        return hypoData;\n    })\n    .catch(function (error) {\n        console.log(error);\n        return hypoData;\n    });\n}\n\nfunction initializeConceptMap(whichHypo) {\n    if (!currentHypo || currentHypo !== whichHypo) {\n        currentHypo = whichHypo;\n        steps = [];\n        currentBubbles = [];\n        arrowz = [];\n    }\n}\n\nfunction initialConceptMap() {\n    initializeConceptMap(\"initial\");\n    conceptMapPage(\"initial\", firstPrediction);\n}\n\nfunction oppositeDirectionConceptMap() {\n    initializeConceptMap(\"opposite\");\n    conceptMapPage(\"opposite\",\n                   (firstPrediction === \"increase\") ? \"decrease\" : increase);\n}\n\nfunction finalConceptMap() {\n    initializeConceptMap(\"final\")\n    conceptMapPage(\"final\", secondPrediction);\n}\n\nfunction completePage() {\n    getEleById('completion-overlay').style.display = \"block\";\n    db.saveValue(\"currTutorNdx\", 2)\n    .catch(function(error) {\n        console.error(error);\n    });\n}\n\nfunction initialConceptMapPlaceholder() {\n    stage.removeAllChildren();\n    let image1 = new createjs.Bitmap(queue.getResult(\"cptMapPlaceholder\")).set({\n        x: 50, y: 20, scaleX: 0.2, scaleY: 0.2\n    });\n\n    let backButton = createBackButton();\n    backButton.on(\"click\", e => prevHypoTask());\n\n    let nextButton = createNextButton();\n    nextButton.on(\"click\", e => nextHypoTask());\n\n    stage.addChild(image1, backButton, nextButton);\n}\n\nfunction capitalize(sentence) {\n    const dontCapitalize = [\"and\", \"from\", \"in\", \"of\", \"on\", \"the\"];\n    let words = sentence.split(' ');\n    let newWords = words.map((word) => {\n        if (dontCapitalize.includes(word.toLowerCase())) {\n            return word.toLowerCase();\n        } else {\n            let newWord = word[0].toUpperCase() + word.slice(1);\n            return newWord;\n        }\n    });\n    return newWords.join(' ');\n}\nfunction joinAndCapitalize(sentences) {\n    let newSentences = sentences.map((sentence) => capitalize(sentence));\n    return newSentences.join(\"\\n\\n\");\n}\n\nfunction initConceptsList(list) {\n    list.innerHTML = \"\";\n    // let newNodes = [...nodes].sort();\n    // let captitalized = newNodes.map((node) => capitalize(node));\n    let captitalized = nodes.map((node) => capitalize(node));\n    for (let capCpt of captitalized) {\n        let li = document.createElement(\"li\");\n        li.innerHTML = capCpt;\n        list.appendChild(li);\n    }\n}\n\nfunction notePadPage() {\n    stage.removeAllChildren();\n    let directionsContainer = new createjs.Container().set({\n        x: 0, y: 0\n    });\n    let dirLabel = new createjs.Text(\"Direction:\", \"bold 22px Arial\", \"#FFF\").set({\n        x: 25, y: 10\n    });\n    let dirText = new createjs.Text(\n        \"Before you make your concept map, please take a few minutes to write \" +\n        \"a detailed explanation of how you think \" + iv.toLowerCase() +\n        \" affects the \" + dv.toLowerCase() + \". You can use some of the \" +\n        \"concepts listed below, which you can also use in your concept map.\",\n        \"22px Arial\",\n        \"#FFF\"\n    ).set({\n        x: 140, y: 10, textAlign: \"left\", lineHeight: 24, lineWidth: CANVAS_WIDTH - 170\n    });\n    let dirWidth = CANVAS_WIDTH -20;\n    let dirHeight = dirText.getMeasuredHeight() + 20;\n    let dirBg = new createjs.Shape();\n    dirBg.graphics\n         .setStrokeStyle(1)\n         .beginStroke(\"#2858a9\")\n         .beginFill(\"#2858a9\")\n         .drawRect(0, 0, dirWidth, dirHeight);\n    directionsContainer.addChild(dirBg, dirLabel, dirText);\n\n    let text1 = new createjs.Text(\n        \"The important thing is that your hypothesis makes sense to you. You can \" +\n        \"come back to this page later to make improvements to your hypothesis.\",\n        \"22px Arial\",\n        \"#000\"\n    ).set({\n        x: 140, y: 100, textAlign: \"left\", lineHeight: 24, lineWidth: CANVAS_WIDTH - 170\n    });\n    let lhsOverlay = new createjs.DOMElement(\"notepad_page_lhs_overlay\").set({\n        x: 2 * 2 / PIXEL_RATIO, y: 38 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n\n    let rqBody = document.getElementById(\"notepad_rq_body\");\n    rqBody.innerText = getRQ();\n    let toggleRq = document.getElementById(\"toggle_rq_body\");\n\n    let predBody = document.getElementById(\"notepad_pred_body\");\n    predBody.innerHTML = \"As \" + iv.toLowerCase() + \" <i>(independent variable)</i> \" +\n        \"increases, the \" + dv.toLowerCase() + \" <i>(dependent variable)</i> will \" +\n        secondPrediction + \".\";\n    let togglePred = document.getElementById(\"toggle_pred_body\");\n\n    let cptsList = document.getElementById(\"concepts_list\");\n    initConceptsList(cptsList);\n    let toggleCpts = document.getElementById(\"toggle_concepts_body\");\n\n    let notepad = new createjs.DOMElement(\"notepad_overlay\").set({\n        x: 110 * (2 / PIXEL_RATIO),\n        y: 43 * (2 / PIXEL_RATIO),\n        scaleX: .20 * (2 / PIXEL_RATIO),\n        scaleY: .20 * (2 / PIXEL_RATIO),\n        name: \"notepad\"\n    });\n    let notes = document.getElementById(\"notepad_notes\");\n\n    let backButton = createBackButton();\n    let nextButton = createNextButton();\n\n    // returns click handler closure\n    function toggle(btn) {\n        const toggleIcon = btn.querySelector(\".toggler\");\n        const target = document.getElementById(btn.dataset.target);\n        // console.log(btn, toggleIcon, target);\n        function toggler(e) {\n            target.classList.toggle(\"invisible\");\n            btn.classList.toggle(\"collapsed\");\n            toggleIcon.classList.toggle(\"collapsed\")\n        }\n        return toggler;\n    }\n    const rqToggler = toggle(toggleRq);\n    toggleRq.addEventListener(\"click\", rqToggler);\n\n    const predToggler = toggle(togglePred);\n    togglePred.addEventListener(\"click\", predToggler);\n\n    const cptsToggler = toggle(toggleCpts);\n    toggleCpts.addEventListener(\"click\", cptsToggler);\n\n    function hideDOMOverlays() {\n        toggleRq.removeEventListener(\"click\", rqToggler);\n        togglePred.removeEventListener(\"click\", predToggler);\n        toggleCpts.removeEventListener(\"click\", cptsToggler);\n        hideDOMElement(lhsOverlay);\n        hideDOMElement(notepad);\n    }\n\n    function checkForMinWords() {\n        let retVal = true;\n        let html = notes.innerHTML;\n        let words = getNotepadWords(html);\n        if (words.length < 10) {\n            retVal = false;\n        }\n        return retVal;\n    }\n\n    backButton.on(\"click\", function () {\n        hideDOMOverlays();\n        prevHypoTask();\n    });\n\n    nextButton.on(\"click\", function() {\n        if (checkForMinWords()) {\n            hideDOMOverlays();\n            nextHypoTask();\n        } else {\n            snackbar.show(\"Please use at least 10 words in your hypothesis\");\n        }\n    });\n\n    stage.addChild(\n        directionsContainer,\n        text1,\n        lhsOverlay,\n        notepad,\n        backButton, nextButton\n    );\n    showDOMElement(lhsOverlay);\n    showDOMElement(notepad);\n    stage.update();\n    setTimeout(function() {\n        notes.focus();\n    }, 0);\n}\n\n\nfunction redrawHypo() {\n    for (let bubble of currentBubbles) {\n        stage.addChild(bubble);\n    }\n    for (let arrow of arrowz) {\n        stage.addChild(arrow);\n    }\n}\n\n\nfunction hideDOMElement(ele) {\n    ele.htmlElement.style.display = \"none\";\n}\n\nfunction showDOMElement(ele) {\n    ele.htmlElement.style.display = \"block\";\n}\n\n\nfunction getMenuOptionByValue(menuID, value) {\n    let sel = document.getElementById(menuID);\n    return sel.querySelector(`option[value=\"${value}\"]`);\n}\n\nfunction showMenuOptionWithValue(menuID, value) {\n    let opt = getMenuOptionByValue(menuID, value);\n    if (opt) {\n        opt.classList.remove(\"hidden\");\n    }\n}\n\nfunction hideMenuOptionWithValue(menuID, value) {\n    let opt = getMenuOptionByValue(menuID, value);\n    if (opt) {\n        opt.classList.add(\"hidden\");\n    }\n}\n\nfunction resetSelectDefaultOption(menuID) {\n    let opt = getMenuOptionByValue(menuID, \"\");\n    if (opt) {\n        opt.setAttribute(\"selected\", true);\n    }\n}\n\nfunction initializeConceptsMenu(menu) {\n    menu.innerHTML = \"\"\n    let defaultOpt = document.createElement(\"option\");\n    defaultOpt.value = \"\";\n    defaultOpt.innerText = \" Select a Concept to Add \";\n    defaultOpt.setAttribute(\"selected\", true);\n    defaultOpt.setAttribute(\"disabled\", true);\n    defaultOpt.setAttribute(\"hidden\", true);\n    menu.appendChild(defaultOpt);\n    // for (let node of [...nodes].sort()) {\n    for (let node of nodes) {\n        let opt = document.createElement(\"option\");\n        opt.value = node;\n        opt.innerText = ` ${node} `;\n        menu.appendChild(opt);\n    }\n    // updateConceptsMenu\n}\n\nfunction hideAllMenuOptions(menu) {\n    for (let option of menu.querySelectorAll(\"option\")) {\n        if (\"\" === option.value) {\n            continue;\n        }\n        option.classList.add(\"hidden\");\n    }\n}\n\nfunction updateConceptsMenu(menu) {\n    let currCpts = currentBubbles.map((bub) => bub.text);\n    for (let option of menu.querySelectorAll(\"option\")) {\n        if (\"\" === option.value) {\n            continue;\n        }\n        if (currCpts.includes(option.value)) {\n            option.classList.add(\"hidden\");\n        } else {\n            option.classList.remove(\"hidden\");\n        }\n    }\n}\n\nfunction rehydrateHypothesis(hypoData, prediction) {\n    // clear and repopulate currentBubbles and arrowz from what is\n    // in the db\n    currentBubbles = [];\n    arrowz = [];\n    ivBubble = createFixedBubble(\n        IV_X, IV_Y, capitalizeFirstLetter(iv), \"increase\", false\n    );\n    // ivBubble.disable();\n    dvBubble = createFixedBubble(\n        DV_X, DV_Y, capitalizeFirstLetter(dvabb), prediction, true\n    );\n    // dvBubble.disable();\n    arrow = createUnlabeledArrow(ivBubble.x + BUBBLE_WIDTH / 2,\n        ivBubble.y,\n        dvBubble.x - BUBBLE_WIDTH / 2,\n        dvBubble.y);\n    currentBubbles.push(ivBubble);\n    currentBubbles.push(dvBubble);\n    arrowz.push(arrow);\n    // stage.addChild(ivBubble, dvBubble, arrow);\n    let nonFixedBubs = hypoData.concepts.filter(\n        (bub) => bub.isFixed === false\n    );\n    console.log(\"nonFixed bubs\", nonFixedBubs);\n    nonFixedBubs.forEach((bub) => {\n        let nfb = createDeletableBubble(\n            bub.x, bub.y, bub.text, bub.direction\n        );\n        currentBubbles.push(nfb);\n        // stage.add(nfb);\n        // nfb.disable();\n    });\n    hypoData.arrows.forEach((arr) => {\n        let fromBubs = currentBubbles.filter((bub) => bub.text === arr.from);\n        let toBubs = currentBubbles.filter((bub) => bub.text === arr.to);\n        if (fromBubs.length !== 1 || toBubs.length !== 1) {\n            console.log(\"fromBubs, toBubs\", fromBubs, toBubs);\n        } else {\n            let oConn = fromBubs[0].outConnector;\n            let iConn = toBubs[0].inConnector;\n            if (!oConn || !iConn) {\n                console.log(\"oConn, iConn\", oConn, iConn)\n            } else {\n\n                let [startX, startY] = getOutConnectorCoords(oConn);\n                let [endX, endY] = getInConnectorCoords(iConn);\n                let arrow = createArrow(\n                    startX, startY, endX, endY, arr.label\n                );\n                iConn.arrow = arrow;\n                oConn.arrow = arrow;\n                // stage.add(arrow);\n                arrowz.push(arrow);\n            }\n        }\n    });\n    console.log(currentBubbles);\n    console.log(arrowz);\n}\n\nfunction conceptMapPage(whichHypo, prediction)\n{\n    stage.removeAllChildren();\n    let hypoSaved = false;\n    let ivBubble, dvBubble, arrow, showHelp;\n    // set a white background to the stage so it isn't transparent when\n    // we take an image of it\n    let bg = new createjs.Shape();\n    bg.graphics\n      .setStrokeStyle(1)\n      .beginStroke(\"#FFF\")\n      .beginFill(\"#FFF\")\n      .drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    // add this to the stage immediately, so it literally is in the background\n    stage.addChild(bg);\n\n    // gray background which we place on top of everything (other than\n    // DOM Elements) when displaying a modal.  I had to set mouseEnabled\n    // to true, and setup a noop click handler so that it actually prevents\n    // stage elements from still being interactive\n    let modalBg = new createjs.Shape();\n    modalBg.graphics\n        .setStrokeStyle(1)\n        .beginStroke(\"#000\")\n        .beginFill(\"#000\")\n        .drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    modalBg.alpha = 0.02;\n    modalBg.mouseEnabled = true;\n\n    let lightBulb = new createjs.Bitmap(queue.getResult(\"lightbulb\")).set({\n        x: 10, y: 10, scaleX: 0.5, scaleY: 0.5\n    });\n\n    let remindersTxt = new createjs.Text(\n        \"NOTE: ONLY include the concepts which you think are MOST closely related \" +\n        \"to each other in your concept map.\\n\" +\n        \"You may only need to add one or two concepts to explain the \" +\n        \"relationship between the independent and dependent variables.\",\n        \"16px Arial\",\n        \"#000\"\n    ).set({\n        x: 80, y: 10, textAlign: \"left\", lineHeight: 25\n    });\n\n    let showHelpButton = createTextWidthButton(\n        CANVAS_WIDTH - 140, 35, \" Show Help \", BUTTON_COLOR\n    );\n\n    const conceptsMenuId = \"concepts_menu\";\n    let conceptsMenu = document.getElementById(conceptsMenuId);\n    let conceptsDropDown = new createjs.DOMElement(\"concepts_menu_overlay\").set({\n        x: 100 * 2 / PIXEL_RATIO,\n        y: 20 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO,\n        scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n\n    let help = new createjs.DOMElement(\"combined_cpt_map_help\").set({\n        x: 70 * 2 / PIXEL_RATIO, y: 30 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    });\n    let modalProps = {\n        x: 90 * 2 / PIXEL_RATIO, y: 60 * 2 / PIXEL_RATIO,\n        scaleX: 0.2 * 2 / PIXEL_RATIO, scaleY: 0.2 * 2 / PIXEL_RATIO\n    };\n    let saveWarning = new createjs.DOMElement(\"save_concept_map_warning\").set(modalProps);\n    let notepadPaste = new createjs.DOMElement(\"notepad_paste\").set(modalProps);\n    let drawCptMap = new createjs.DOMElement(\"draw_cpt_map\").set(modalProps);\n    let goHome = new createjs.DOMElement(\"completion_overlay\").set(modalProps);\n\n    let dismissHelp = document.getElementById(\"dismiss_cpt_map_help\");\n    let helpContents = document.getElementById(\"cpt_map_help_contents\")\n    let dismissNotepadPaste = document.getElementById(\"dismiss_notepad_paste\");\n    let dismissDrawCptMap = document.getElementById(\"dismiss_draw_cpt_map\");\n    let cancelSaveBtn = document.getElementById(\"cpt_map_cancel_save\");\n    let saveBtn = document.getElementById(\"cpt_map_save\");\n    let backButton = createBackButton();\n    let nextButton = createNextButton();\n\n\n    // event handlers and other functions\n    function noop(e) {\n        return;\n    }\n\n    function disableElements() {\n        currentBubbles.forEach((bub) => bub.disable());\n        arrowz.forEach((arr) => arr.disable());\n        conceptsMenu.setAttribute(\"disabled\", true);\n        // verifyButton.disable();\n        nextButton.disable();\n        backButton.disable();\n        showHelpButton.disable();\n        stage.update();\n    }\n\n    function enableElements() {\n        currentBubbles.forEach((bub) => bub.enable());\n        arrowz.forEach((arr) => arr.enable());\n        conceptsMenu.removeAttribute(\"disabled\");\n        // verifyButton.enable();\n        nextButton.enable();\n        backButton.enable();\n        showHelpButton.enable();\n        stage.update();\n    }\n\n    function showModal(modal) {\n        disableElements();\n        stage.addChild(modalBg);\n        stage.update();\n        showDOMElement(modal);\n    }\n\n    function hideModal(modal) {\n        hideDOMElement(modal);\n        enableElements();\n        stage.removeChild(modalBg);\n        stage.update();\n    }\n\n    function displayHelp(e) {\n        // delays the disabling of ui elements by 1/2 second to\n        // avoid race condition where 'show help' button reverts\n        // back to alpha 1 (when the \"hover\" state ends) which\n        // occurs *after* we disable the button (which had already set it's\n        // alpha to 0.5)\n        setTimeout(function() {\n            showModal(help);\n            // slide scroll bar to top of scrolling div\n            helpContents.scrollTop = 0;\n        }, 500);\n    }\n\n    function hideHelp() {\n        hideModal(help);\n    }\n\n    function showSaveWarning() {\n        showModal(saveWarning);\n    }\n\n    function showPasteNotes() {\n        // grabs the html from the notePadPage's notebook, munges it a bit\n        // so that it's text, and display it in a div in the notpadPaste modal\n        let npn = document.getElementById(\"notepad_notes\");\n        let cht = document.getElementById(\"current_hypo_text\");\n        let hypoText = notepadHtmlAsText(npn.innerHTML);\n        cht.innerText = wrapText(hypoText, 40);\n        showModal(notepadPaste);\n    }\n\n    function hidePasteNotes() {\n        hideModal(notepadPaste);\n        showModal(drawCptMap);\n    }\n\n    function hideDrawCptMap() {\n        // called when user clicks 'Download' button\n        // hides the modal and then creates an image (as a blob) of the\n        // canvas, and downloads it as a file \"concept_map.png\"\n        hideModal(drawCptMap);\n        let link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        link.download = \"concept_map.png\";\n        let cvs = stage.canvas;\n        cvs.toBlob(function (blob) {\n            link.href = URL.createObjectURL(blob);\n            link.click();\n            setTimeout(function() {\n                leavePage();\n            }, 500);\n        });\n    }\n\n    function hideSaveWarning() {\n        hideModal(saveWarning);\n    }\n\n    function selectConceptHandler(e) {\n        let value = e.target.value;\n        let bubble = createDeletableBubble(\n            CANVAS_WIDTH / 2 + ((currentBubbles.length - 2) * 15),\n            CANVAS_HEIGHT / 2 + ((currentBubbles.length - 2) * 15),\n            value, \"none\");\n        bubble.idx = nodes.indexOf(value);\n        steps.push({\n            action: \"NODE_CREATE\",\n            object: nodes[bubble.idx],\n            index: bubble.idx,\n            info: \"N/A\",\n            timestamp: (new Date()).toLocaleDateString()\n        });\n        bubble.closeButton.on(\"click\", e => {\n            for (let child of bubble.children) {\n                if ((child.name === \"inConnector\") ||\n                    (child.name === \"outConnector\")) {\n                    removeArrowAndLabel(child.arrow);\n                }\n            }\n            stage.removeChild(bubble);\n            steps.push({\n                action: \"NODE_DELETE\",\n                object: nodes[bubble.idx],\n                index: bubble.idx,\n                info: \"N/A\",\n                timestamp: (new Date()).toLocaleString()\n            });\n            let tmp = currentBubbles.find((ele) => ele === bubble);\n            if (tmp) {\n                currentBubbles = currentBubbles.filter((ele) => ele !== tmp);\n                updateConceptsMenu(conceptsMenu)\n            }\n        });\n        currentBubbles.push(bubble);\n        updateConceptsMenu(conceptsMenu);\n        conceptsMenu.value = \"\";\n        stage.addChild(bubble);\n    }\n\n    function saveHandler() {\n        hideSaveWarning();\n        logData(ivBubble, whichHypo);\n        hypoSaved = true;\n        if (\"initial\" === whichHypo) {\n            firstPredictionLocked = true;\n            firstPredictionLockedReason = \"You have already saved your hypothesis.\"\n        } else if (\"final\" === whichHypo) {\n            secondPredictionLocked = true;\n            secondPredictionLockedReason = \"You have already saved your hypothesis.\"\n        }\n        showPasteNotes();\n    }\n\n    function dealWithDOMElements() {\n        conceptsMenu.removeEventListener(\"change\", selectConceptHandler);\n        saveBtn.removeEventListener(\"click\", saveHandler);\n        cancelSaveBtn.removeEventListener(\"click\", hideSaveWarning);\n        dismissHelp.removeEventListener(\"click\", hideHelp);\n        hideDOMElement(help);\n        hideDOMElement(conceptsDropDown);\n        hideDOMElement(saveWarning);\n    }\n\n    function backButtonHandler(e) {\n        dealWithDOMElements();\n        prevHypoTask();\n    }\n\n    function leavePage() {\n        disableElements();\n        dealWithDOMElements();\n        // add background for 'home' modal\n        stage.addChild(modalBg);\n        showDOMElement(goHome);\n        // don't got to complete page\n        // nextHypoTask();\n\n    }\n    function nextButtonHandler(e) {\n        if (!hypoSaved) {\n            if (verifyConceptMap(ivBubble)) {\n                showSaveWarning();\n            }\n        } else {\n            leavePage();\n        }\n    }\n    // event handler registration\n    dismissHelp.addEventListener(\"click\", hideHelp);\n    dismissNotepadPaste.addEventListener(\"click\", hidePasteNotes);\n    dismissDrawCptMap.addEventListener(\"click\", hideDrawCptMap);\n    cancelSaveBtn.addEventListener('click', hideSaveWarning);\n    saveBtn.addEventListener(\"click\", saveHandler);\n    showHelpButton.addEventListener(\"click\", displayHelp);\n    backButton.on(\"click\", backButtonHandler);\n    nextButton.on(\"click\", nextButtonHandler);\n    conceptsMenu.addEventListener(\"change\", selectConceptHandler);\n\n    initializeConceptsMenu(conceptsMenu);\n    showDOMElement(conceptsDropDown);\n    stage.addChild(\n        lightBulb,\n        remindersTxt,\n        showHelpButton,\n        conceptsDropDown,\n        backButton, nextButton,\n        help, saveWarning, notepadPaste, drawCptMap\n    );\n\n    stage.on(\"stagemouseup\", removePanel);\n    stage.update();\n    fetchPrevSavedHypo(whichHypo)\n        .then((hypoData) => {\n            if (null !== hypoData) {\n                hypoSaved = true;\n                snackbar.show(\"Your hypothesis has already been saved. You can not make any changes.\");\n                rehydrateHypothesis(hypoData, prediction);\n                redrawHypo();\n                disableElements();\n                backButton.enable();\n                nextButton.enable();\n            } else if (currentBubbles.length === 0) {\n                console.log()\n                ivBubble = createFixedBubble(\n                    IV_X, IV_Y, capitalizeFirstLetter(iv), \"increase\", false\n                );\n                dvBubble = createFixedBubble(\n                    DV_X, DV_Y, capitalizeFirstLetter(dvabb), prediction, true\n                );\n                arrow = createUnlabeledArrow(ivBubble.x + BUBBLE_WIDTH / 2,\n                    ivBubble.y,\n                    dvBubble.x - BUBBLE_WIDTH / 2,\n                    dvBubble.y);\n                currentBubbles.push(ivBubble);\n                currentBubbles.push(dvBubble);\n                arrowz.push(arrow);\n                stage.addChild(ivBubble, dvBubble, arrow);\n            } else {\n                redrawHypo();\n                ivBubble = currentBubbles.filter(\n                    (bub) => bub.text.toLowerCase() === iv.toLowerCase()\n                )[0];\n                dvBubble = currentBubbles.filter(\n                    (bub) => bub.text.toLowerCase() === dvabb.toLowerCase()\n                )[0];\n                // in case user has gone back to the prediction page and changed it\n                let dvDirButton = dvBubble.dirButton;\n                let dvDirection = dvDirButton.direction;\n                if (dvDirection !== prediction) {\n                    drawDirButton(\n                        dvDirButton, dvDirButton.x, dvDirButton.y, prediction, dvDirButton.color\n                    );\n                    dvDirButton.mouseEnabled = false;\n                }\n                updateConceptsMenu(conceptsMenu);\n            }    })\n        .catch(function (error) {\n            console.error(error);\n        });\n}\n\n\n// random utility function to capitalize first letter and make rest lower case\nfunction capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\n// ============================================================================\n// ============================= Handle Overs =================================\n// ============================================================================\n\nfunction handleMouseOver(event) {\n    if (event.type == \"mouseover\") {\n        event.target.alpha = .5;\n        somethingHighlighted = true;\n    } else {\n        event.target.alpha = 1;\n        somethingHighlighted = false;\n    }\n}\n\nfunction handlePanelOver(event) {\n    if (event.type === \"mouseover\") {\n        event.target.alpha = .5;\n    } else {\n        event.target.alpha = 1;\n    }\n\n}\n\nfunction handleConnectorOver(event) {\n    if (event.type === \"mouseover\") {\n        event.target.alpha = .5;\n        // connectorOver = event.target;\n        // console.info(\"connOver:\");\n        // console.info(connectorOver);\n    } else {\n        event.target.alpha = 1;\n        // connectorOver = null;\n    }\n}\n\nfunction getInConnectorAtPoint(x, y) {\n    let retVal = null;\n    let objs = stage.getObjectsUnderPoint(x, y).filter((obj) => obj.name === \"inConnector\");\n    if (objs.length === 1) {\n        retVal = objs[0];\n    }\n    return retVal;\n}\n// =============================================================================\n// ============================= Handle Clicks =================================\n// =============================================================================\n\nfunction handleClick(event) {\n    alert(event.target.text);\n}\n\nfunction handleArrowClick(event) {\n    // console.log(event.target);\n    panel = createDeletePanel(event.stageX / scalingRatio,\n                              event.stageY / scalingRatio,\n                              event.target.parent);\n    stage.addChild(panel)\n    stage.update();\n}\n\nfunction handleDirectionClick(event) {\n    console.log(event.target);\n    panel = createDirectionPanel(event.stageX / scalingRatio,\n                                 event.stageY / scalingRatio,\n                                 event.target);\n    stage.addChild(panel);\n    stage.update();\n\n}\n\nfunction handleExplanationClick(event) {\n    panel = createExplanationPanel(event.stageX / scalingRatio,\n                                   event.stageY / scalingRatio,\n                                   event.target.parent.label);\n    stage.addChild(panel);\n    stage.update();\n}\n\nfunction handleCauseClick(x, y, target) {\n    panel = createCausePanel(x, y, target);\n    stage.addChild(panel);\n    stage.update();\n}\n\nfunction getNotepadWords(notePadHtml) {\n    let text = notepadHtmlAsText(notePadHtml);\n    let words = text.split(/\\s+/).filter((word) => word !== \"\");\n    return words;\n}\n\nfunction notepadHtmlAsText(notePadHtml) {\n    let text = notePadHtml.toString();\n    text = text.replace(/&nbsp;/g, \"\");\n    text = text.replace(/<div>/g, \"\");\n    text = text.replace(/<\\/div>/g, \" \");\n    text = text.replace(/<br>/g, \"\\n\");\n    return text;\n}\n\nfunction wrapText(text, maxWidth) {\n    return text.replace(\n        new RegExp(`(?![^\\\\n]{1,${maxWidth}}$)([^\\\\n]{1,${maxWidth}})\\\\s`,\n                  'g'),\n        '$1\\n'\n    );\n}\n\nfunction verifyConceptMap(ivBubble) {\n    let isGood = true;\n    // check that their written hypothesis has at least 10 words\n    let notepad = document.getElementById(\"notepad_notes\");\n    let notes = notepad.innerHTML;\n    let words = getNotepadWords(notes);\n    if (words.length < 10) {\n        snackbar.show(\n            \"Please go back to the previous page and make sure you have a \" +\n            \"minimum of 10 words in your written hypothesis\"\n        );\n        return false;\n    }\n    // checking at least one intermediate bubble\n    if (currentBubbles.length < 3) {\n        snackbar.show(\"Please add at least one intermediate bubble.\");\n        return false;\n    }\n    // checking everything is labeled\n    for (let i = 0; i < stage.numChildren; i++) {\n        let child = stage.getChildAt(i);\n        // checking that a bubble has a direction if it is connected\n        if (child.name === \"bubble\") {\n            let dirButton = child.getChildByName(\"dirButton\");\n            let connected = false;\n            for (let bubbleChild of child.children) {\n                if ((bubbleChild.name === \"inConnector\" ||\n                     bubbleChild.name === \"outConnector\") &&\n                    bubbleChild.arrow != null) {\n                    connected = true;\n                    break;\n                }\n            }\n            if (dirButton.children.length === 1 && connected) {\n                drawDirButton(\n                    dirButton, dirButton.x, dirButton.y, dirButton.direction, \"red\"\n                );\n                isGood = false;\n            }\n        }\n        // checking that arrows are properly labeled\n        else if (child.name === \"arrow\") {\n            child.label.color = \"#000\";\n            if (child.label.text === \"Add label\") {\n                child.label.color = \"red\";\n                isGood = false;\n            }\n        }\n    }\n\n    if (!isGood) {\n        snackbar.show(\"Please make sure that everything is labeled properly.\");\n        return isGood;\n    }\n    // checking connectivity\n    let connector = ivBubble.outConnector;\n    while (connector != null) {\n        if (connector.arrow == null) {\n            snackbar.show(\"Please make sure that all of the bubbles are connected.\");\n            isGood = false;\n            return isGood;\n        }\n        let nextBubble = connector.arrow.connectorOver.parent;\n        connector = nextBubble.outConnector;\n    }\n    if (ivBubble.outConnector.arrow.connectorOver.parent.outConnector === null) {\n        snackbar.show(\"Please add at least one intermediate bubble.\");\n        isGood = false;\n        return isGood;\n    }\n    return isGood;\n}\n\nfunction removePanel(event) {\n    //console.log(event.stageX);\n    stage.removeChild(panel);\n    stage.update();\n}\n\n\n// =============================================================================\n// ================================== Hit Area =================================\n// =============================================================================\n\nfunction generateHitArea(text) {\n    let hit = new createjs.Shape();\n    let bounds = text.getBounds();\n    hit.graphics.beginFill(\"#000\").drawRect(0, 0, bounds.width, bounds.height);\n    text.hitArea = hit;\n    text.cursor = \"pointer\";\n    text.on(\"mouseover\", handleMouseOver);\n    text.on(\"mouseout\", handleMouseOver);\n}\n\nfunction generateHitAreaCenterAlignment(text) {\n    let hit = new createjs.Shape();\n    let bounds = text.getBounds();\n    hit.graphics.beginFill(\"#000\").drawRect(0, 0, bounds.width, bounds.height);\n    hit.x = -1 * bounds.width / 2;\n    hit.y = 0;\n    text.hitArea = hit;\n    text.cursor = \"pointer\";\n    text.on(\"mouseover\", handleMouseOver);\n    text.on(\"mouseout\", handleMouseOver);\n}\n\n\n// =============================================================================\n// ============================== Connectors ===================================\n// =============================================================================\n\nfunction getOutConnectorCoords(conn) {\n    let x, y;\n    if (conn.parent.isFixed) {\n        x = conn.parent.x;\n        y = conn.parent.y - (BUBBLE_HEIGHT / 2)\n    } else {\n        x = conn.parent.x + (BUBBLE_WIDTH / 2);\n        y = conn.parent.y;\n    }\n    return [x, y];\n}\nfunction getInConnectorCoords(conn) {\n    let x, y;\n    if (conn.parent.isFixed) {\n        x = conn.parent.x;\n        y = conn.parent.y - (BUBBLE_HEIGHT / 2);\n    } else {\n        x = conn.parent.x - (BUBBLE_WIDTH / 2);\n        y = conn.parent.y;\n    }\n    return [x, y];\n}\n\nfunction createInConnector(x, y) {\n    let connector = new createjs.Shape();\n    connector\n        .graphics\n        .setStrokeStyle(2)\n        .beginStroke(\"#000\")\n        .beginFill(\"#FFFFFF\")\n        .drawCircle(0, 0, CONNECTOR_RADIUS);\n    connector.x = x;\n    connector.y = y;\n    connector.cursor = \"pointer\";\n    connector.name = \"inConnector\";\n    connector.arrow = null;\n\n    connector.on(\"mouseover\", handleConnectorOver);\n    connector.on(\"mouseout\", handleConnectorOver);\n    connector.on(\"mousedown\", e => {\n        snackbar.show(\n            \"Make sure that you are dragging from a black circle to a white circle.\"\n        );\n    });\n\n    return connector;\n}\n\n\nfunction createOutConnector(x, y) {\n    let connector = new createjs.Shape();\n    connector.graphics.beginFill(\"#000\").drawCircle(0, 0, CONNECTOR_RADIUS);\n    connector.x = x;\n    connector.y = y;\n    connector.cursor = \"pointer\";\n    connector.name = \"outConnector\";\n    connector.arrow = null;\n    connector.on(\"mousedown\", function (e) {\n        // Create a new arrow on stage press\n        console.log(`e.stage(x,y):(${e.stageX},${e.stageY}) stage.mouse(x,y): (${stage.mouseX},${stage.mouseY})`);\n        // currentArrow = createArrow(stage.mouseX / scalingRatio,\n        //                            stage.mouseY / scalingRatio,\n        //                            stage.mouseX / scalingRatio,\n        //                            stage.mouseY / scalingRatio,\n        //                            \"Add label\");\n        currentArrow = createArrow(e.stageX / scalingRatio,\n                                   e.stageY / scalingRatio,\n                                   e.stageX / scalingRatio,\n                                   e.stageY / scalingRatio,\n                                   \"Add label\");\n        stage.addChild(currentArrow);\n        // Update the current arrow on move\n        let moveListener = stage.on(\"stagemousemove\", function (e) {\n            // drawArrow(currentArrow,\n            //           currentArrow.x,\n            //           currentArrow.y,\n            //           stage.mouseX / scalingRatio,\n            //           stage.mouseY / scalingRatio,\n            //           \"Add label\");\n            drawArrow(currentArrow,\n                currentArrow.x,\n                currentArrow.y,\n                e.stageX / scalingRatio,\n                e.stageY / scalingRatio,\n                \"Add label\");\n            stage.update();\n        });\n        // Stop the drag\n        let upListener = stage.on(\"stagemouseup\", function (e) {\n            let cx = e.stageX / scalingRatio;\n            let cy = e.stageY / scalingRatio;\n            let connectorOver = getInConnectorAtPoint(cx, cy);\n            stage.off(\"stagemousemove\", moveListener);\n            stage.off(\"stagemouseup\", upListener);\n            if (connectorOver === null ||\n                connectorOver.name != \"inConnector\" ||\n                connectorOver.parent === connector.parent) {\n                removeArrowAndLabel(currentArrow);\n                console.log(\"failed:\");\n                console.log(connectorOver);\n            } else {\n                // attach the new arrow\n                let line = currentArrow.line;\n                line.on(\"click\", handleArrowClick);\n                line.on(\"mouseover\", handleMouseOver);\n                line.on(\"mouseout\", handleMouseOver);\n                line.cursor = \"pointer\";\n                removeArrowAndLabel(connector.arrow);\n                removeArrowAndLabel(connectorOver.arrow);\n                currentArrow.connector = connector;\n                currentArrow.connectorOver = connectorOver;\n                connector.arrow = currentArrow;\n                connectorOver.arrow = currentArrow;\n                steps.push({\n                    action: \"ARROW_CREATE\",\n                    object: nodes[connector.parent.idx] + \"::\" + nodes[connectorOver.parent.idx],\n                    index: connector.parent.idx + \"::\" + connectorOver.parent.idx,\n                    info: \"N/A\",\n                    timestamp: (new Date()).toLocaleString()\n                });\n                arrowz.push(currentArrow);\n            }\n            currentArrow = null;\n        });\n    });\n    connector.on(\"mouseover\", handleConnectorOver);\n    connector.on(\"mouseout\", handleConnectorOver);\n    return connector;\n}\n\n\n// =============================================================================\n// ============================== Bubbles ======================================\n// =============================================================================\n\nfunction createDeletableBubble(x, y, text, direction) {\n    let background = new createjs.Shape();\n    background\n        .graphics\n        .setStrokeStyle(1)\n        .beginStroke(\"#000\")\n        .beginFill(BUBBLE_COLOR)\n        .drawRoundRect(0, 0, BUBBLE_WIDTH, BUBBLE_HEIGHT, BUBBLE_RADIUS);\n\n    let label = new createjs.Text(text, \"16px Arial\", \"#FFFFFF\").set({\n        x: BUBBLE_WIDTH / 2, lineWidth: BUBBLE_WIDTH - 10,\n        textAlign: \"center\", textBaseline: \"top\",\n    });\n    label.y = (BUBBLE_HEIGHT / 2 - label.getMeasuredHeight() / 2) -7;\n\n    let closeBtnSize = 25;\n    let closeButton = createCloseButton(BUBBLE_WIDTH -5, 0, closeBtnSize);\n\n    let dirButton = createDirButton(BUBBLE_WIDTH / 2,\n                                    BUBBLE_HEIGHT * .78,\n                                    direction,\n                                    \"#FFFFFF\",\n                                    false);\n\n    let leftConnector = createInConnector(0, BUBBLE_HEIGHT / 2);\n    let rightConnector = createOutConnector(BUBBLE_WIDTH, BUBBLE_HEIGHT / 2);\n\n    let bubble = new createjs.Container();\n    bubble.x = x;\n    bubble.y = y;\n    bubble.name = \"bubble\";\n    bubble.text = text;\n    bubble.isFixed = false;\n    bubble.isDV = false;\n    // this sets the registration point\n    bubble.regX = BUBBLE_WIDTH / 2;\n    bubble.regY = BUBBLE_HEIGHT / 2;\n    bubble.inConnector = leftConnector;\n    bubble.outConnector = rightConnector;\n    bubble.closeButton = closeButton;\n    bubble.addChild(\n        background, label, dirButton, leftConnector, rightConnector, closeButton\n    );\n    // bubble.addChild(\n    //     leftConnector, rightConnector, background, label, dirButton, closeButton\n    // );\n    // so bubble can be dragged\n    bubble.on(\"pressmove\", function (event) {\n        let mouseX = event.stageX / scalingRatio;\n        let mouseY = event.stageY / scalingRatio;\n        // if mouse is touching the very edge of the side, don't drag the bubble\n        if (Math.abs(mouseX - event.currentTarget.x) > BUBBLE_WIDTH / 2 - CONNECTOR_RADIUS)\n            return;\n        if (Math.abs(mouseY - event.currentTarget.y) > BUBBLE_HEIGHT / 2 - CONNECTOR_RADIUS)\n            return;\n        // if there is an arrow being dragged around\n        if (currentArrow != null)\n            return;\n        // check if something highlighted\n        if (somethingHighlighted)\n            return;\n        // currentTarget will be the container that the event listener was added to:\n        event.currentTarget.x = mouseX;\n        event.currentTarget.y = mouseY;\n        // change the arrows\n        let leftArrow = leftConnector.arrow;\n        let rightArrow = rightConnector.arrow;\n        if (leftArrow != null) {\n            drawArrow(leftArrow,\n                      leftArrow.x,\n                      leftArrow.y,\n                      mouseX - BUBBLE_WIDTH / 2,\n                      mouseY,\n                      leftArrow.label.text)\n        }\n        if (rightArrow != null) {\n            drawArrow(rightArrow,\n                      mouseX + BUBBLE_WIDTH / 2,\n                      mouseY,\n                      rightArrow.endX,\n                      rightArrow.endY,\n                      rightArrow.label.text);\n        }\n        // make sure to redraw the stage to show the change:\n        stage.update();\n    });\n    bubble.disable = () => {\n        bubble.alpha = 0.5;\n        bubble.mouseEnabled = false;\n    };\n    bubble.enable = () => {\n        bubble.alpha = 1.0;\n        bubble.mouseEnabled = true;\n    }\n\n    return bubble;\n}\n\nfunction createBubble(x, y, text, color, direction) {\n    let background = new createjs.Shape();\n    background\n        .graphics\n        .setStrokeStyle(1)\n        .beginStroke(\"#000\")\n        .beginFill(color)\n        .drawRoundRect(0, 0, BUBBLE_WIDTH, BUBBLE_HEIGHT, BUBBLE_RADIUS);\n\n    let label = new createjs.Text(text, \"16px Arial\", \"#FFFFFF\").set({\n        x: BUBBLE_WIDTH / 2, lineWidth: BUBBLE_WIDTH - 10,\n        textAlign: \"center\", textBaseline: \"top\"\n    });\n    label.y = BUBBLE_HEIGHT / 2 - label.getMeasuredHeight() / 2;\n\n    let dirButton = createDirButton(BUBBLE_WIDTH / 2,\n                                    BUBBLE_HEIGHT * .78,\n                                    direction,\n                                    \"#FFFFFF\",\n                                    false);\n\n    let leftConnector = createInConnector(0, BUBBLE_HEIGHT / 2);\n    let rightConnector = createOutConnector(BUBBLE_WIDTH, BUBBLE_HEIGHT / 2);\n\n    let bubble = new createjs.Container();\n    bubble.x = x;\n    bubble.y = y;\n    bubble.name = \"bubble\";\n    bubble.text = text;\n    bubble.isFixed = false;\n    bubble.isDV = false;\n    // this sets the registration point\n    bubble.regX = BUBBLE_WIDTH / 2;\n    bubble.regY = BUBBLE_HEIGHT / 2;\n    bubble.inConnector = leftConnector;\n    bubble.outConnector = rightConnector;\n    bubble.addChild(background, label, dirButton, leftConnector, rightConnector);\n    // so bubble can be dragged\n    bubble.on(\"pressmove\", function (event) {\n        let mouseX = event.stageX / scalingRatio;\n        let mouseY = event.stageY / scalingRatio;\n        // if mouse is touching the very edge of the side, don't drag the bubble\n        if (Math.abs(mouseX - event.currentTarget.x) > BUBBLE_WIDTH / 2 - CONNECTOR_RADIUS)\n            return;\n        if (Math.abs(mouseY - event.currentTarget.y) > BUBBLE_HEIGHT / 2 - CONNECTOR_RADIUS)\n            return;\n        // if there is an arrow being dragged around\n        if (currentArrow != null)\n            return;\n        // check if something highlighted\n        if (somethingHighlighted)\n            return;\n        // currentTarget will be the container that the event listener was added to:\n        event.currentTarget.x = mouseX;\n        event.currentTarget.y = mouseY;\n        // change the arrows\n        let leftArrow = leftConnector.arrow;\n        let rightArrow = rightConnector.arrow;\n        if (leftArrow != null) {\n            drawArrow(leftArrow,\n                      leftArrow.x,\n                      leftArrow.y,\n                      mouseX - BUBBLE_WIDTH / 2,\n                      mouseY,\n                      leftArrow.label.text)\n        }\n        if (rightArrow != null) {\n            drawArrow(rightArrow,\n                      mouseX + BUBBLE_WIDTH / 2,\n                      mouseY,\n                      rightArrow.endX,\n                      rightArrow.endY,\n                      rightArrow.label.text);\n        }\n\n        // make sure to redraw the stage to show the change:\n        stage.update();\n    });\n\n    return bubble;\n}\n\nfunction createFixedBubble(x, y, text, direction, isDV) {\n    let background = new createjs.Shape();\n    background\n        .graphics\n        .setStrokeStyle(1)\n        .beginStroke(\"#000\")\n        .beginFill(FIXED_BUBBLE_COLOR)\n        .drawRoundRect(0, 0, BUBBLE_WIDTH, BUBBLE_HEIGHT, BUBBLE_RADIUS);\n\n    let label = new createjs.Text(text, \"16px Arial\", \"#FFFFFF\").set({\n        x: BUBBLE_WIDTH / 2, lineWidth: BUBBLE_WIDTH - 10,\n        textAlign:\"center\", textBaseline: \"top\"\n    });\n    label.y = BUBBLE_HEIGHT / 2 - label.getMeasuredHeight() / 2;\n\n    let topConnector;\n    let dirButton;\n    let bubble = new createjs.Container();\n    if (isDV) {\n        topConnector = createInConnector(BUBBLE_WIDTH / 2, 0);\n        dirButton = createDirButton(BUBBLE_WIDTH / 2,\n                                    BUBBLE_HEIGHT * .8,\n                                    direction,\n                                    \"#FFFFFF\",\n                                    false);\n        bubble.inConnector = topConnector;\n        bubble.outConnector = null;\n        bubble.idx = -1;\n    } else {\n        topConnector = createOutConnector(BUBBLE_WIDTH / 2, 0);\n        dirButton = createDirButton(BUBBLE_WIDTH / 2,\n                                    BUBBLE_HEIGHT * .8,\n                                    direction,\n                                    \"#FFFFFF\",\n                                    true);\n        bubble.inConnector = null;\n        bubble.outConnector = topConnector;\n        bubble.idx = -2;\n    }\n\n    bubble.x = x;\n    bubble.y = y;\n    bubble.name = \"bubble\"\n    bubble.dirButton = dirButton;\n    // bubble.name = \"fixed bubble\";\n    bubble.text = text;\n    bubble.isFixed = true;\n    bubble.isDV = isDV;\n    // this sets the registration point\n    bubble.regX = BUBBLE_WIDTH / 2;\n    bubble.regY = BUBBLE_HEIGHT / 2;\n    bubble.topConnector = topConnector;\n    bubble.addChild(background, label, dirButton, topConnector);\n    // bubble.addChild(topConnector, background, label, dirButton);\n    bubble.disable = () => {\n        bubble.alpha = 0.5;\n        bubble.mouseEnabled = false;\n    };\n    bubble.enable = () => {\n        bubble.alpha = 1.0;\n        bubble.mouseEnabled = true;\n    }\n\n    return bubble;\n}\n\n// for creating the arrow button (the direction button on bottom of bubble)\nfunction createDirButton(x, y, direction, color, isFixed) {\n    let dirButton = new createjs.Container();\n    color = (\"none\" === direction) ? \"yellow\" : color;\n    drawDirButton(dirButton, x, y, direction, color);\n    dirButton.x = x;\n    dirButton.y = y;\n    dirButton.color = color;\n    dirButton.name = \"dirButton\";\n    dirButton.mouseChildren = false;\n    dirButton.direction = direction;\n    if (!isFixed) {\n        dirButton.cursor = \"pointer\";\n        dirButton.on(\"mouseover\", handleMouseOver);\n        dirButton.on(\"mouseout\", handleMouseOver);\n        dirButton.on(\"click\", handleDirectionClick);\n    }\n    return dirButton;\n}\n\n// for updating the arrow button\nfunction drawDirButton(dirButton, x, y, direction, color) {\n    dirButton.removeAllChildren();\n    dirButton.direction = direction;\n    let rectWidth = 3;\n    let rectHeight = 10;\n    let triSize = 5;\n\n    if (direction === \"increase\") {\n        let rect = new createjs.Shape();\n        rect.graphics.beginFill(color).drawRect(0, 0, rectWidth, rectHeight);\n        rect.x = -1 * rectWidth / 2;\n        rect.y = triSize / 2;\n        let tri = new createjs.Shape();\n        tri.graphics.beginFill(color);\n        tri.graphics.drawPolyStar(0, 0, triSize, 3);\n        tri.rotation = 270;\n        dirButton.addChild(rect, tri);\n    } else if (direction === \"decrease\") {\n        let rect = new createjs.Shape();\n        rect.graphics.beginFill(color).drawRect(0, 0, rectWidth, rectHeight);\n        rect.x = -1 * rectWidth / 2;\n        rect.y = -1 * triSize / 2;\n        let tri = new createjs.Shape();\n        tri.graphics.beginFill(color);\n        tri.graphics.drawPolyStar(0, 0, triSize, 3);\n        tri.y = rectHeight;\n        tri.rotation = 90;\n        dirButton.addChild(rect, tri);\n    } else if (direction === \"none\") {\n        let text = new createjs.Text(\"Set Direction\", \"bold 12px Arial\", color);\n        generateHitAreaCenterAlignment(text);\n        text.textAlign = \"center\";\n        dirButton.addChild(text);\n    } else {\n        console.error(\"direction may only be increase, decrease, or none\");\n    }\n}\n\n// unused\nfunction createEvenlySpacedBubbles(startX, endX, y, nodes) {\n    let increment = (endX - startX) / (nodes.length - 1);\n    for (let i = 0; i < nodes.length; i++) {\n        let bubble = createBubble(startX + i * increment,\n                                  y,\n                                  nodes[i],\n                                  \"#4286f4\",\n                                  \"none\");\n        stage.addChild(bubble);\n    }\n    stage.update();\n}\n\nfunction createEvenlySpacedBubbles2(startX, endX, y, nodes, directions) {\n    let increment = (endX - startX) / (nodes.length - 1);\n    let bubbles = [];\n    for (let i = 0; i < nodes.length; i++) {\n        let bubble = createBubble(startX + i * increment,\n                                  y,\n                                  nodes[i],\n                                  \"#4286f4\",\n                                  directions[i]);\n        stage.addChild(bubble);\n        bubbles.push(bubble);\n    }\n    stage.update();\n    return bubbles;\n}\n\n\n// =============================================================================\n// ================================ Buttons ====================================\n// =============================================================================\n\nfunction createButton(x, y, text, color) {\n    let background = new createjs.Shape();\n    background\n        .graphics\n        .beginFill(color)\n        .drawRoundRect(0, 0, BUTTON_WIDTH, BUTTON_HEIGHT, BUTTON_RADIUS);\n\n    let label = new createjs.Text(text, \"bold 16px Arial\", \"#FFFFFF\").set({\n        x: BUTTON_WIDTH / 2, y: BUTTON_HEIGHT / 2,\n        textAlign: \"center\", textBaseline: \"middle\",\n    });\n\n    let button = new createjs.Container();\n    button.x = x - BUTTON_WIDTH / 2;\n    button.y = y - BUTTON_HEIGHT / 2;\n    button.name = `${label.text} button`;\n    button.addChild(background, label);\n    button.cursor = \"pointer\";\n    button.mouseChildren = false;\n    button.on(\"mouseover\", handleMouseOver);\n    button.on(\"mouseout\", handleMouseOver);\n\n    return button;\n}\n\nfunction createTextWidthButton(x, y, text, color=BUTTON_COLOR) {\n    let label = new createjs.Text(text, \"bold 16px Arial\", \"#FFFFFF\").set({\n        y: BUTTON_HEIGHT / 2, textAlign: \"center\", textBaseline: \"middle\"\n    });\n    let buttonWidth = Math.max(BUTTON_WIDTH, label.getMeasuredWidth() + 10);\n    label.x = buttonWidth / 2;\n    let bg = new createjs.Shape();\n    bg.graphics\n        .beginFill(color)\n        .drawRoundRect(0, 0, buttonWidth, BUTTON_HEIGHT, BUTTON_RADIUS);\n    let button = new createjs.Container();\n    button.x = x - (buttonWidth / 2);\n    button.y = y - (BUTTON_HEIGHT / 2);\n    button.name = 'button';\n    button.addChild(bg, label);\n    button.cursor = 'pointer';\n    button.mouseChildren = false;\n    button.on('mouseover', handleMouseOver);\n    button.on('mouseout', handleMouseOver);\n    button.disable = () => {\n        button.alpha = 0.5;\n        button.mouseEnabled = false;\n    };\n    button.enable = () => {\n        button.alpha = 1.0;\n        button.mouseEnabled = true;\n    }\n    return button;\n}\n\n// perhaps a bad name. a button with an arrow image, not to be confused\n// with actual arrows\nfunction createArrowButton(x, name, direction) {\n    let scaling = 0.5;\n    let normal = new createjs.Bitmap(queue.getResult(\"orangeBtn\")).set({\n        scaleX: scaling, scaleY: scaling\n    });\n    let imgHeight = normal.image.height * scaling;\n    let hover = new createjs.Bitmap(queue.getResult(\"yellowBtn\")).set({\n        scaleX: scaling, scaleY: scaling\n    });\n    if (\"right\" === direction) {\n        normal.rotation = 180;\n        normal.y += imgHeight;\n        hover.rotation = 180;\n        hover.y += imgHeight;\n    }\n    let button = new createjs.Container().set({\n        x: x,\n        y: CANVAS_HEIGHT - imgHeight - 10,\n        name: name\n    });\n    button.addChild(normal);\n    button.cursor = 'pointer';\n    button.mouseChildren = false;\n    button.mouseEnabled = true;\n\n    button.on('mouseover', e => {\n        button.removeAllChildren();\n        button.addChild(hover);\n    });\n    button.on('mouseout', e => {\n        button.removeAllChildren();\n        button.addChild(normal);\n    });\n    button.disable = () => {\n        button.alpha = 0.5;\n        button.mouseEnabled = false;\n    };\n    button.enable = () => {\n        button.alpha = 1.0;\n        button.mouseEnabled = true;\n    }\n    return button;\n}\n\nfunction createBackButton() {\n    return createArrowButton((CANVAS_WIDTH * 0.1) - BUTTON_WIDTH,\n                             \"back button\",\n                             \"left\");\n}\n\n\nfunction createNextButton() {\n    return createArrowButton((CANVAS_WIDTH * 0.9) + BUTTON_WIDTH,\n                             'next button',\n                             \"right\");\n}\n\nfunction createExtraLargeButton(x, y, text, color, width, height, fontStyle) {\n    let background = new createjs.Shape();\n    let buttonWidth = width;\n    let buttonHeight = height;\n    background\n        .graphics\n        .beginFill(color)\n        .drawRoundRect(0, 0, buttonWidth, buttonHeight, BUTTON_RADIUS);\n    if (\"\" !== fontStyle) {\n        fontStyle += \" \";\n    }\n    let label = new createjs.Text(text, fontStyle + \"32px Arial\", \"#FFFFFF\").set({\n        x: buttonWidth / 2, y: buttonHeight / 2 - 25,\n        textAlign: \"center\", textBaseline: \"bottom\"\n    });\n\n    let button = new createjs.Container();\n    button.x = x - buttonWidth / 2;\n    button.y = y - buttonHeight / 2;\n    button.addChild(background, label);\n    button.cursor = \"pointer\";\n    button.mouseChildren = false;\n    button.on(\"mouseover\", handleMouseOver);\n    button.on(\"mouseout\", handleMouseOver);\n\n    return button;\n}\n\nfunction createLargeButton(x, y, text, color) {\n    let background = new createjs.Shape();\n    let largeButtonWidth = 300;\n    let largeButtonHeight = 100;\n    background\n        .graphics\n        .beginFill(color)\n        .drawRoundRect(0, 0, largeButtonWidth, largeButtonHeight, BUTTON_RADIUS);\n\n    let label = new createjs.Text(text, \"bold 32px Arial\", \"#FFFFFF\").set({\n        x: largeButtonWidth / 2, y: largeButtonHeight / 2,\n        textAlign: \"center\", textBaseline: \"middle\"\n    });\n\n    let button = new createjs.Container();\n    button.x = x - largeButtonWidth / 2;\n    button.y = y - largeButtonHeight / 2;\n    button.addChild(background, label);\n    button.cursor = \"pointer\";\n    button.mouseChildren = false;\n    button.on(\"mouseover\", handleMouseOver);\n    button.on(\"mouseout\", handleMouseOver);\n\n    return button;\n}\n\nfunction createPlusButton(x, y, buttonSize) {\n    //let buttonSize = 25;\n    let background = new createjs.Shape();\n    background\n        .graphics\n        .beginFill(\"#4286f4\")\n        .drawRect(0, 0, buttonSize, buttonSize);\n\n    // create plus\n    let line1 = new createjs.Shape();\n    line1\n        .graphics\n        .setStrokeStyle(2)\n        .beginStroke(\"#FFFFFF\")\n        .moveTo(buttonSize / 2, buttonSize / 4)\n        .lineTo(buttonSize / 2, buttonSize * .75);\n    let line2 = new createjs.Shape();\n    line2\n        .graphics\n        .setStrokeStyle(2)\n        .beginStroke(\"#FFFFFF\")\n        .moveTo(buttonSize / 4, buttonSize / 2)\n        .lineTo(buttonSize * .75, buttonSize / 2);\n\n    let button = new createjs.Container();\n    button.x = x;\n    button.y = y;\n    button.addChild(background, line1, line2);\n    button.cursor = \"pointer\";\n    button.mouseChildren = false;\n    button.on(\"mouseover\", handleMouseOver);\n    button.on(\"mouseout\", handleMouseOver);\n\n    return button;\n}\n\nfunction createXButton(x, y, buttonSize) {\n    let background = new createjs.Shape();\n    background.graphics.beginFill(\"#4286f4\").drawRect(0, 0, buttonSize, buttonSize);\n\n    // create x\n    let margin = (buttonSize - .5 * buttonSize / 1.414) / 2 - (buttonSize / 50)\n    let line1 = new createjs.Shape();\n    line1\n        .graphics\n        .setStrokeStyle(2)\n        .beginStroke(\"#FFFFFF\")\n        .moveTo(margin, margin)\n        .lineTo(buttonSize - margin, buttonSize - margin);\n    let line2 = new createjs.Shape();\n    line2\n        .graphics\n        .setStrokeStyle(2)\n        .beginStroke(\"#FFFFFF\")\n        .moveTo(margin, buttonSize - margin)\n        .lineTo(buttonSize - margin, margin);\n\n    let button = new createjs.Container();\n    button.x = x;\n    button.y = y;\n    button.addChild(background, line1, line2);\n    button.cursor = \"pointer\";\n    button.mouseChildren = false;\n    button.on(\"mouseover\", handleMouseOver);\n    button.on(\"mouseout\", handleMouseOver);\n\n    return button;\n}\n\n// a round version of createXButton with a black background\nfunction createCloseButton(x, y, buttonSize) {\n    let background = new createjs.Shape();\n    background.graphics.beginFill(\"#000\").drawCircle(0, 0, 10);\n\n    let label = new createjs.Text(\"x\", \"12px Arial\", \"#FFF\").set({\n        x: 0, y: 0, textAlign: \"center\", textBaseline: \"middle\"\n    });\n\n    let button = new createjs.Container();\n    button.x = x;\n    button.y = y;\n    button.addChild(background, label);\n    button.cursor = \"pointer\";\n    button.mouseChildren = false;\n    button.on(\"mouseover\", handleMouseOver);\n    button.on(\"mouseout\", handleMouseOver);\n\n    return button;\n}\n\n// =============================================================================\n// ================================= Panels ====================================\n// =============================================================================\n\nfunction createOption(x, y, text, width) {\n    let optionBox = new createjs.Shape();\n    optionBox\n        .graphics\n        .beginStroke(\"#000\")\n        .beginFill(OPTION_COLOR)\n        .drawRect(0, 0, width, OPTION_HEIGHT);\n\n    let optionLabel = new createjs.Text(text, \"16px Arial\", \"#000\");\n    optionLabel.x = width / 2 - optionLabel.getMeasuredWidth() / 2;\n    optionLabel.y = OPTION_HEIGHT / 2 - optionLabel.getMeasuredHeight() / 2;\n\n    let option = new createjs.Container();\n    option.x = x;\n    option.y = y;\n    option.addChild(optionBox, optionLabel);\n    option.mouseChildren = false;\n    option.cursor = \"pointer\";\n\n    option.on(\"mouseover\", handlePanelOver);\n    option.on(\"mouseout\", handlePanelOver);\n\n    return option;\n}\n\nfunction createDirectionPanel(x, y, target) {\n    let panel = new createjs.Container();\n    panel.x = x;\n    panel.y = y;\n\n    let option1 = createOption(0, 0, \"Increases\", OPTION_MIN_WIDTH);\n    let option2 = createOption(0, OPTION_HEIGHT, \"Decreases\", OPTION_MIN_WIDTH);\n    option1.on(\"click\", e => {\n        drawDirButton(target, x, y, \"increase\", \"#FFFFFF\");\n        steps.push({\n            action: \"NODE_CHANGE_DIRECTION\",\n            object: nodes[target.parent.idx],\n            index: target.parent.idx,\n            info: \"increase\",\n            timestamp: (new Date()).toLocaleString()\n        });\n    });\n    option2.on(\"click\", e => {\n        drawDirButton(target, x, y, \"decrease\", \"#FFFFFF\")\n        steps.push({\n            action: \"NODE_CHANGE_DIRECTION\",\n            object: nodes[target.parent.idx],\n            index: target.parent.idx,\n            info: \"decrease\",\n            timestamp: (new Date()).toLocaleString()\n        });\n    });\n\n    panel.addChild(option1, option2);\n\n    return panel;\n}\n\nfunction changeExplanation(target, text) {\n    let arrow = target.arrow;\n    drawArrow(arrow, arrow.x, arrow.y, arrow.endX, arrow.endY, text);\n    steps.push({\n        action: \"ARROW_CHANGE_LABEL\",\n        object: nodes[arrow.connector.parent.idx] + \"::\" + nodes[arrow.connectorOver.parent.idx],\n        index: arrow.connector.parent.idx + \"::\" + arrow.connectorOver.parent.idx,\n        info: text.replace(\"\\n\", \" \"),\n        timestamp: (new Date()).toLocaleString()\n    });\n    return;\n}\n\nfunction createExplanationPanel(x, y, target) {\n    let panel = new createjs.Container();\n    panel.x = x;\n    panel.y = y;\n    let option1 = createOption(0, 0, \"Definition\", OPTION_MIN_WIDTH);\n    let option2 = createOption(0, OPTION_HEIGHT, \"Cause\", OPTION_MIN_WIDTH);\n    let option3 = createOption(0, 2 * OPTION_HEIGHT, \"Correlation\", OPTION_MIN_WIDTH);\n    option1.on(\"click\", e => changeExplanation(target, \"Definition\"));\n    option2.on(\"click\", e => handleCauseClick(x, y, target));\n    option3.on(\"click\", e => changeExplanation(target, \"Correlation\"));\n    panel.addChild(option1, option2, option3);\n    return panel;\n}\n\nfunction createDeletePanel(x, y, target) {\n    let panel = new createjs.Container();\n    panel.x = x;\n    panel.y = y;\n    let option1 = createOption(0, 0, \"Delete\", OPTION_MIN_WIDTH);\n    option1.on(\"click\", e => {\n        target.connector.arrow = null;\n        target.connectorOver.arrow = null;\n        removeArrowAndLabel(target);\n        steps.push({\n            action: \"ARROW_DELETE\",\n            object: nodes[target.connector.parent.idx] + \"::\" + nodes[target.connectorOver.parent.idx],\n            index: target.connector.parent.idx + \"::\" + target.connectorOver.parent.idx,\n            info: \"N/A\",\n            timestamp: (new Date()).toLocaleString()\n        });\n    });\n    panel.addChild(option1);\n    return panel;\n}\n\nfunction createCausePanel(x, y, target) {\n    let panel = new createjs.Container();\n    panel.x = x;\n    panel.y = y;\n    // find max length of cause text\n    let optionWidth = OPTION_MIN_WIDTH;\n    for (let i = 0; i < causes.length; i++) {\n        let text = new createjs.Text(causes[i], \"16px Arial\", \"#000\");\n        let textWidth = text.getMeasuredWidth() + 10;\n        if (textWidth > optionWidth) {\n            optionWidth = textWidth;\n        }\n    }\n    for (let i = 0; i < causes.length; i++) {\n        let option = createOption(0, OPTION_HEIGHT * i, causes[i], optionWidth);\n        option.on(\"click\", e => changeExplanation(target, \"Cause:\\n\" + causes[i]));\n        panel.addChild(option);\n    }\n    return panel;\n}\n\nfunction createConceptsPanel(x, y, allConcepts, conceptBubbles, clickHdlr) {\n    let panel = new createjs.Container().set({\n        x: x, y: y + OPTION_HEIGHT\n    });\n    let usedNodes = conceptBubbles.map((bub) => bub.text);\n    let options = [];\n    allConcepts.forEach((value) => {\n        if (!usedNodes.includes(value)) {\n            options.push(value);\n        }\n    });\n    let longestOption = options.reduce(function (a, b) {\n        return a.length > b.length ? a : b;\n    });\n    let tmp = new createjs.Text(longestOption, \"16px Arial\", \"#000\");\n    let optionWidth = Math.max(OPTION_MIN_WIDTH, tmp.getMeasuredWidth() + 10);\n    options.forEach((opt, i) => {\n        let option = createOption(0, OPTION_HEIGHT * i, opt, optionWidth);\n        option.on(\"click\", e => clickHdlr(opt));\n        panel.addChild(option);\n    });\n    return panel;\n}\n\n\n// =============================================================================\n// ============================= Arrows and Labels =============================\n// =============================================================================\n\n// only used for the unlabeled arrow between iv and dv\nfunction createUnlabeledArrow(startX, startY, endX, endY) {\n    let arrow = new createjs.Shape();\n    arrow.x = startX;\n    arrow.y = startY;\n    let w = endX - startX;\n    let h = endY - startY;\n    let lineLength = Math.sqrt(w * w + h * h);\n    // draw straight line\n    arrow\n        .graphics\n        .setStrokeStyle(3)\n        .beginStroke(\"#000\")\n        .moveTo(0, 0)\n        .lineTo(lineLength, 0);\n    // draw triangle\n    let triangleSize = 5;\n    arrow\n        .graphics\n        .beginFill(\"#000\")\n        .drawPolyStar(lineLength - triangleSize, 0, triangleSize, 3);\n    // rotate\n    arrow.rotation = Math.atan2(h, w) * 180 / Math.PI;\n    arrow.disable = () => {\n        arrow.alpha = 0.5;\n        arrow.mouseEnabled = false;\n    };\n    arrow.enable = () => {\n        arrow.alpha = 1.0;\n        arrow.mouseEnabled = true;\n    }\n    return arrow;\n}\n\n// this is to create a new arrow\n// first create the arrow, then update it using drawArrow\nfunction createArrow(startX, startY, endX, endY, arrowLabel) {\n    let arrow = new createjs.Container();\n    arrow.name = \"arrow\";\n    arrow.x = startX;\n    arrow.y = startY;\n    // just storing some end point information\n    arrow.endX = endX;\n    arrow.endY = endY;\n    // Determine the length between the start and end point using pythagoras\n    let w = endX - startX;\n    let h = endY - startY;\n    let length = Math.sqrt(w * w + h * h);\n    // draw arrow in straight line\n    let line = new createjs.Shape();\n    line\n        .graphics\n        .clear()\n        .setStrokeStyle(3)\n        .beginStroke(\"#000\")\n        .moveTo(0, 0)\n        .lineTo(length, 0);\n    // Draw the arrow head at the end.\n    if (arrowLabel.substring(0, 5) === \"Cause\") {\n        let arrowSize = 5;\n        line.graphics.beginFill(\"#000\");\n        line.graphics.drawPolyStar(length - arrowSize, 0, arrowSize, 3);\n    }\n    // Rotate the arrow\n    line.rotation = Math.atan2(h, w) * 180 / Math.PI;\n    arrow.line = line;\n    arrow.addChild(line);\n    // Create arrow label\n    let label = new createjs.Text(arrowLabel, \"12px Arial\", \"#000\");\n    label.textAlign = \"center\";\n    label.arrow = arrow;\n    arrow.label = label;\n    // Create arrow label box\n    let labelPadding = 5;\n    let bounds = arrow.label.getBounds();\n    let labelBox = new createjs.Container();\n    labelBox.on(\"click\", handleExplanationClick);\n    labelBox.on(\"mouseover\", handleMouseOver);\n    labelBox.on(\"mouseout\", handleMouseOver);\n    labelBox.cursor = \"pointer\";\n    let midX = (endX - startX) / 2;\n    let midY = (endY - startY) / 2;\n    labelBox.x = midX;\n    labelBox.y = midY;\n    let labelBg = new createjs.Shape();\n    labelBg\n        .graphics\n        .beginStroke(\"#000\")\n        .beginFill(\"#FFFFE0\")\n        .drawRect(0,\n                  0,\n                  bounds.width + 2 * labelPadding,\n                  bounds.height + 2 * labelPadding);\n    labelBg.x = -1 * bounds.width / 2 - labelPadding;\n    labelBg.y = -labelPadding;\n    labelBox.mouseChildren = false;\n    labelBox.name = \"labelBox\";\n    labelBox.addChild(labelBg, label);\n    arrow.addChild(labelBox);\n    arrow.disable = () => {\n        arrow.alpha = 0.5;\n        arrow.mouseEnabled = false;\n    };\n    arrow.enable = () => {\n        arrow.alpha = 1.0;\n        arrow.mouseEnabled = true;\n    }\n\n    return arrow;\n}\n\n// for redrawing arrows that already exist on stage\nfunction drawArrow(arrow, startX, startY, endX, endY, arrowLabel) {\n    arrow.x = startX;\n    arrow.y = startY;\n    // just storing some end point information\n    arrow.endX = endX;\n    arrow.endY = endY;\n    // Determine the length between the start and end point using pythagoras\n    let w = endX - startX;\n    let h = endY - startY;\n    let length = Math.sqrt(w * w + h * h);\n    // draw arrow in straight line\n    let line = arrow.line;\n    line\n        .graphics.clear()\n        .setStrokeStyle(3)\n        .beginStroke(\"#000\")\n        .moveTo(0, 0)\n        .lineTo(length, 0);\n    // Draw the arrow head at the end.\n    if (arrowLabel.substring(0, 5) === \"Cause\") {\n        let arrowSize = 5;\n        line.graphics.beginFill(\"#000\");\n        line.graphics.drawPolyStar(length - arrowSize, 0, arrowSize, 3);\n    }\n    // Rotate the arrow\n    line.rotation = Math.atan2(h, w) * 180 / Math.PI;\n    // Create arrow label\n    let labelBox = arrow.getChildByName(\"labelBox\");\n    let midX = (endX - startX) / 2;\n    let midY = (endY - startY) / 2;\n    labelBox.x = midX;\n    let labelBoxOffset = 5;\n    labelBox.y = midY - labelBoxOffset;\n    // change the arrow label box if the arrow label has been updated\n    if (arrow.label.text != arrowLabel) {\n        labelBox.removeAllChildren();\n        let label = new createjs.Text(arrowLabel, \"12px Arial\", \"#000\");\n        label.arrow = arrow;\n        label.textAlign = \"center\";\n        label.lineWidth = 100;\n        arrow.label = label;\n        let labelPadding = 5;\n        let bounds = arrow.label.getBounds();\n        let labelBg = new createjs.Shape();\n        labelBg\n            .graphics\n            .beginStroke(\"#000\")\n            .beginFill(\"#FFFFE0\")\n            .drawRect(0,\n                      0,\n                      bounds.width + 2 * labelPadding,\n                      bounds.height + 2 * labelPadding);\n        labelBg.x = -1 * bounds.width / 2 - labelPadding;\n        labelBg.y = -labelPadding;\n        labelBox.mouseChildren = false;\n        labelBox.addChild(labelBg, label);\n    }\n    arrow.addChild(labelBox);\n}\n\n// remove an arrow with its label\nfunction removeArrowAndLabel(arrow) {\n    if (arrow != null && arrow != undefined) {\n        arrowz = arrowz.filter((item) => item !== arrow);\n        stage.removeChild(arrow);\n        //stage.removeChild(arrow.label);\n    }\n}\n\n// convert from a listener which logs user out on main tab close\n// to a function we can call instead\nfunction logout() {\n    localStorage.clear();\n}\n\n\n\nlet studentHypoTasks;\nlet studentCondition;\nlet currHypoTaskIdx;\n\nfunction invalidTask() {\n    showSnackbar(\"invalid task\");\n}\n\nfunction updateCurrTaskIndex(idx) {\n    currHypoTaskIdx = idx;\n    return db.saveValue(\"currHypoTaskIdx\", idx)\n}\n\nexport function prevHypoTask(e) {\n    let prevTaskIdx = currHypoTaskIdx - 1;\n    if (prevTaskIdx < 0) {\n        console.error('invalid taskIdx: ', prevTaskIdx);\n        invalidTask();\n    } else {\n        updateCurrTaskIndex(prevTaskIdx)\n            .then(() => {\n                currHypoTask();\n            })\n            .catch(function (error) {\n                console.error(error);\n            });\n    }\n}\n\nexport function nextHypoTask(e) {\n    let nextTaskIdx = currHypoTaskIdx + 1;\n    if (nextTaskIdx >= studentHypoTasks.length) {\n        console.error('invalid taskIdx: ', nextTaskIdx);\n        invalidTask();\n    } else {\n        updateCurrTaskIndex(nextTaskIdx)\n            .then(() => {\n                currHypoTask();\n            })\n            .catch(function (error) {\n                console.error(error);\n            });\n    }\n}\n\nexport function currHypoTask() {\n    let task;\n    console.log('currHypoTask():', currHypoTaskIdx);\n    if ((null === currHypoTaskIdx) || (undefined === currHypoTaskIdx) ||\n        (currHypoTaskIdx < 0) || (currHypoTaskIdx === studentHypoTasks.length)) {\n        console.error('currHypoTaskIdx is invalid: ', currHypoTaskIdx);\n        task = invalidTask;\n    } else {\n        task = studentHypoTasks[currHypoTaskIdx];\n    }\n    console.log(task.name);\n    task();\n}\n\n\nexport function initHypoTasks(data) {\n    // console.log(\"initHypoTasks()\", data);\n    currHypoTaskIdx = data.currHypoTaskIdx || 0;\n    // studentCondition = data.condition;\n    updateCurrTaskIndex(currHypoTaskIdx)\n        .then(() => {\n            let _pageNames = computeHypoTasks();\n            console.log('pageNames', _pageNames);\n            studentHypoTasks = _pageNames.map(\n                x => pageNamesToFunctions[x]\n            );\n            console.log(studentHypoTasks);\n            // conditionHypoTasks[studentCondition].map(\n            //     x => pageNamesToFunctions[x]\n            // );\n            let taskNames = studentHypoTasks.map(x => x.name);\n            console.log(\"taskNames\", taskNames);\n            currHypoTask();\n        });\n}\n\n\ndb = getDBConnection(\"localstorage\");\ndb.setCredentials(\"BOGUS_CLASSCODE\", \"BOGUS_USER\");\ninitHypoPage();","import \"./index.css\";\n\n\nexport class SnackBar {\n    constructor(eleID) {\n        this.el = document.getElementById(eleID || \"snackbar\");\n    }\n\n    show(text) {\n        this.el.innerHTML = text;\n        // Add the \"show\" class to DIV\n        // this.el.className = \"show\";\n        this.el.classList.add(\"show\");\n        // After 3 seconds, remove the show class from DIV\n        setTimeout(() => {\n            // snackbar.className = snackbar.className.replace(\"show\", \"\");\n            this.el.classList.remove(\"show\");\n        }, 3000);    \n    }\n}\n","import \"./index.css\";\n\nexport class NavBar {\n    constructor() {\n        this.el = document.querySelector(\"nav.navbar\");\n        this.userInfoRegion = document.getElementById(\"user_info_region\");\n        this.activityTitle = document.getElementById(\"activity_title\");\n        this.activitySection = document.getElementById(\"activity_section\");\n        this.signOutBtn = document.getElementById(\"sign_out_button\");\n        this.signInText = document.getElementById(\"sign_in_text\");\n        this.signOutUser = this.signOutUser.bind(this);\n        // this.logoutHandler = logoutHandler;\n        this.signOutBtn.addEventListener(\"click\", this.signOutUser);\n    }\n\n    signOutUser(e) {\n        this.userInfoRegion.classList.add(\"invisible\");\n        localStorage.clear();\n        window.location.path = \"/\";\n    }\n\n    displayActivityTitle(title) {\n        this.activityTitle.innerText = title;\n    }\n\n    displayActivitySection(section) {\n        this.activitySection.innerText = section;\n    }\n\n    displayUser(userName) {\n        this.signInText.innerHTML = `Welcome, ${userName}`;\n        this.userInfoRegion.classList.remove(\"invisible\");\n    }\n};\n","import { LocalStorageDB } from \"./localStorageDB\";\nimport { FirestoreDB } from \"./firestoreDB\";\n\nexport function getDBConnection(dbType) {\n    let db;\n    switch(dbType) {\n        case \"firestore\":\n            db = new FirestoreDB();\n            break;\n        default:\n            db = new LocalStorageDB();\n    }\n    return db; \n}\n"],"sourceRoot":""}